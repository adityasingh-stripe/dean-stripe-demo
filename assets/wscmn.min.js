function WsLangHref(n,t){for(var h,c,o=document.URL.split("?"),l=o[0],f=o[1],s=f.split("&"),u,r,i={},e=0;e<s.length;e++)if(u=s[e].split("="),u.length>=2){if(r=u[0].toLowerCase(),r=="langid")continue;i[r]=r!=="lname"&&r!=="voucher"&&r!=="key"?unescape(u[1]):u[1]}n=Math.round(n);(n<1||n>99)&&(n=1);i.checkin!=null&&(h=Utils.GetDate(i.checkin,WsDtFm[WsVars.LangID]),i.checkin=Utils.DateFormat(h,WsDtFm[n]));i.checkout!=null&&(c=Utils.GetDate(i.checkout,WsDtFm[WsVars.LangID]),i.checkout=Utils.DateFormat(c,WsDtFm[n]));(typeof t=="undefined"||t=="")&&(t=Utils.LangMap[n].lang);i.lang=t;f=[];for(itm in i)f.push(itm+"="+i[itm]);location.href=l+"?"+f.join("&")}function GetSvcsHtml(n,t,r,u,f,e,o,s,h,c,l,a){var v="",w,y,p,b,g,nt,tt,d;if(n.svcs.length>0){for(w="",w=WsVars.Config2Flag=="True"?n.currency+"~":n.currency,v+=Utils.Format("<h4>{0}<\/h4><table>",WsMulti.Addons),v+=Utils.Format('<thead><tr><th scope="col" class="sr-only">{0}<\/th><th scope="col" class="sr-only">{1}<\/th><\/tr><\/thead><tbody>',WsMulti.PricingDetails,WsMulti.Amount),n.svcTaxes=0,n.svcAmt=0,n.svcTaxVAT=0,y={},p=0,svcsIncTax={},i=0;i<n.svcs.length;i++){if(n.svcs[i].TaxDetail!==undefined)for(j=0;j<n.svcs[i].TaxDetail.length;j++)if(n.svcs[i].TaxDetail[j].TaxDetail!==undefined)for(k=0;k<n.svcs[i].TaxDetail[j].TaxDetail.length;k++)b=n.svcs[i].TaxDetail[j].TaxDetail[k].Label,g=n.svcs[i].TaxDetail[j].TaxDetail[k].Tax/100,b!=""&&(p+=n.svcs[i].Qty*g,b in y?y[b]+=n.svcs[i].Qty*g:y[b]=n.svcs[i].Qty*g);nt=CalculateAddOnAmount(n.svcs[i],t,u,r,f,!0,e,o,s,h,c,l);n.svcs[i].Amt=Number(nt.amt);n.svcs[i].Taxes=Number(nt.tax);n.svcs[i].TaxVAT=Number(nt.taxVat);n.svcs[i].TaxVAT!==undefined?(tmpAmt=n.svcs[i].Amt-n.svcs[i].Qty*n.svcs[i].TaxVAT,n.svcTaxes+=n.svcs[i].Qty*(n.svcs[i].Taxes+n.svcs[i].TaxVAT),n.svcTaxVAT+=n.svcs[i].Qty*n.svcs[i].TaxVAT):(tmpAmt=n.svcs[i].Amt,n.svcTaxes+=n.svcs[i].Qty*n.svcs[i].Taxes);a||(a="",e!=undefined&&e!=null&&e.length>0&&(a=CheckPolicy(e)));tt="";$("#dvPayFullPrePayment").is(":visible")&&$("input:radio[name='rblPayFullPrePayment']").length>0&&(tt=$("input:radio[name='rblPayFullPrePayment']:checked").val());v+=Utils.Format('<tr class="ws-detail-addon"><td>{0}<\/td><td class="ws-prices ws-price-detail-addon" curr="{3}" ref="{2}">{1}<\/td><\/tr>',n.svcs[i].Name,Utils.GetAmount(tmpAmt,w,WsVars.UseCurrCode),tmpAmt,n.currency);n.currentTotal+=n.svcs[i].Amt+n.svcs[i].Qty*n.svcs[i].Taxes;n.svcAmt+=n.svcs[i].Amt;(n.svcs[i].Options.search("IncludeInDeposit")!="-1"||a=="PP"||tt=="OptFullPrePayment")&&(n.totalSvcDepositAmt+=n.svcs[i].Qty*(n.svcs[i].Amt+n.svcs[i].Taxes))}if(p>0)for(d in y)v+=Utils.Format('<tr class="ws-detail-tax-addon-{4}"><td>{0}<\/td><td class="ws-prices ws-tax-price-addon-{4}" curr="{3}" ref="{2}">{1}<\/td><\/tr>',d,Utils.GetAmount(y[d],w,WsVars.UseCurrCode),y[d],n.currency,d.replace(/\s+/g,"").toLocaleLowerCase());n.svcTaxes-p>0&&(v+=Utils.Format('<tr class="ws-tax-detail-addontaxes"><td>{0}<\/td><td class="ws-prices ws-tax-price-detail-addontaxes" curr="{3}" ref="{2}">{1}<\/td><\/tr>',WsMulti.AddonTaxes,Utils.GetAmount(n.svcTaxes-p,w,WsVars.UseCurrCode),n.svcTaxes-p,n.currency));v+="<\/tbody><\/table>"}return v}function CalculateAddOnAmount(n,t,i,r,u,f,e,o,s,h,c,l){var st=0,v=1,b=0,k=0,p=0,rt,lt,w,g,y,it,nt;IsScheduled=!1;checkOutDt="";unitTax=0;unitTaxVat=0;var a=n,ht=[],d="",tt=[],ut=0,ft=0,et=0,ot=0,ct=a.Per==="5"||a.Formula===5||a.Per==="6"||a.Formula===6||a.Per==="8"||a.Formula===8||a.Per==="9"||a.Formula===9||a.Per==="10"||a.Formula===10;if(v=n.Qty>1?n.Qty:1,WsVars.EnhancedMultiroom.toLowerCase()=="true"&&o!=null&&o.length>0)for(w=0;w<o.length;w++)WsVars.ChildAgeGroup1>0&&o[w]<=WsVars.ChildAgeGroup1?ut++:WsVars.ChildAgeGroup2>0&&o[w]<=WsVars.ChildAgeGroup2?ft++:WsVars.ChildAgeGroup3>0&&o[w]<=WsVars.ChildAgeGroup3?et++:WsVars.ChildAgeGroup4>0&&o[w]<=WsVars.ChildAgeGroup4&&ot++;else ut=s,ft=h,et=c,ot=l;if(WsVars.EnableChildAgeGroupOccupancy==="1"&&a.ChildOccupancyOptions!=""&&a.ChildOccupancyOptions!=undefined&&a.ChildOccupancyOptions!="undefined"&&(a.Per==="2"||a.Formula===2||a.Per==="10"||a.Formula===10))if(rt=a.ChildOccupancyOptions.split(","),rt!=null&&rt.length>0&&(ut>0||ft>0||et>0||ot>0))for(u=0,w=0;w<rt.length;w++)ut>0&&rt[w].trim()=="ChildAgeGroup1"&&(u+=ut),ft>0&&rt[w].trim()=="ChildAgeGroup2"&&(u+=ft),et>0&&rt[w].trim()=="ChildAgeGroup3"&&(u+=et),ot>0&&rt[w].trim()=="ChildAgeGroup4"&&(u+=ot);else u=ut+ft+et+ot;if(a.ExtServiceItemPrice===null&&a.ExtServiceItemPrice.length===0)return p=Utils.GetActualAmount(v*n.Price,WsVars.Currency,WsVars.currencyCode),b=Utils.GetActualAmount(v*n.Tax,WsVars.Currency,WsVars.currencyCode),k=Utils.GetActualAmount(v*n.TaxVat,WsVars.Currency,WsVars.currencyCode),unitTax=Utils.GetActualAmount(v*unitTax,WsVars.Currency,WsVars.currencyCode),unitTaxVat=Utils.GetActualAmount(v*unitTaxVat,WsVars.Currency,WsVars.currencyCode),{amt:p,tax:b,taxVat:k,unitTax:unitTax,unitTaxVat:unitTaxVat};for(f&&(lt=[{Dt1:t,Adults:i,Nights:r,Child1:u}],e=lt),w=0;w<e.length;w++)if(p=0,t=e[w].Dt1,checkOutDt=t+e[w].Nights,i=e[w].Adults,u=e[w].Child1,r=e[w].Nights,ct){if(a.ExtServiceItemPrice!=null&&a.ExtServiceItemPrice.length>0){if(f){for(g=0;g<a.ExtServiceItemPrice.length-1;++g)p+=a.ExtServiceItemPrice[g].DailyUnitPrice,b+=a.ExtServiceItemPrice[g].Tax,k+=a.ExtServiceItemPrice[g].TaxVat,unitTax+=a.ExtServiceItemPrice[g].DailyUnitTax,unitTaxVat+=a.ExtServiceItemPrice[g].DailyUnitTaxVat;return p=GetSvcTotal(a,p,v,i,1,u),p=Utils.GetActualAmount(v*p,WsVars.Currency,WsVars.currencyCode),b=Utils.GetActualAmount(v*b,WsVars.Currency,WsVars.currencyCode),k=Utils.GetActualAmount(v*k,WsVars.Currency,WsVars.currencyCode),unitTax=Utils.GetActualAmount(v*unitTax,WsVars.Currency,WsVars.currencyCode),unitTaxVat=Utils.GetActualAmount(v*unitTaxVat,WsVars.Currency,WsVars.currencyCode),{amt:p,tax:b,taxVat:k,unitTax:unitTax,unitTaxVat:unitTaxVat}}for(y=a.ExtServiceItemPrice.filter(function(n){return n.DtNumber>=t&&n.DtNumber<checkOutDt&&n.InvAvail}),g=0;g<y.length;++g)p+=y[g].DailyUnitPrice,b+=y[g].Tax,k+=y[g].TaxVat,unitTax+=y[g].DailyUnitTax,unitTaxVat+=y[g].DailyUnitTaxVat;p=Utils.GetActualAmount(v*p,WsVars.Currency,WsVars.currencyCode)/r;unitTax=Utils.GetActualAmount(v*unitTax,WsVars.Currency,WsVars.currencyCode)/r;unitTaxVat=Utils.GetActualAmount(v*unitTaxVat,WsVars.Currency,WsVars.currencyCode)/r;ht.push(p);b=Utils.GetActualAmount(v*b,WsVars.Currency,WsVars.currencyCode);k=Utils.GetActualAmount(v*k,WsVars.Currency,WsVars.currencyCode)}}else for(y=a.ExtServiceItemPrice.filter(function(n){return n.DtNumber>=t&&n.DtNumber<=checkOutDt}),st=a.Dates!=undefined&&a.Dates.length>0&&a.Dates[0]!=undefined&&a.Dates[0]!=null&&a.Dates[0].Dt!=undefined?a.Dates[0].Dt:t,it=t;it<=checkOutDt;it=it+1)if(a.Options.search("ExcludeArrivalDate")!="-1"&&a.Options.search("ExcludeDepartureDate")!="-1"||a.Options.search("CheckInOnly")!="-1"&&a.Options.search("CheckOutOnly")!="-1"){if(it==t||it==checkOutDt)continue;if(d=(a.Options.search("ScheduledbyDate")!="-1"||a.Options.search("ScheduledbyTime")!="-1"||a.SchedDate==="1"||a.SchedTime==="1"||a.ScheduledbyDate=="1"||a.ScheduledbyTime=="1")&&f?y.filter(function(n){return n.DtNumber==it}):y.filter(function(n){return n.DtNumber!=t&&n.DtNumber!=checkOutDt&&n.InvAvail}),d.length>0){Array.prototype.push.apply(tt,d);break}}else if(a.Options.search("CheckInOnly")!="-1"){if((a.Options.search("ExcludeDepartureDate")!="-1"||a.Options.search("CheckInOnly")!="-1")&&(d=y.filter(function(n){return n.DtNumber==t&&n.InvAvail}),d.length>0)){Array.prototype.push.apply(tt,d);break}}else if(a.Options.search("CheckOutOnly")!="-1"){if((a.Options.search("ExcludeArrivalDate")!="-1"||a.Options.search("CheckOutOnly")!="-1")&&(d=y.filter(function(n){return n.DtNumber==checkOutDt&&n.InvAvail}),d.length>0)){Array.prototype.push.apply(tt,d);break}}else if(a.Options.search("ExcludeDepartureDate")!="-1"){if(it==checkOutDt)continue;if(d=(a.Options.search("ScheduledbyDate")!="-1"||a.Options.search("ScheduledbyTime")!="-1"||a.SchedDate==="1"||a.SchedTime==="1"||a.ScheduledbyDate=="1"||a.ScheduledbyTime=="1")&&f?y.filter(function(n){return n.DtNumber==st&&n.InvAvail}):y.filter(function(n){return n.DtNumber!==checkOutDt&&n.InvAvail}),d.length>0){Array.prototype.push.apply(tt,d);break}}else if(a.Options.search("ExcludeArrivalDate")!="-1"){if(it==t)continue;if(d=(a.Options.search("ScheduledbyDate")!="-1"||a.Options.search("ScheduledbyTime")!="-1"||a.SchedDate==="1"||a.SchedTime==="1"||a.ScheduledbyDate=="1"||a.ScheduledbyTime=="1")&&f?y.filter(function(n){return n.DtNumber==st&&n.InvAvail}):y.filter(function(n){return n.DtNumber!==t&&n.InvAvail}),d.length>0){Array.prototype.push.apply(tt,d);break}}else if(y!=null&&y.length>0)if(f){if(d=d=y.filter(function(n){return n.DtNumber==st&&n.InvAvail}),d.length>0){Array.prototype.push.apply(tt,d);break}}else y!=null&&y!=undefined&&y.length>0?(a.Options.search("")=="-1"||a.SchedDate=="1"||a.SchedTime=="1"||(y=y.filter(function(n){return n.DtNumber==t&&n.InvAvail})),y!=null&&y!=undefined&&y.length>0&&(nt=y.reduce(function(n,t){return n.DailyUnitPrice<t.DailyUnitPrice&&t.DtNumber?n:t}),p=nt.DailyUnitPrice,b=nt.Tax,k=nt.TaxVat,unitTax=nt.DailyUnitTax,unitTaxVat=nt.DailyUnitTaxVat)):(p=a.ExtServiceItemPrice[0].DailyUnitPrice,b=a.ExtServiceItemPrice[0].Tax,k=a.ExtServiceItemPrice[0].TaxVat,unitTax=a.ExtServiceItemPrice[0].DailyUnitTax,unitTaxVat=a.ExtServiceItemPrice[0].DailyUnitTaxVat),p=Utils.GetActualAmount(v*p,WsVars.Currency,WsVars.currencyCode),b=Utils.GetActualAmount(v*b,WsVars.Currency,WsVars.currencyCode),k=Utils.GetActualAmount(v*k,WsVars.Currency,WsVars.currencyCode),unitTax=Utils.GetActualAmount(v*unitTax,WsVars.Currency,WsVars.currencyCode),unitTaxVat=Utils.GetActualAmount(v*unitTaxVat,WsVars.Currency,WsVars.currencyCode),ht.push(p),IsScheduled=!0;return ct||IsScheduled?(p=Math.min.apply(null,ht),{amt:p,tax:b,taxVat:k,unitTax:unitTax,unitTaxVat:unitTaxVat}):(tt!=null&&tt.length>0?(nt=tt.reduce(function(n,t){return n.DailyUnitPrice<t.DailyUnitPrice&&t.DtNumber?n:t}),p=nt.DailyUnitPrice,b=nt.Tax,k=nt.TaxVat,unitTax=nt.DailyUnitTax,unitTaxVat=nt.DailyUnitTaxVat):(p=a.Price,b=a.Tax,k=a.TaxVat),f&&(p=GetSvcTotal(a,p,v,i,r,u)),p=Utils.GetActualAmount(v*p,WsVars.Currency,WsVars.currencyCode),b=Utils.GetActualAmount(v*b,WsVars.Currency,WsVars.currencyCode),k=Utils.GetActualAmount(v*k,WsVars.Currency,WsVars.currencyCode),unitTax=Utils.GetActualAmount(v*unitTax,WsVars.Currency,WsVars.currencyCode),unitTaxVat=Utils.GetActualAmount(v*unitTaxVat,WsVars.Currency,WsVars.currencyCode),{amt:p,tax:b,taxVat:k,unitTax:unitTax,unitTaxVat:unitTaxVat})}function GetSvcTotal(n,t,i,r,u,f){var e;return n.Per!=undefined&&(e=n.Per),n.Formula!=undefined&&(e=n.Formula),e!="7"&&e!="4"&&((e=="5"||e=="6"||e=="8"||e=="9"||e=="10")&&(i=1),e=="1"?t=t*r:e=="2"?t=t*f:e=="3"?t=t*(r+f):e=="5"||e=="6"?t=t*u:e=="9"?t=t*u*r:e=="10"?t=t*u*f:e=="8"&&(t=t*u*(r+f))),t}function CheckValidations(){var n=null;return WSEvents&&WSEvents.do_action("SignupValidateBegin",{}),$("[id$=cbTitleHeaderFull],[id$=txEmailHeaderFull],[id$=txLastNameHeaderFull],[id$=txFirstNameHeaderFull]").removeClass("ws-error-form"),$("[id$=txEmailVerifyHeaderFull],[id$=txPasswordHeaderFull],[id$=txPasswordVerifyHeaderFull],[id$=chkAgreeSignUpHeaderFull]").removeClass("ws-error-form"),$("[id$=txPasswordHeaderFullBrainTree],[id$=txPasswordVerifyHeaderFullBrainTree]").removeClass("ws-error-form"),$("[data-braintree-id$=sheet-container]").removeClass("braintree-sheet--has-error"),$("[id$=msgSignUpHeaderFull]").html(""),$("[id$=successMsgSignUpHeaderFull]").addClass("ws-hidden").html(""),$("[id$=cbTitleHeaderFull]").length>0&&$("[id$=cbTitleHeaderFull]").val().length===0?($("[id$=cbTitleHeaderFull]").addClass("ws-error-form").focus(),n=WsMulti.EnterSalutation):$("[id$=txFirstNameHeaderFull]").val().length!==0&&Utils.IsName($("[id$=txFirstNameHeaderFull]").val())?$("[id$=txLastNameHeaderFull]").val().length!==0&&Utils.IsName($("[id$=txLastNameHeaderFull]").val())?$("#MyHeading_dvSignUpDobHeaderFull").is(":visible")&&($("[id$=cbDobYYHeaderFull]").val().length>0||$("[id$=cbDobMMHeaderFull]").val().length>0||$("[id$=cbDobDDHeaderFull]").val().length>0)&&SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramID>1&&CheckAge($("[id$=cbDobDDHeaderFull]").val()+"-"+$("[id$=cbDobMMHeaderFull]").val()+"-"+$("[id$=cbDobYYHeaderFull]").val())<21?n=WsMulti.CheckAge:Utils.IsValidEmail($("[id$=txEmailHeaderFull]").val())?$("[id$=txEmailVerifyHeaderFull]").length>0&&$("[id$=txEmailVerifyHeaderFull]").val()!==$("[id$=txEmailHeaderFull]").val()?($("[id$=txEmailVerifyHeaderFull]").addClass("ws-error-form").focus(),n=WsMulti.EnterRetypeEmail):$("[id$=txPasswordHeaderFull]").length>0&&$("[id$=txPasswordHeaderFull]").val().length<8?($("[id$=txPasswordHeaderFull]").addClass("ws-error-form").focus(),n=WsMulti.EnterPassword):$("[id$=txPasswordVerifyHeaderFull]").length>0&&$("[id$=txPasswordHeaderFull]").length>0&&$("[id$=txPasswordVerifyHeaderFull]").val()!==$("[id$=txPasswordHeaderFull]").val()?($("[id$=txPasswordVerifyHeaderFull]").addClass("ws-error-form").focus(),n=WsMulti.EnterRetypePassword):$("[id$=txPasswordHeaderFullBrainTree]").length>0&&$("[id$=txPasswordHeaderFullBrainTree]").val().length==0?($("[id$=txPasswordHeaderFullBrainTree]").addClass("ws-error-form").focus(),n=WsMulti.EnterPassword):$("[id$=txPasswordHeaderFullBrainTree]").length>0&&$("[id$=txPasswordHeaderFullBrainTree]").val().length>0&&$("[id$=txPasswordHeaderFullBrainTree]").val().length<8?($("[id$=txPasswordHeaderFullBrainTree]").addClass("ws-error-form").focus(),n=WsMulti.LoyaltySignupError101):$("[id$=txPasswordVerifyHeaderFullBrainTree]").length>0&&$("[id$=txPasswordVerifyHeaderFullBrainTree]").length>0&&$("[id$=txPasswordVerifyHeaderFullBrainTree]").val()!==$("[id$=txPasswordHeaderFullBrainTree]").val()?($("[id$=txPasswordVerifyHeaderFullBrainTree]").addClass("ws-error-form").focus(),n=WsMulti.EnterRetypePassword):$("#txSignUpPhoneHeaderFull").is(":visible")&&$("#txSignUpPhoneHeaderFull").val().length===0?($("#txSignUpPhoneHeaderFull").addClass("ws-error-form").focus(),n=WsMulti.EnterPhone):$("#txSignUpAddress1HeaderFull").is(":visible")&&$("#txSignUpAddress1HeaderFull").val().length===0?($("#txSignUpAddress1HeaderFull").addClass("ws-error-form").focus(),n=WsMulti.EnterAddress):$("#txSignUpCityHeaderFull").is(":visible")&&$("#txSignUpCityHeaderFull").val().length===0?($("#txSignUpCityHeaderFull").addClass("ws-error-form").focus(),n=WsMulti.EnterCity):$("#txSignUpZipHeaderFull").is(":visible")&&$("#txSignUpZipHeaderFull").val().length===0?($("#txSignUpZipHeaderFull").addClass("ws-error-form").focus(),n=WsMulti.EnterZip):$("[id$=chkAgreeSignUpHeaderFull]").prop("checked")?SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramID==SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramEnum.StellerCRM||SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramID==SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramEnum.ResortWorld&&$("#MyHeading_dvSignUpDobHeaderFull").is(":visible")&&($("[id$=MyHeading_cbDobMMHeaderFull]").val().length==0||$("[id$=MyHeading_cbDobDDHeaderFull]").val().length==0||$("[id$=MyHeading_cbDobYYHeaderFull]").val().length==0)&&(n=WsMulti.EnterDob):(n=WsMulti.EnterLoyalTerms,$("[id$=chkAgreeSignUpHeaderFull]").addClass("ws-error-form").focus()):($("[id$=txEmailHeaderFull]").addClass("ws-error-form").focus(),n=WsMulti.EnterEmailAddress):($("[id$=txLastNameHeaderFull]").addClass("ws-error-form").focus(),n=WsMulti.EnterLastName):($("[id$=txFirstNameHeaderFull]").addClass("ws-error-form").focus(),n=WsMulti.EnterFirstName),n}function Setloyalty(){var i=null,r,n,t;return(i=CheckValidations(),i!=null)?($("[id$=msgSignUpHeaderFull]").html(i),WSEvents&&(i=WSEvents.apply_filters("SignupValidateErrorMsgHeaderFull",i),WSEvents.do_action("SignupValidateErrorHeaderFull",i),$("#MyHeading_buSignUp_WithBraintree").removeClass("ws-submitting ws-disabled")),!1):(r="xml/setloyalty.aspx",n={hotelID:WsVars.HotelID,langID:WsVars.LangID,hgID:WsVars.HgID,fname:$("[id$=txFirstNameHeaderFull]").val(),lname:$("[id$=txLastNameHeaderFull]").val(),eml:$("[id$=txEmailHeaderFull]").val(),nonce:$("[id$=nonce]").val(),source:"Header",simple:"1"},$("[id$=cbTitleHeaderFull]").length>0&&(n.salute=$("[id$=cbTitleHeaderFull]").val()),$("[id$=cbDobYYHeaderFull]").length>0&&(n.dobY=$("[id$=cbDobYYHeaderFull]").val()),$("[id$=cbDobMMHeaderFull]").length>0&&(n.dobM=$("[id$=cbDobMMHeaderFull]").val()),$("[id$=cbDobDDHeaderFull]").length>0&&(n.dobD=$("[id$=cbDobDDHeaderFull]").val()),$("[id$=txPasswordHeaderFull]").length>0&&(n.password=$("[id$=txPasswordHeaderFull]").val()),$("[id$=txPasswordHeaderFullBrainTree]").length>0&&(n.password=$("[id$=txPasswordHeaderFullBrainTree]").val()),$("[id$=txWsGuestPassHeaderFull]").length>0&&(n.password=$("[id$=txWsGuestPassHeaderFull]").val()),$("#txSignUpAddress1HeaderFull").length>0&&(n.Address1=$("#txSignUpAddress1HeaderFull").val()),$("#txSignUpCityHeaderFull").length>0&&(n.City=$("#txSignUpCityHeaderFull").val()),$("#txSignUpZipHeaderFull").length>0&&(n.Zip=$("#txSignUpZipHeaderFull").val()),$("#cbSignUpCountryHeaderFull").length>0&&(n.Country=$("#cbSignUpCountryHeaderFull").val()),$("#cbSignUpStateHeaderFull").length>0&&$("#cbSignUpStateHeaderFull").val()!=""?n.State=$("#cbSignUpStateHeaderFull").val():$("#txSignUpStateHeaderFull").length>0&&(n.State=$("#txSignUpStateHeaderFull").val()),$("#txSignUpPhoneHeaderFull").length>0&&(n.Phone=$("#txSignUpPhoneHeaderFull").val()),$("[id$=txVerifyNumberHeaderFull]").length>0&&(n.captchaID=$("[id$=txVerifyNumberHeaderFull]").get(0).Captcha.Id,n.instanceID=$("[id$=txVerifyNumberHeaderFull]").get(0).Captcha.InstanceId,n.verifyNumber=$("[id$=txVerifyNumberHeaderFull]").val(),n.signmeup="1",WsSelectedItem!=null?(n.wsitem=JSON.stringify(WsSelectedItem),n.rooms=WSMAIN.Rooms):WsLoggedInRate.length>0&&(n.wsrate=WsLoggedInRate),r="index.aspx"),t=$("#buWsDelegAuthLogin").length>0?$("#buWsDelegAuthLogin").attr("data-auth"):"",$("body").css({cursor:"wait"}),WSEvents&&WSEvents.do_action("SignupProcessBeginHeaderFull",{url:r,data:n}),$.ajax({type:"POST",url:r,data:n,dataType:"json",success:function(i){WSEvents&&WSEvents.do_action("SignupProcessOKHeaderFull",i);SHR.TrkLib.SignUp({provider:"Booking Engine"});$("body").css({cursor:"auto"});$("[id$=msgPaymentProcessBraintree]").html("");i.Msg.length>0&&(i.Status==="1"?$("[id$=successMsgSignUpHeaderFull]").html(i.Msg).removeClass("ws-hidden"):i.Status==="-4"&&t!=undefined&&t!=null&&t!=""&&$(".ws-delegauth-signin").length>0?($(".ws-delegauth-signin").trigger("click"),$("[id$=msgLoginHeaderFull]").html(i.Msg)):($("[id$=msgSignUpHeaderFull]").html(i.Msg),$("#MyHeading_buSignUp_WithBraintree").removeClass("ws-submitting ws-disabled")));i.Status==="1"?WsVars.MemberProgram==="4"?location.href=WsSelectedItem!=null&&i.ItemAdded==="1"?Utils.Format("cart.aspx?hotelID={0}&lang={1}&hgID={2}&currID={3}",WsVars.HotelID,WsVars.LangCode,WsVars.HgID,WsVars.CurrencyId):WsLoggedInRate.length>0&&i.LoyalRate.length>0?Utils.Format("promo.aspx?hotelID={0}&lang={1}&hgID={2}&rate={3}&currID={4}",WsVars.HotelID,WsVars.LangCode,WsVars.HgID,i.LoyalRate,WsVars.CurrencyId):Utils.Format("promos.aspx?hotelID={0}&lang={1}&hgID={2}&currID={3}",WsVars.HotelID,WsVars.LangCode,WsVars.HgID,WsVars.CurrencyId):(t!=undefined&&t!=null&&t!=""&&$(".ws-button-delegauth-signinapi").length>0&&$("[id$=txLoginUsnHeaderFull]").length>0&&$("[id$=txLoginPwdHeaderFull]").length>0&&($("[id$=txLoginUsnHeaderFull]").val(n.eml),$("[id$=txLoginPwdHeaderFull]").val(n.password),$(".ws-button-delegauth-signinapi").click()),location.reload(!0)):$("[id$=txVerifyNumberHeaderFull]").length>0&&c_index_incaptcha.ReloadImage()},error:function(n){$("body").css({cursor:"auto"});WSEvents&&WSEvents.do_action("SignupProcessErrorHeaderFull",n);$("[id$=msgPaymentProcessBraintree]").html("");$("#MyHeading_buSignUp_WithBraintree").removeClass("ws-submitting ws-disabled")}}),!1)}function CheckForSignIn(n){WSEvents&&WSEvents.do_action("SignupValidateBegin",{});var t={hotelID:WsVars.HotelID,langID:WsVars.LangID,hgID:WsVars.HgID,fname:n?$("[id$=txFirstNameHeaderFull]").val():$("#txFirstName").val(),lname:n?$("[id$=txLastNameHeaderFull]").val():$("#txLastName").val(),eml:n?$("[id$=txEmailHeaderFull]").val():$("#txEmail").val()};return n?($("[id$=cbDobYYHeaderFull]").length>0&&(t.dobY=$("[id$=cbDobYYHeaderFull]").val()),$("[id$=cbDobMMHeaderFull]").length>0&&(t.dobM=$("[id$=cbDobMMHeaderFull]").val()),$("[id$=cbDobDDHeaderFull]").length>0&&(t.dobD=$("[id$=cbDobDDHeaderFull]").val())):($("#cbBirthYY").length>0&&(t.dobY=$("#cbBirthYY").val()),$("#cbBirthMM").length>0&&(t.dobM=$("#cbBirthMM").val()),$("#cbBirthDD").length>0&&(t.dobD=$("#cbBirthDD").val())),$("#buReserve").hasClass("ws-submitting")&&$.ajaxSetup({"async":!1}),$.ajax({type:"POST",url:"xml/setloyalty.aspx?verify=1",data:t,dataType:"json",success:function(n){var t,i;if(WSEvents&&WSEvents.do_action("SignupProcessOK",n),$("body").css({cursor:"auto"}),n.Msg.length>0&&$("#msgSignUp").html(n.Msg),n.Status=="1"){if(n.ProgramID==SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramEnum.Redlion||n.ProgramID==SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramEnum.Wynn)$("#MyHeading_sbLoyalSignIn").html(WsMulti.lbSignInMsgRL);else if(n.ProgramID>1&&$("#buWsDelegAuthLogin").length>0){$("#MyHeading_sbLoyalSignIn").html(WsMulti.lbSignInMsgRL);$("#fmUnivSignIn .ws-single-action").children().addClass("ws-hidden");$("#buUnivSignIn").length==0&&$("#fmUnivSignIn .ws-single-action").append('<div class="ws-buttons ws-returning-guest"><a id="buUnivSignIn" href="#" class="ws-button ws-primary"> Sign In <\/a><\/div>');$("#fmUnivSignIn .ws-single-action #buUnivSignIn").parent("div").removeClass("ws-hidden");$("#buUnivSignIn").on("click",function(){return $link=$("#buWsDelegAuthLogin:first"),$link[0].click(),!1})}else $("#MyHeading_sbLoyalSignIn").html(WsMulti.lbSignInMsgUniv),$("#MyHeading_paraLoyalSignInHeaderFull").html(WsMulti.lbSignInMsgUniv);$("#txUnivLoginUsn").val($("#txEmail").val());$("#txUnivLoginUsn,#txUnivLoginPwd").removeClass("ws-error-form");$("#msgUnivLogin").html("");$("#txUnivLoginPwd").val("");t="";n.ProgramID==SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramEnum.WindsurferGuest||n.ProgramID==SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramEnum.StellerCRM?(t="#ws-modal-loyalty-header-full",$("#MyHeading_txLoginUsnHeaderFull").val($("#txEmail").val())):n.ProgramID>1&&(t="#ws-modal-login");i=$("#buWsDelegAuthLogin").length>0?$("#buWsDelegAuthLogin").attr("data-auth"):"";i!=undefined&&i!=null&&i!=""&&$(".ws-delegauth-signin").length>0&&(t="",$(".ws-delegauth-signin").trigger("click"),$("[id$=msgLoginHeaderFull]").html(WsMulti.lbSignInMsgRL));t!=""&&$.magnificPopup.open({items:{src:t,type:"inline"},callbacks:{close:function(){return $("#MyHeading_paraLoyalSignInHeaderFull").html(WsMulti.lbSignInMsgUniv),$("#MyHeading_sbLoyalSignIn").html(WsMulti.lbSignInMsgUniv),$.magnificPopup.proto.close.call(this),!1}}});isNewGuest=!1}else n.Status=="0"?isNewGuest=!0:n.Status==-1&&(isNewGuest=!0)},error:function(n){return $("body").css({cursor:"auto"}),WSEvents&&WSEvents.do_action("SignupProcessError",n),!1}}),isNewGuest}function BypassAddressBarFocus(){$('a[href]:visible, button:visible, input[type="text"]:visible, input[type="checkbox"]:visible, select:visible').last().on("keydown",function(n){n.keyCode==9&&n.shiftKey==!1&&(n.preventDefault(),$("html, body").animate({scrollTop:0},500),$('a[href]:visible, button:visible, input[type="text"]:visible, input[type="checkbox"]:visible, select:visible').first().focus())});$('a[href]:visible, button:visible, input[type="text"]:visible, input[type="checkbox"]:visible, select:visible').first().on("keydown",function(n){var t=n.key==="Tab"||n.keyCode===9;t&&n.shiftKey&&(n.preventDefault(),$("html, body").animate({scrollBottom:0},500),$('a[href]:visible, button:visible, input[type="text"]:visible, input[type="checkbox"]:visible, select:visible').last().focus())})}function GetValidMoment(n){var t=!1,i=new moment;return!t&&WsVars.LangCode&&(i=new moment(n,Utils.GetDateFormat(WsVars.LangCode)),t=i.isValid()),!t&&moment(n).isValid()&&(t=!0,i=new moment(n)),n=n.replace(/[^0-9]/g,"-").replace(/--+/g,"-").replace(/^-+|-+$/g,""),!t&&moment(n,"MM-DD-YYYY").isValid()&&(t=!0,i=new moment(n,"MM-DD-YYYY")),!t&&moment(n,"DD-MM-YYYY").isValid()&&(t=!0,i=new moment(n,"DD-MM-YYYY")),!t&&moment(n,"M-DD-YYYY").isValid()&&(t=!0,i=new moment(n,"M-DD-YYYY")),!t&&moment(n,"DD-M-YYYY").isValid()&&(t=!0,i=new moment(n,"DD-M-YYYY")),!t&&moment(n,"M-D-YYYY").isValid()&&(t=!0,i=moment(n,"M-D-YYYY")),!t&&moment(n,"D-M-YYYY").isValid()&&(t=!0,i=new moment(n,"D-M-YYYY")),!t&&moment(n,"YYYY").isValid()&&(t=!0,i=new moment(n,"YYYY")),!t&&moment(n,"M-D-YY").isValid()&&(t=!0,i=new moment(n,"M-D-YY")),!t&&moment(n,"D-M-YY").isValid()&&(t=!0,i=new moment(n,"D-M-YY")),!t&&moment(n,"D").isValid()&&(t=!0,i=new moment(n,"D")),i}function GetDateFormatByLangID(n,t){var u=null,i=null,r,f;try{if(n!=null&&n!=""&&n!="undefined"&&t!=null&&t!="undefined"){if(r=n.replace(/[^0-9]/g,"-").replace(/--+/g,"-").replace(/^-+|-+$/g,""),WsVars.IBESkinVer=="3"){let t=new moment(n,Utils.GetDateFormat(WsVars.LangCode));t.isValid()&&(r=t.format("YYYY-MM-DD"))}return moment(r,"YYYY-MM-DD").isValid()?(r=r=GetValidMoment(n).format("YYYY-MM-DD"),f=new Date(r+"T00:00:00"),f!=null&&f!=""&&f!="undefined"&&(u=Utils.DateFormat(f,WsDtFm[t])),u!=null&&u!=""&&u!="undefined"?u:n):n}return i=new Date,i.setDate(i.getDate()),i}catch(e){return i=new Date,i.setDate(i.getDate()),i}}function handleTabs(n){var r=n.target,o=r.parentNode,u=o.parentNode,s=u.parentNode,t=0,f=0,i=u.querySelectorAll('[role="tab"]'),e=s.querySelectorAll('[role="tabpanel"]');for(let n=0;n<e.length;n++)e[n].setAttribute("tabindex",0);i.length>0&&i.forEach(function(n){n.id==r.id&&(t=f);f++});(n.keyCode===39||n.keyCode===37)&&(i[t].setAttribute("tabindex",-1),n.keyCode===39?(t++,t>=i.length&&(t=0)):n.keyCode===37&&(t--,t<0&&(t=i.length-1)),i[t].setAttribute("tabindex",0),i[t].focus())}function ShowImagesModalPopup(n,t,i){n.length>0?$(t).magnificPopup({items:{src:buildSwiper(n,i),type:"inline"},closeBtnInside:!1,fixedContentPos:!0,callbacks:{open:function(){$("html").css("overflow","hidden");this.wrap.attr("role","dialog").attr("aria-modal","true").attr("aria-label",i+" "+WsMulti.PhotoGallery).addClass("mfp-swiper");this.container.find(".mfp-content").attr("aria-label",i+" "+WsMulti.PhotoGallery);this.wrap.find(".mfp-close").attr("title",WsMulti.Close);this.wrap.find(".mfp-close").attr("aria-label",WsMulti.Close);this.wrap.find(".mfp-close").addClass("mfp-close-accessible");this.wrap.find(".mfp-close").html(WsMulti.Close+'<span aria-hidden="true"><\/span>');this.container.find(".mfp-content").attr("aria-live","polite");$("#ws-main").attr("aria-hidden","true");setTimeout(()=>ShowSwiper(i),100)},change:function(){setTimeout(()=>ShowSwiper(i),100)},close:function(){$("html").css("overflow","auto");$("#ws-main").removeAttr("aria-hidden")}}}).magnificPopup("open"):$(t).click(function(){return!1})}function buildSwiper(n,t){t===undefined&&(t="");var r='<div class="swiper-container">';for(n.length>1&&(r+='<div class="swiper-button-prev"><\/div>'),r+='<div class="swiper-wrapper">',i=0;i<n.length;i++){let u="",f="";n[i]!=null&&n[i]!=null&&(u=n[i].alt,f=n[i].title);n[i].type=="image"?r=t==""?n.length<2?r+Utils.Format('<div class="swiper-slide"><img src="{0}" class="coverme" alt="{1}" title="{2}"loading="lazy" /><div class="swiper-caption"><\/div><\/div>',n[i].src,u,f):r+Utils.Format('<div class="swiper-slide"><img src="{0}" class="coverme" alt="{3}" title="{4}" loading="lazy" /><div class="swiper-caption"><span class="swiper-pagination-current">{1}<\/span> / <span class="swiper-pagination-total">{2}<\/span><\/div><\/div>',n[i].src,i+1,n.length,u,f):n.length<2?r+Utils.Format('<div class="swiper-slide"><img src="{0}" class="coverme" alt="{2}" title="{3}" loading="lazy"/><div class="swiper-caption">{1}<\/div><\/div>',n[i].src,t,u,f):r+Utils.Format('<div class="swiper-slide"><img src="{0}" class="coverme" alt="{4}" title="{5}" loading="lazy" /><div class="swiper-caption">{1} | <span class="swiper-pagination-current">{2}<\/span> / <span class="swiper-pagination-total">{3}<\/span><\/div><\/div>',n[i].src,t,i+1,n.length,u,f):n[i].type=="iframe"&&(r=r+Utils.Format('<div class="swiper-slide"><div class="mfp-iframe-scaler"><iframe src="{0}" frameborder="0" allowfullscreen><\/iframe><\/div><\/div>',n[i].src))}return r+="<\/div>",n.length>1&&(r+='<div class="swiper-pagination"><\/div>',r+='<div class="swiper-button-next"><\/div>'),r+="<\/div >"}function ShowSwiper(n){function r(){$(".swiper-container").each(function(n,t){if(!($(t).find(".swiper-slide").length<2)){var i=$(this);i.addClass("instance-"+n);window["swiper-"+n]=new Swiper(".instance-"+n,{direction:"horizontal",autoHeight:!0,grabCursor:!0,pagination:{el:".swiper-pagination",type:"fraction"},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},a11y:{enabled:!0,prevSlideMessage:"Previous slide",nextSlideMessage:"Next slide"},keyboard:{enabled:!0,onlyInViewport:!0,pageUpDown:!1}});i.init()}})}function i(){if($(".swiper-slide").length>=2||t>=u){r();return}t++;setTimeout(i,f)}n===undefined&&(n="");let t=0;const u=5,f=200;i()}function GetLoyaltyPoints(n,t,i){var r,u,f;WSMAIN.IsLoggedIn()&&(Number(SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramConfig2)&SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramConfig2Enum.SuppLoyaltyPoints)>0&&WsVars.EnablePayByPoints=="1"&&(r="",$("#inPaygateOption").length>0&&(r=$("#inPaygateOption").val()),u={hotelID:WsVars.HotelID,langID:WsVars.LangID,currID:WsVars.CurrencyId,hgID:WsVars.HgID,IsPointsChange:n,CurrentPoints:t,PayOpt:r,Ix:i},f="xml/GetLoyaltyPoints.aspx",$.ajax({type:"POST",url:f,data:u,dataType:"json","async":!1,success:function(n){var r,v,t,f,a;if(n!=null&&n.Amount>0&&n.Points>0){if(n.CartJson!==null&&(r=jQuery.parseJSON(n.CartJson),v=WSMAIN,WSMAIN.CartID=r.CartID,WSMAIN.LName=r.LName,WSMAIN.Dt1=r.Dt1,WSMAIN.Nights=r.Nights,WSMAIN.Rooms=r.Rooms,WSMAIN.Adults=r.Adults,WSMAIN.Child1=r.Child1,WSMAIN.Child2=r.Child2,WSMAIN.Child3=r.Child3,WSMAIN.Child4=r.Child4,WSMAIN.Iata=r.Iata,WSMAIN.Promo=r.Promo,WSMAIN.Group=r.Group,WSMAIN.Iata=r.Iata,WSMAIN.Items=r.Items,r.LoyaltyAmount>0&&r.LoyaltyPoints>0&&(WSMAIN.LoyaltyAmount=r.LoyaltyAmount,WSMAIN.LoyaltyPoints=r.LoyaltyPoints),r.Items!=null&&r.Items.length>0)){for(t=0;t<r.Items.length;t++)if(t!=i&&i>0)continue;else if(i<0||t==i){var u=0,e=0,o=0,s=0,h=0,c=0,l=0;if(r.Items[t].LoyaltyPointsInfo!=null){if(r.Items[t].LoyaltyPointsInfo.LoyaltyRedeemAmount>0&&(u=r.Items[t].LoyaltyPointsInfo.LoyaltyRedeemAmount),r.Items[t].LoyaltyPointsInfo.LoyaltyRedeemPoints>0&&(e=r.Items[t].LoyaltyPointsInfo.LoyaltyRedeemPoints),r.Items[t].LoyaltyPointsInfo.RemainingAmount>0&&(o=r.Items[t].LoyaltyPointsInfo.RemainingAmount),r.Items[t].LoyaltyPointsInfo.EquivalentRemainingAmount>0&&(c=r.Items[t].LoyaltyPointsInfo.EquivalentRemainingAmount),r.Items[t].LoyaltyPointsInfo.MaxLoyaltyRedeemPoints>0&&(s=r.Items[t].LoyaltyPointsInfo.MaxLoyaltyRedeemPoints),r.Items[t].LoyaltyPointsInfo.MaxLoyaltyRedeemAmount>0&&(h=r.Items[t].LoyaltyPointsInfo.MaxLoyaltyRedeemAmount),r.Items[t].LoyaltyPointsInfo.DepositAmount>0&&(l=r.Items[t].LoyaltyPointsInfo.DepositAmount),r.Items[t].Svcs!=null&&r.Items[t].Svcs.length>0)for(f=0;f<r.Items[t].Svcs.length;f++)r.Items[t].Svcs[f].LoyaltyPointsInfo!=null&&(r.Items[t].Svcs[f].LoyaltyPointsInfo.LoyaltyRedeemAmount>0&&(u+=r.Items[t].Svcs[f].LoyaltyPointsInfo.LoyaltyRedeemAmount),r.Items[t].Svcs[f].LoyaltyPointsInfo.LoyaltyRedeemPoints>0&&(e+=r.Items[t].Svcs[f].LoyaltyPointsInfo.LoyaltyRedeemPoints));$("#txtLpTotalDetailRemainingAmt_"+t).attr("curr",WsVars.Currency);$("#txtLpTotalDetailRemainingAmt_"+t).html(Utils.GetAmount(o/100,WsVars.Currency,WsVars.UseCurrCode));$("#txtLpTotalDetailRemainingAmt_"+t).attr("ref",Utils.ToNumberFormat(o/100,WsVars.Currency));WsVars.EnableFractionalCredits=="1"?($("#txtLpTotalDetailRedeemAmt_"+t).attr("curr",WsVars.Currency),$("#txtLpTotalDetailRedeemAmt_"+t).html(Utils.GetAmount(u/100,WsVars.Currency,WsVars.UseCurrCode)),$("#txtLpTotalDetailRedeemAmt_"+t).attr("ref",Utils.ToNumberFormat(u/100,WsVars.Currency)),$("#myRange_"+t).attr({max:Utils.ToNumberFormat(h,WsVars.Currency)}),$("#myRange_"+t).val(parseFloat(u)),$("#myRange_"+t).attr({curr:WsVars.Currency}),$("#txtRangePoints_"+t).attr({max:Utils.ToNumberFormat(h/100,WsVars.Currency)}),$("#txtRangePoints_"+t).val(Utils.ToNumberFormat(u/100,WsVars.Currency)),$("#txtRangePoints_"+t).attr({ref:Utils.ToNumberFormat(u/100,WsVars.Currency)}),$("#txtRangePoints_"+t).attr({curr:WsVars.Currency})):($("#txtLpTotalDetailRedeemAmt_"+t).attr("curr",WsVars.Currency),$("#txtLpTotalDetailRedeemAmt_"+t).html(Utils.GetAmount(u/100,WsVars.Currency,WsVars.UseCurrCode)),$("#txtLpTotalDetailRedeemAmt_"+t).attr("ref",Utils.ToNumberFormat(u/100,WsVars.Currency)),$("#myRange_"+t).attr({max:parseInt(s)}),$("#txtRangePoints_"+t).attr({max:parseInt(s)}),$("#myRange_"+t).val(parseInt(Math.round(e))),$("#txtRangePoints_"+t).val(parseInt(Math.round(e))));$("#lbEquivalentAmountValue_"+t).attr("curr",WsVars.Currency);$("#lbEquivalentAmountValue_"+t).html(Utils.GetAmount(c/100,WsVars.Currency,WsVars.UseCurrCode));$("#lbEquivalentAmountValue_"+t).attr("ref",Utils.ToNumberFormat(c/100,WsVars.Currency));$("#tdDeposit_"+t).length>0&&($("#trDepositRemain_"+t).length>0&&$("#trDepositRemain_"+t).hide(),$("#tdDeposit_"+t).attr("curr",WsVars.Currency),$("#tdDeposit_"+t).html(Utils.GetAmount(l/100,WsVars.Currency,WsVars.UseCurrCode)),$("#tdDeposit_"+t).attr("ref",Utils.ToNumberFormat(l/100,WsVars.Currency)))}}try{window.wsFreedompay!=undefined&&window.wsFreedompay.Enabled()&&window.wsFreedompay.Events!=undefined&&window.wsFreedompay.Events.DocReady()}catch(y){console.log(y)}}WsVars.EnableFractionalCredits=="1"?($("#txtRemainingPoints").attr("curr",WsVars.Currency),$("#txtRemainingPoints").html(Utils.ToNumberFormat(n.RemainingAmount/100,WsVars.Currency)),$("#txtRemainingPoints").attr("ref",Utils.ToNumberFormat(n.RemainingAmount/100,WsVars.Currency))):$("#txtRemainingPoints").html(Utils.ToNumberFormat(n.RemainingPoints,WsVars.Currency));$("#txSumReedemPointAmt").attr("curr",WsVars.Currency);$("#txSumReedemPointAmt").html(Utils.GetAmount(n.RedeemAmount,WsVars.Currency,WsVars.UseCurrCode));$("#txSumReedemPointAmt").attr("ref",Utils.ToNumberFormat(n.RedeemAmount,WsVars.Currency));$("#txSumRemainingAmt").attr("curr",WsVars.Currency);$("#txSumRemainingAmt").html(Utils.GetAmount(n.SummaryRemainingAmount,WsVars.Currency,WsVars.UseCurrCode));$("#txSumRemainingAmt").attr("ref",n.SummaryRemainingAmount);$("#txDeposit").length>0&&($("#txDeposit").attr("curr",WsVars.Currency),$("#txDeposit").html(Utils.GetAmount(n.SummaryDepositAmount,WsVars.Currency,WsVars.UseCurrCode)),$("#txDeposit").attr("ref",Utils.ToNumberFormat(n.SummaryDepositAmount,WsVars.Currency)));$("input:radio[name='rblPayFullPrePayment']").length>0&&(a=$("input:radio[name='rblPayFullPrePayment']:checked").val(),WSMAIN.GetDepositByPayOpt(a));typeof WsShowRates!="undefined"&&WsShowRates();(WsVars.IsPaymentGateway==="1"||WsVars.GuestLoyalty!=""||$("#MyHeading_buMember").length>0)&&ShowBaseOrSelectedCurrencyPrices()}else $("#divslidecontainer").hide()},error:function(){$("#divslidecontainer").hide()}}))}function AllowToDecimal(n,t){var i=n.value;n.value=i.indexOf(".")>=0?i.substr(0,i.indexOf("."))+i.substr(i.indexOf("."),t+1):i}function IsEmpty(n){return typeof n=="undefined"||n.length<=0||n==""||isNaN(n)||n<0?!0:!1}function UpdateUrlParams(n){var i,r,f,t,u;if(typeof history!="undefined"&&typeof history.pushState!="undefined")if(typeof URLSearchParams!="undefined"){if(i=new URLSearchParams(window.location.search),i!=undefined){if(r=null,i.forEach(function(t,u){r=GetWsVarValue(u,t);var f=GetAddParams(n,u);typeof f!="undefined"&&f!=null?i.delete(u):r!=null&&r!=""?i.set(u,r):i.delete(u)}),typeof n!="undefined"&&n!=null)for(t in n){if(u=n[t],u==null){i.delete(t);continue}i.set(t,u)}history.pushState({},"","?"+i.toString().replace(/%2F/g,"/").replaceAll("%2C",",").replaceAll("%7C","|"))}}else{var e=location,s=e.search.substring(1).split("&"),o=[];if(typeof history!="undefined"&&typeof history.replaceState!="undefined"){for(f=0;f<s.length;f++){var h=s[f].split("="),t=h[0],u=h[1],r=GetWsVarValue(t,u),c=GetAddParams(n,t);(typeof c=="undefined"||c==null)&&r!=null&&r!=""&&o.push(t+"="+r)}if(typeof n!="undefined"&&n!=null)for(t in n)(u=n[t],u!=null)&&o.push(t+"="+u);history.pushState({},"",e.origin+e.pathname+"?"+o.join("&"))}}return $.ajax({type:"POST",url:"xml/SetCurrentUrl.aspx",data:{currentUrl:window.location.pathname+window.location.search},"async":!0,dataType:"json",success:function(n){return n.Status!=null&&n.Status.length>0?n.Status:""},error:function(){$("body").css({cursor:"auto"})}})}function GetWsVarValue(n,t){var i=null,r,u;(typeof t=="undefined"||t==null)&&(t="");switch(n.toLowerCase()){case"checkin":r=typeof WsVars.DayIn!="undefined"&&WsVars.DayIn!=""?Utils.GetDate(WsVars.DayIn,WsDtFm[WsVars.LangID]):t;i=typeof WsVars.DayIn!="undefined"&&WsVars.DayIn!=""?Utils.DateFormat(r,WsDtFm[Number(WsVars.LangID)]):t;break;case"checkout":u=typeof WsVars.DayOut!="undefined"&&WsVars.DayOut!=""?Utils.GetDate(WsVars.DayOut,WsDtFm[WsVars.LangID]):t;i=typeof WsVars.DayOut!="undefined"&&WsVars.DayOut!=""?Utils.DateFormat(u,WsDtFm[Number(WsVars.LangID)]):t;break;case"adults":i=typeof WsVars.Adults!="undefined"?WsVars.Adults:t;break;case"rooms":i=typeof WsVars.Rooms!="undefined"?WsVars.Rooms:t;break;case"children":i=typeof WsVars.Child1!="undefined"?WsVars.Child1:t;break;case"child1":i=typeof WsVars.Child1!="undefined"?WsVars.Child1:t;break;case"child2":i=typeof WsVars.Child2!="undefined"?WsVars.Child2:t;break;case"child3":i=typeof WsVars.Child3!="undefined"?WsVars.Child3:t;break;case"child4":i=typeof WsVars.Child4!="undefined"?WsVars.Child4:t;break;case"nights":i=typeof WSMAIN!="undefined"&&WSMAIN.Nights!="undefined"?WSMAIN.Nights:WsVars.Nights!="undefined"?WsVars.Nights:t;break;case"promo":i=typeof WSMORE!="undefined"&&WSMORE.Promo!="undefined"&&WSMORE.Promo.length>0?WSMORE.Promo:t;break;case"iata":i=typeof WSMORE!="undefined"&&WSMORE.Iata!="undefined"&&WSMORE.Iata.length>0?WSMORE.Iata:t;break;case"group":i=typeof WSMORE!="undefined"&&WSMORE.Group!="undefined"&&WSMORE.Group.length>0?WSMORE.Group:typeof WsVars.GroupCode!="undefined"?WsVars.GroupCode:t;break;case"currid":i=typeof WsVars.CurrencyId!="undefined"?WsVars.CurrencyId:t;break;case"selectedpackage":case"selectedrate":case"selectedgroup":i=null;break;default:i=t}return i}function GetAddParams(n,t){var u=null,i,r;if(typeof n!="undefined"&&n!=null)for(i in n)typeof i!="undefined"&&i.toLowerCase()==t.toLowerCase()&&(r=n[i],typeof r!="undefined"&&r!=null&&(u=[],u[i]=r));return u}function setSearchCriteria(n,t){var i="";return n!=""&&(i=n.Page),$.ajax({type:"POST",url:"xml/setSearchCriteria.aspx?refer="+i,data:t,dataType:"json"})}function GetAdyenV2PaymentMethod(n){var i,t,r;if(WsVars.CurrencyId==900)return!1;HideAllOtherPayMethods(!1,!0);WsVars.IsAdyenV2=="1"&&($("#fieldcreditcard").addClass("wsPayByOtherMethods"),i="xml/getpaygate.aspx?adyenV2PaymentMethod=1",t=$("#cbCountry").val(),$("#chkBillDiff").length>0&&$("#chkBillDiff").prop("checked")==!0&&(t=$("#cbBillCountry").val()),r={hotelID:WsVars.HotelID,chainID:WsVars.ChainID,channelID:WsVars.Chan,resAmount:WsVars.RoomTotal,countryCode:t,currencyCode:WsVars.Currency,locale:WsVars.LangCode},$.ajax({type:"POST",url:i,data:r,dataType:"json","async":!1,success:function(t){if(t!=undefined&&t!=null&&t.paymentOptionslst!=undefined&&t.paymentOptionslst!=null){var i=jQuery.parseJSON(t.paymentOptionslst);i!=undefined&&i!=null&&i.PaymentMethods!=undefined&&i.PaymentMethods!=null&&i.PaymentMethods.length>0&&(WsPaymentOptions=i,BuildWsPaymentMethods(i,n))}else HideAllOtherPayMethods(!1,!0)},error:function(){HideAllOtherPayMethods(!1,!0)}}))}function BuildWsPaymentMethods(n,t,i){var et,h,a,r,v,f,y,d,g,rt;if(WsVars.CurrencyId==900)return!1;var p=!1,w=!1,b=!1,k=!1,o=!1,ut=!1,ft=!1,nt=!1,tt=!1;if(n!=undefined&&n!=null&&n.PaymentMethods!=undefined&&n.PaymentMethods!=null&&n.PaymentMethods.length>0)for(showOrHideDvSection($("#dvPayByOtherMethods"),!0),r=0;r<n.PaymentMethods.length;r++)if(n.PaymentMethods[r].ID=="scheme")HideAllOtherPayMethods(!1,!1),showOrHideDvSection($("#dvPayByOtherMethods"),!0),$("#rbCreditCard").val(n.PaymentMethods[r].ID),$("#rbCreditCard").prop("checked",!0),$("#divCreditcard").attr("data-order",n.PaymentMethods[r].DisplayOrder),$("#divCCPayment").attr("data-order",n.PaymentMethods[r].DisplayOrder);else if(n.PaymentMethods[r].ID=="eps"){if(showOrHideDvSection($("#divEPS"),!0),et=$("#ddlEPSItemsList"),n.PaymentMethods[r].Items!=undefined&&n.PaymentMethods[r].Items!=null&&n.PaymentMethods[r].Items.length>0)for(h=0;h<n.PaymentMethods[r].Items.length;h++)et.append($("<option><\/option>").val(n.PaymentMethods[r].Items[h].Id).html(n.PaymentMethods[r].Items[h].Name));$("#divEPS").attr("data-order",n.PaymentMethods[r].DisplayOrder)}else n.PaymentMethods[r].ID=="swish"?(SetTextValueAttrPayMethod($("#WsPaymentMethod_lblSwish"),n.PaymentMethods[r].Label,$("#WsPaymentMethod_rbSwish"),n.PaymentMethods[r].ID,$("#divSwish"),n.PaymentMethods[r].DisplayOrder),p=!0):n.PaymentMethods[r].ID=="klarna"?(SetTextValueAttrPayMethod($("#WsPaymentMethod_lblKlarna"),n.PaymentMethods[r].Label,$("#WsPaymentMethod_rbklarna"),n.PaymentMethods[r].ID,$("#divklarna"),n.PaymentMethods[r].DisplayOrder),w=!0):n.PaymentMethods[r].ID=="klarna_account"?(SetTextValueAttrPayMethod($("#WsPaymentMethod_lblKlarna_Account"),n.PaymentMethods[r].Label,$("#WsPaymentMethod_rbklarna_account"),n.PaymentMethods[r].ID,$("#divklarna_account"),n.PaymentMethods[r].DisplayOrder),b=!0):n.PaymentMethods[r].ID=="googlepay"&&n.PaymentMethods[r].Configurations!=null?(SetTextValueAttrPayMethod($("#WsPaymentMethod_lblGooglePay"),n.PaymentMethods[r].Label,$("#WsPaymentMethod_rbGooglePay"),n.PaymentMethods[r].ID,$("#divGooglePay"),n.PaymentMethods[r].DisplayOrder),ut=!0,(WsVars.Step=="3"||WsVars.Step=="4")&&InitializeWalletPay("googlepay")):n.PaymentMethods[r].ID=="klarna_paynow"?(SetTextValueAttrPayMethod($("#WsPaymentMethod_lblKlarna_Paynow"),n.PaymentMethods[r].Label,$("#WsPaymentMethod_rbklarna_paynow"),n.PaymentMethods[r].ID,$("#divklarna_paynow"),n.PaymentMethods[r].DisplayOrder),k=!0):n.PaymentMethods[r].ID=="giftcard"?(SetTextValueAttrPayMethod($("#WsPaymentMethod_lblGiftCard"),n.PaymentMethods[r].Label,$("#WsPaymentMethod_rbGiftCard"),n.PaymentMethods[r].ID,$("#divGiftCard"),n.PaymentMethods[r].DisplayOrder),$("#hdGiftCardBrand").val(n.PaymentMethods[r].Label),o=!0):n.PaymentMethods[r].ID=="applepay"&&n.PaymentMethods[r].Configurations!=null?(SetTextValueAttrPayMethod($("#WsPaymentMethod_lblApplePay"),n.PaymentMethods[r].Label,$("#WsPaymentMethod_rbApplePay"),n.PaymentMethods[r].ID,$("#divApplePay"),n.PaymentMethods[r].DisplayOrder),ft=!0,(WsVars.Step=="3"||WsVars.Step=="4")&&InitializeWalletPay("applepay")):n.PaymentMethods[r].ID=="alipay"?(SetTextValueAttrPayMethod($("#WsPaymentMethod_lblAlipay"),n.PaymentMethods[r].Label,$("#WsPaymentMethod_rbAlipay"),n.PaymentMethods[r].ID,$("#divAlipay"),n.PaymentMethods[r].DisplayOrder),nt=!0):n.PaymentMethods[r].ID=="wechatpayweb"&&(SetTextValueAttrPayMethod($("#WsPaymentMethod_lblwechat"),n.PaymentMethods[r].Label,$("#WsPaymentMethod_rbwechat"),n.PaymentMethods[r].ID,$("#divwechat"),n.PaymentMethods[r].DisplayOrder),tt=!0);else HideAllOtherPayMethods(!1,!0);var c=!1,s=!1,u="",it=!1,l=!1,e="";if($("#dvPayFullPrePayment").is(":visible")&&$("input:radio[name='rblPayFullPrePayment']").length>0&&(e=$("input:radio[name='rblPayFullPrePayment']:checked").val()),t!=undefined&&t!=null&&t.length>0){for(a=WSMAIN.CheckPolicy(t),(a=="PP"||a=="DX"||e=="OptFullPrePayment"||e=="PayDeposit")&&(l=!0),e!="OptFullPrePayment"&&(a=="GX"?c=!0:a=="XX"&&(s=!0)),r=0;r<t.length;r++)t[r].PaymentMethodType!=undefined&&t[r].PaymentMethodType!=""&&(u=t[r].PaymentMethodType),t[r].HasCC&&(it=t[r].HasCC),i!=undefined&&i||(i=t[r].IsDepositAllowedToPayLater);if(WSMAIN.newGuarPl!=undefined&&WSMAIN.newGuarPl!=""&&((WSMAIN.newGuarPl==="DX"||WSMAIN.newGuarPl==="PP")&&(l=!0),WSMAIN.newGuarPl==="GX"?c=!0:WSMAIN.newGuarPl=="XX"&&(s=!0)),i&&l&&(ft=ut=o=k=b=w=p=!1),l&&(showOrHideDvSection($("#dvPayByOtherMethods"),!0),showOrHideDvSection($("#divSwish"),p),showOrHideDvSection($("#divklarna"),w),showOrHideDvSection($("#divklarna_account"),b),showOrHideDvSection($("#divklarna_paynow"),k),showOrHideDvSection($("#divGiftCard"),o),showOrHideDvSection($("#divAlipay"),nt),showOrHideDvSection($("#divwechat"),tt)),e!="OptFullPrePayment"&&(v=WsVars.HideCCSection==1&&s&&!it,c?(HideAllOtherPayMethods(v,v),e=="PayAtHotel"&&$("#divPayAtHotelMessage").html(WsMulti.PayAtHotelMessageForPolicyGX),showOrHideDvSection($("#dvPayByOtherMethods"),!0)):s&&(e=="PayAtHotel"&&$("#divPayAtHotelMessage").html(WsMulti.PayAtHotelMessageForPolicyXX),HideAllOtherPayMethods(v,v))),showOrHideDvSection($("#dvPayAtHotelMsg"),e=="PayAtHotel"&&(c||s)),showOrHideDvSection($("#divPayAtHotelMessage"),e=="PayAtHotel"&&(c||s)),u!="")if(u.toLowerCase()=="none"||u.toLowerCase()=="card")u.toLowerCase()=="none"&&it==!1&&l&&(WSMAIN.payOption==""||WSMAIN.payOption=="OptFullPrePayment")&&e!="PayAtHotel"?(HideAllOtherPayMethods(!1,!1),showOrHideDvSection($("#dvPayByOtherMethods"),!0),f=$("input:radio[name='rdPayMethodType']"),f!=undefined&&f!=null&&f.length>0&&($("#inPayByMethodType").val(u.toLowerCase()),$("#cbCountry").attr("disabled","disabled"),(u.toLowerCase()=="klarna"||u.toLowerCase()=="klarna_account"||u.toLowerCase()=="klarna_paynow")&&($("#txAddress1").attr("disabled","disabled"),$("#txAddress2").attr("disabled","disabled"),$("#txCity").attr("disabled","disabled"),$("#txPhone").attr("disabled","disabled"),$("#txZip").attr("disabled","disabled")),showOrHideDvSection($("#divSwish"),p),showOrHideDvSection($("#divklarna"),w),showOrHideDvSection($("#divklarna_account"),b),showOrHideDvSection($("#divklarna_paynow"),k),WSMAIN.newGuarPl!=undefined&&WSMAIN.newGuarPl!=""&&(WSMAIN.newGuarPl==="XX"||WSMAIN.newGuarPl==="GX")&&(o=!1),showOrHideDvSection($("#divGiftCard"),o),showOrHideDvSection($("#dvGiftCardNumber"),o),showOrHideDvSection($("#dvGiftCardCvc"),o),showOrHideDvSection($("#divAlipay"),nt),showOrHideDvSection($("#divwechat"),tt),$("#rbCreditCard").prop("checked",!0))):HideAllOtherPayMethods(!1,!1);else if((u.toLowerCase()=="swish"||u.toLowerCase()=="klarna"||u.toLowerCase()=="klarna_account"||u.toLowerCase()=="klarna_paynow"||u.toLowerCase()=="giftcard"||u.toLowerCase()=="googlepay"||u.toLowerCase()=="applepay"||u.toLowerCase()=="alipay"||u.toLowerCase()=="wechatpayweb")&&(f=$("input:radio[name='WsPaymentMethod$rdPayMethodType']"),HideAllOtherPayMethods(!0,!0),showOrHideDvSection($("#dvPayByOtherMethods"),!0),f!=undefined&&f!=null&&f.length>0))for(y=0;y<f.length;y++)if(f[y].value.toLowerCase()==u.toLowerCase()){$("#inPayByMethodType").val(u.toLowerCase());f[y].checked=!0;$("#cbCountry").attr("disabled","disabled");(u.toLowerCase()=="klarna"||u.toLowerCase()=="klarna_account"||u.toLowerCase()=="klarna_paynow")&&($("#txAddress1").attr("disabled","disabled"),$("#txAddress2").attr("disabled","disabled"),$("#txCity").attr("disabled","disabled"),$("#txPhone").attr("disabled","disabled"),$("#txZip").attr("disabled","disabled"));u.toLowerCase()=="swish"&&showOrHideDvSection($("#divSwish"),!0);(u.toLowerCase()=="googlepay"||u.toLowerCase()=="applepay")&&InitializeWalletPay(u.toLowerCase());u.toLowerCase()=="klarna"&&showOrHideDvSection($("#divklarna"),!0);u.toLowerCase()=="klarna_account"&&showOrHideDvSection($("#divklarna_account"),!0);u.toLowerCase()=="klarna_paynow"&&showOrHideDvSection($("#divklarna_paynow"),!0);u.toLowerCase()=="giftcard"&&(showOrHideDvSection($("#divGiftCard"),!0),showOrHideDvSection($("#dvGiftCardNumber"),!0),showOrHideDvSection($("#dvGiftCardCvc"),!0));u.toLowerCase()=="alipay"&&showOrHideDvSection($("#divAlipay"),!0);u.toLowerCase()=="wechatpayweb"&&showOrHideDvSection($("#divwechat"),!0);break}}d=[];$(".wsPaymentMethods").length>0&&(d=$(".wsPaymentMethods").each(function(){var n=Number($(this).attr("data-order"));$(this).data("data-order",n)}),d.length>0&&d.each(function(){g=$(this);(WSMAIN.newGuarPl==undefined||u!=""&&u!=undefined&&u.toLowerCase()=="cash"&&WSMAIN.newGuarPl!=undefined&&WSMAIN.newGuarPl!=""&&(WSMAIN.newGuarPl==="DX"||WSMAIN.newGuarPl==="PP"))&&(this.id=="divCreditcard"||this.id=="divCCPayment")&&$("#"+this.id).insertBefore($("#dvPayByOtherMethods #divEPS"));g.siblings().each(function(){return rt=$(this),g.data("data-order")<rt.data("data-order")?(g.insertBefore(rt),!1):void 0})}))}function HideAllOtherPayMethods(n,t){$("#dvPayByOtherMethods").length>0&&(showOrHideDvSection($("#dvPayByOtherMethods"),!(WsVars.HideCCSection==1)),showOrHideDvSection($("#divEPS"),!1),showOrHideDvSection($("#divSwish"),!1),showOrHideDvSection($("#divklarna"),!1),showOrHideDvSection($("#divklarna_account"),!1),showOrHideDvSection($("#divklarna_paynow"),!1),showOrHideDvSection($("#divGiftCard"),!1),showOrHideDvSection($("#dvGiftCardNumber"),!1),showOrHideDvSection($("#dvGiftCardCvc"),!1),showOrHideDvSection($("#divAlipay"),!1),showOrHideDvSection($("#divwechat"),!1));hideCPayMethod(n);t?(showOrHideDvSection($("#dvCCPayMethodType"),!1),showOrHideDvSection($("#rbCreditCard"),!1),showOrHideDvSection($("#lblCreditCard"),!1)):(showOrHideDvSection($("#dvCCPayMethodType"),!0),showOrHideDvSection($("#rbCreditCard"),!0),showOrHideDvSection($("#lblCreditCard"),!0));$("#btnCreditCard").length>0&&$("#btnCreditCard").hide()}function showOrHideDvSection(n,t){n!=undefined&&n!=null&&n.length>0&&(t?n.removeClass("hide").show():n.addClass("hide").hide())}function ShowQrCodeModal(n,t){if(WsVars.IsAdyenV2=="1"){$("#btnPaymentComplete").hide();var i={QrCode:n};$.ajax({type:"POST",url:"xml/getpaygate.aspx?adyenV2PaymentMethod=1",data:i,dataType:"json",success:function(n){var r,i;n!=undefined&&n!=null&&(n.ImgSwish!=undefined&&n.ImgSwish!=null&&(r=jQuery.parseJSON(n.ImgSwish),$("#dvPayMethodTypeImage").html("<img src="+r.ImageUrl+" width='25%' height='25%' loading='lazy'>")),n.ImgQrCode!=undefined&&n.ImgQrCode!=null&&(r=jQuery.parseJSON(n.ImgQrCode),$("#dvPayMethodQRImage").html("<img src="+r.ImageUrl+" width='100%' height='70%' loading='lazy'>")),i=n.PaymentCompleteTimeout,i=i==undefined||i==null||i==""?3e4:Number(i),setTimeout(function(){$("#btnPaymentComplete").show()},i),$.magnificPopup.open({items:{src:$("#pcPayQrCodeModal")},type:"inline",modal:!0,showCloseBtn:!1,closeBtnInside:!0,callbacks:{close:function(){return GateNotifRemoveByMerchantRef(t),clearInterval(cntr),WsVars.IsAdyenV2=="1"&&$("#buReserve_Paygate,#buReserve2_Paygate").length>0&&$("#buReserve_Paygate,#buReserve2_Paygate").hasClass("ws-submitting")&&($("#buReserve_Paygate,#buReserve2_Paygate").removeClass("ws-submitting"),$(".ws-reserve-button").removeClass("ws-disabled")),$("#dvMessage").is(":visible")&&($("#dvMessage").removeClass("ws-messages ws-msg-errorPaygate ws-collapsible ws-show-this"),$("#dvMessage").html("")),$.magnificPopup.proto.close.call(this),!1}}}),cntr=setInterval(GetPaymentStatus,4e3,t))},error:function(){}})}}function GetPaymentStatus(n){if(WsVars.IsAdyenV2=="1"){var t={merchantRef:n,hotelID:WsVars.HotelID};$.ajax({type:"POST",url:"xml/getpaygate.aspx?adyenV2PaymentMethod=1",data:t,dataType:"json",success:function(t){t!=undefined&&t!=null&&t.status!=undefined&&t.status!=null&&t.status==="True"&&(clearInterval(cntr),location.href=n+"&redirectResult=1")},error:function(){}})}}function GateNotifRemoveByMerchantRef(n){if(WsVars.IsAdyenV2=="1"){let u="",r="";const f=n.split("?");if(f.forEach(n=>{const[t,i]=n.split("=");t==="PGSnglRefId"&&(r=decodeURIComponent(i))}),r!=null){let n=atob(r);if(n!=null){let t=n.split(".");t.length>2&&(u=t[3])}}var t="xml/getpaygate.aspx?adyenV2PaymentMethod=1",i={mRef:u,hotelID:WsVars.HotelID};$.ajax({type:"POST",url:t,data:i,dataType:"json",success:function(n){n!=undefined&&n!=null&&n.status!=undefined&&n.status!=null&&console.log("GateNotifRemoveByMerchantRef , status=",n.status)},error:function(){}})}}function CheckPassword(n,t){var i=null;return t==12?(i=new RegExp("(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.{8,})"),i.test(n)?!1:!0):t==21?(i=new RegExp("^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?!.*(.)\\1{2})(?=.{8,})"),i.test(n)?!1:!0):void 0}function CheckAge(n){var t=n.split("-"),i=new Date,e=t[0],r=t[1],o=t[2],s=i.getDate(),u=i.getMonth()+1,h=i.getFullYear(),f=h-o;return(u<r||u===r&&s<e)&&f--,f}function hideCPayMethod(n){n?(showOrHideDvSection($("#fieldcreditcard"),!1),showOrHideDvSection($("#divCreditcard"),!1),showOrHideDvSection($("#divCreditcardItem"),!1)):(showOrHideDvSection($("#fieldcreditcard"),!0),showOrHideDvSection($("#divCreditcard"),!0),showOrHideDvSection($("#divCreditcardItem"),!0))}function SetCallendarConfig(){WsVars.CalendarSettings!="1"||$("#ws-calendar").hasClass("ws-show-this")?$("#ws-calendar").removeClass("ws-show-this"):($("#ws-calendar").addClass("ws-show-this"),$("#ws-calendar").removeClass("ws-hide-action"),$("#WsBgModal").addClass("ws-show-this"))}function RedirectToCheckoutPage(n){$("body").css({cursor:"wait"});$.ajax({type:"POST",url:"xml/setcart.aspx",data:n,dataType:"json",success:function(n){if($("body").css({cursor:"auto"}),n.Msg!=null&&n.Msg.length>0&&WsVars.CurrencyId=="900"&&(Number(SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramConfig2)&SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramConfig2Enum.SuppLoyaltyPoints)>0&&WSMAIN.IsLoggedIn()&&WsVars.EnablePayByPoints=="1")return WSMAIN.Alert(n.Msg),!1;location.href=WsVars.EnableReduceClicks=="True"?Utils.Format("combocheckout.aspx?hotelID={0}&lang={1}&hgID={2}&currID={3}",WsVars.HotelID,WsVars.LangCode,WsVars.HgID,WsVars.CurrencyId):Utils.Format("checkout.aspx?hotelID={0}&lang={1}&hgID={2}&currID={3}",WsVars.HotelID,WsVars.LangCode,WsVars.HgID,WsVars.CurrencyId)},error:function(){$("body").css({cursor:"auto"})}})}function RedirectToCartPageFromCartModal(){location.href=Utils.Format("cart.aspx?hotelID={0}&lang={1}&hgID={2}&currID={3}",WsVars.HotelID,WsVars.LangCode,WsVars.HgID,WsVars.CurrencyId)}function RedirectToCartPage(n){$("body").css({cursor:"wait"});$.ajax({type:"POST",url:"xml/additem.aspx",data:n,dataType:"json",success:function(n){if($("body").css({cursor:"auto"}),n.Msg!=null&&n.Msg.length>0){n.Msg==WsMulti.PayGateEnableForOneoftheItemSoUnableToAddItem?WSMAIN.AlertCartMsg(n.Msg):WSMAIN.AlertAvail(n.Msg);return}location.href=Utils.Format("cart.aspx?hotelID={0}&lang={1}&hgID={2}&currID={3}",WsVars.HotelID,WsVars.LangCode,WsVars.HgID,WsVars.CurrencyId)},error:function(){$("body").css({cursor:"auto"})}})}function RedirectToIndexPageFromCartModal(){location.href=Utils.Format("index.aspx?hotelID={0}&lang={1}&hgID={2}&currID={3}",WsVars.HotelID,WsVars.LangCode,WsVars.HgID,WsVars.CurrencyId)}function RedirectToIndexPage(n){$("body").css({cursor:"wait"});$.ajax({type:"POST",url:"xml/additem.aspx",data:n,dataType:"json",success:function(){$("body").css({cursor:"auto"});location.href=Utils.Format("index.aspx?hotelID={0}&lang={1}&hgID={2}&currID={3}",WsVars.HotelID,WsVars.LangCode,WsVars.HgID,WsVars.CurrencyId)},error:function(){$("body").css({cursor:"auto"})}})}function RedirectToCheckoutORCartFromCartModal(){location.href=WsVars.EnableReduceClicks=="True"&&WsVars.CartItems.length==0&&WsVars.Rooms==1?Utils.Format("combocheckout.aspx?hotelID={0}&lang={1}&hgID={2}&currID={3}",WsVars.HotelID,WsVars.LangCode,WsVars.HgID,WsVars.CurrencyId):Utils.Format("cart.aspx?hotelID={0}&lang={1}&hgID={2}&currID={3}",WsVars.HotelID,WsVars.LangCode,WsVars.HgID,WsVars.CurrencyId)}function RedirectToCheckoutORCart(n){$("body").css({cursor:"wait"});$.ajax({type:"POST",url:"xml/additem.aspx",data:n,dataType:"json",success:function(n){if($("body").css({cursor:"auto"}),n.Msg!=null&&n.Msg.length>0){n.Msg==WsMulti.MsgLimitRoomResv&&($("#dvWsCart .ws-buttons #buWsCartCont").hide(),$("#dvWsCartMsg").removeClass("ws-show-this").html(""));WSMAIN.AlertAvail(n.Msg);return}location.href=WsVars.EnableReduceClicks=="True"&&WsVars.CartItems.length==0&&WsVars.Rooms==1?Utils.Format("combocheckout.aspx?hotelID={0}&lang={1}&hgID={2}&currID={3}",WsVars.HotelID,WsVars.LangCode,WsVars.HgID,WsVars.CurrencyId):Utils.Format("cart.aspx?hotelID={0}&lang={1}&hgID={2}&currID={3}",WsVars.HotelID,WsVars.LangCode,WsVars.HgID,WsVars.CurrencyId)},error:function(){$("body").css({cursor:"auto"})}})}function AddItem(n){return $("body").css({cursor:"wait"}),$.ajax({type:"POST",url:"xml/additem.aspx",data:n,dataType:"json",success:function(n){if($("body").css({cursor:"auto"}),n.Msg!=null&&n.Msg.length>0&&typeof WSMAIN!="undefined"&&WSMAIN!=null){n.Msg==WsMulti.PayGateEnableForOneoftheItemSoUnableToAddItem?WSMAIN.AlertCartMsg(n.Msg):WSMAIN.AlertAvail(n.Msg);return}return!0},error:function(){return $("body").css({cursor:"auto"}),!1}})}function SetTextValueAttrPayMethod(n,t,i,r,u,f){n!=undefined&&n!=null&&n.length>0&&n.text(t);i!=undefined&&i!=null&&i.length>0&&i.val(r);u!=undefined&&u!=null&&u.length>0&&u.attr("data-order",f)}function AppendOccupancy(n,t){var u="",f=Number(t),r,i;if(n.length>0){for($("option",n).remove(),r=0,n.attr("id")=="cbAdults"&&(r=1),i=r;i<=f;i++)u+=Utils.Format('<option value="{0}">{0}<\/option>',i);n.append(u)}}function ShowBaseOrSelectedCurrencyPrices(){var n,i,t;try{if(n="",i=!1,typeof WSMAIN!="undefined"&&(WSMAIN.Items!=undefined&&WSMAIN.Items!=null&&WSMAIN.Items.length>0||WSMAIN.items!=undefined&&WSMAIN.items!=null&&WSMAIN.items.length>0)){if(WsVars.IsPaymentGateway==="1"&&(n="ws-prices-actual"),(WsVars.GuestLoyalty!=""||$("#MyHeading_buMember").length>0)&&(Number(SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramConfig2)&SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramConfig2Enum.SuppLoyaltyPoints)>0&&WsVars.EnablePayByPoints=="1"&&(n="ws-prices-fractionalCredits",i=!0),n=="")return;typeof WsBaseCurr!="undefined"&&typeof WsDispCurr!="undefined"&&WsBaseCurr!=WsDispCurr?($("#txDeposit").length>0&&$("#txDeposit").is(":visible")&&BaseCurrencyAmtCreditsHtml(!0,$("#txDeposit"),"ActualDeposit",$(".ws-summary-deposit"),n),$("#txTotal").length>0&&BaseCurrencyAmtCreditsHtml(!0,$("#txTotal"),"ActualTotal",$(".ws-summary-total"),n),i&&(WsVars.EnableFractionalCredits=="1"&&$("#txtRemainingPoints").length>0&&BaseCurrencyAmtCreditsHtml(!1,$("#txtRemainingPoints"),null,null,n),$("#txSumReedemPointAmt").length>0&&BaseCurrencyAmtCreditsHtml(!1,$("#txSumReedemPointAmt"),null,null,n),$("#txSumReedemPointPrice").length>0&&BaseCurrencyAmtCreditsHtml(!1,$("#txSumReedemPointPrice"),null,null,n),$("#txRemaningAmount").length>0&&BaseCurrencyAmtCreditsHtml(!1,$("#txRemaningAmount"),null,null,n),$("#txDepositPaygateDetails").length>0&&BaseCurrencyAmtCreditsHtml(!1,$("#txDepositPaygateDetails"),null,null,n),$("#txDepositPaygate").length>0&&BaseCurrencyAmtCreditsHtml(!1,$("#txDepositPaygate"),null,null,n),$("#wsCancelDeposit").length>0&&BaseCurrencyAmtCreditsHtml(!1,$("#wsCancelDeposit"),null,null,n),$("#txSumRemainingAmt").length>0&&BaseCurrencyAmtCreditsHtml(!1,$("#txSumRemainingAmt"),null,null,n),$("#wsCancelCashback").length>0&&BaseCurrencyAmtCreditsHtml(!1,$("#wsCancelCashback"),null,null,n),$(".lbEquivalentAmountValue").length>0&&$(".lbEquivalentAmountValue").each(function(){BaseCurrencyAmtCreditsHtml(!1,$(this),null,null,n)}),$(".ws-price-detail-loyalty-redeem").length>0&&$(".ws-price-detail-loyalty-redeem").each(function(){BaseCurrencyAmtCreditsHtml(!1,$(this),null,null,n)}),$(".ws-detail-loyalty-remaining").length>0&&$(".ws-detail-loyalty-remaining").each(function(){var t=0;BaseCurrencyAmtCreditsHtml(!1,$(this).find(".ws-price-detail-loyalty-remaining"),null,null,n);t++})),$(".ws-detail-deposit").length>0&&(t=0,$(".ws-detail-deposit").each(function(){$(this).find("td").css("padding-bottom","");BaseCurrencyAmtCreditsHtml(!0,$(this).find(".ws-price-detail-deposit"),"ActualDetailDeposit_"+t,$(this),n);t++})),$(".ws-detail-subtotal").length>0&&(t=0,$(".ws-detail-subtotal").each(function(){$(this).find("td").css("padding-bottom","");BaseCurrencyAmtCreditsHtml(!0,$(this).find(".ws-price-detail-subtotal"),"ActualSubtotal_"+t,$(this),n);t++})),$(".ws-detail-remainingamount").length>0&&!i&&(t=0,$(".ws-detail-remainingamount").each(function(){BaseCurrencyAmtCreditsHtml(!0,$(this).find(".ws-price-detail-remainingamount"),"ActualRemainingAmount_"+t,$(this),n);t++})),$("#txDiscAmt").length>0&&$("#txDiscAmt").is(":visible")&&BaseCurrencyAmtCreditsHtml(!0,$("#txDiscAmt"),"ActualDiscAmt",$(".ws-summary-discount"),n),$("#txDetailTotal").length>0&&$("#txDetailTotal").is(":visible")&&BaseCurrencyAmtCreditsHtml(!0,$("#txDetailTotal"),"ActualDetailTotal",$(".ws-detail-total"),n),$("#txDetailSavings").length>0&&$("#txDetailSavings").is(":visible")&&BaseCurrencyAmtCreditsHtml(!0,$("#txDetailSavings"),"ActualDetailSaveAmt",$(".ws-detail-saving"),n)):(RemoveElement($("#trActualDeposit")),RemoveElement($("#trActualTotal")),i&&(WsVars.EnableFractionalCredits=="1"&&$("#txtRemainingPoints").length>0&&$("#txtRemainingPoints").removeClass(n).addClass("ws-prices"),$("#txSumRemainingAmt").removeClass(n).addClass("ws-prices"),$("#txSumReedemPointPrice").length>0&&$("#txSumReedemPointPrice").removeClass(n).addClass("ws-prices"),$("#txRemaningAmount").length>0&&$("#txRemaningAmount").removeClass(n).addClass("ws-prices"),$("#txDeposit").length>0&&$("#txDeposit").removeClass(n).addClass("ws-prices"),$("#txDepositPaygateDetails").length>0&&$("#txDepositPaygateDetails").removeClass(n).addClass("ws-prices"),$("#txDepositPaygate").length>0&&$("#txDepositPaygate").removeClass(n).addClass("ws-prices"),WsVars.EnableFractionalCredits=="1"&&$("#txtRemainingPoints").length>0&&$("#txtRemainingPoints").removeClass(n).addClass("ws-prices"),$(".lbEquivalentAmountValue").length>0&&$(".lbEquivalentAmountValue").each(function(){$(this).removeClass(n).addClass("ws-prices")}),$(".ws-price-detail-loyalty-redeem").length>0&&$(".ws-price-detail-loyalty-redeem").each(function(){$(this).removeClass(n).addClass("ws-prices")}),$(".ws-price-detail-loyalty-remaining").length>0&&$(".ws-price-detail-loyalty-remaining").each(function(){$(this).removeClass(n).addClass("ws-prices")})),$(".ws-detail-deposit").length>0&&(t=0,$(".ws-detail-deposit").each(function(){$(this).find("td").css("padding-bottom","0.25em");RemoveElement($("#trActualDetailDeposit_"+t));t++})),$(".ws-detail-subtotal").length>0&&(t=0,$(".ws-detail-subtotal").each(function(){$(this).find("td").css("padding-bottom","1em");RemoveElement($("#trActualSubtotal_"+t));t++})),$(".ws-detail-remainingamount").length>0&&!i&&(t=0,$(".ws-detail-remainingamount").each(function(){RemoveElement($("#trActualRemainingAmount_"+t));t++})),RemoveElement($("#trActualDiscAmt")),RemoveElement($("#trActualDetailTotal")),RemoveElement($("#trActualDetailSaveAmt")))}}catch(r){}}function BaseCurrencyAmtCreditsHtml(n,t,i,r,u){var f,e;try{if(t==null||t==undefined||u==undefined)return;f=t.attr("ref");n?(e=Utils.Format('<tr id="tr{2}"><td colspan="2" class="{3} bold" curr={1} style="padding-bottom:1em">{0}<\/td><\/tr>',Utils.GetAmount(f,WsVars.Currency,WsVars.UseCurrCode),WsVars.Currency,i,u),RemoveElement($("#tr"+i)),r!=null&&r!=undefined&&r.length>0&&$(e).insertAfter(r.closest("tr"))):(t.html(Utils.GetAmount(f,WsVars.Currency,WsVars.UseCurrCode)),t.removeClass("ws-prices").addClass(u))}catch(o){}}function RemoveElement(n){n!=null&&n!=undefined&&n.length>0&&n.remove()}function reloadPage(n){(n===undefined||n==null)&&(n=!0);window.history.replaceState&&window.history.replaceState(null,null,window.location.href);window.isPostback?window.location.href=window.location.href.split("#")[0]:location.reload(n)}function showLoder(){(loadercntr==null||loadercntr<0)&&(loadercntr=0);loadercntr++;$("body").css({cursor:"wait"});showOrHideDvSection($("#loading"),!0)}function hideLoder(){loadercntr--;$("body").css({cursor:"auto"});loadercntr<=0?showOrHideDvSection($("#loading"),!1):showOrHideDvSection($("#loading"),!0)}function checkAddonOption(n){return n.search("CheckOutOnly")!=-1||n.search("ScheduledbyDate")!="-1"&&n.search("ScheduledbyTime")=="-1"||n.search("ExcludeArrivalDate")!=-1||n.search("ExcludeDepartureDate")!=-1||n.search("EnableInventory")!=-1?n:"None"}function SetAbandonCartConsent(n,t,i){var r={hgID:WsVars.HgID,hotelID:WsVars.HotelID,email:n,segmentname:t,consentstatus:i,langID:WsVars.langID,lang:WsVars.LangCode};$.ajax({type:"POST",url:"xml/AbandonCartConsent.aspx",data:r,dataType:"json",success:function(n){n!=null&&n!=undefined&&($(".WsIbeCheckout").length>0&&r.consentstatus==1&&r.email!=null&&$("#txEmail").val()==""&&$("#txEmail").val(r.email),$.magnificPopup.close())},error:function(n){return $("body").css({cursor:"auto"}),$.magnificPopup.close(),WSEvents&&WSEvents.do_action("AddConsentProcessError",n),!1}})}function SetBrazeConsent(n,t){var i={hgID:WsVars.HgID,hotelID:WsVars.HotelID,email:n,brazeConsent:t,langID:WsVars.LangID,lang:WsVars.LangCode};$.ajax({type:"POST",url:"xml/SetCookie.aspx",data:i,dataType:"json",success:function(n){n!=null&&n!=undefined&&i.brazeConsent==1&&i.email!=null&&$("#txEmail").val()==""&&$("#txEmail").val(i.email)},error:function(){return $("body").css({cursor:"auto"}),!1}})}function ShowConsentPopup(n){if(n>0&&$("#ws-modal-consent").length>0){var t=$.cookie("alreadyShow_"+WsVars.HotelID);t!="alreadyshown"&&setTimeout(function(){$("#ws-modal-loyalty-header-full").is(":visible")?ShowConsentPopup(n):(WSCCONSENT.SetCookie("alreadyShow_"+WsVars.HotelID,"alreadyshown"),$.magnificPopup.open({items:{src:$("#ws-modal-consent"),type:"inline"},callbacks:{close:function(){return event&&$(event.target)!=undefined&&$(event.target).hasClass("mfp-close")&&SetAbandonCartConsent($("[id$=txEmailId]").val(),"CartRecovery",0),$.magnificPopup.proto.close.call(this),!1}}}))},n==undefined?0:n)}}function EnableAddedToCart(n){if(typeof n!="undefined"&&n!=null)for(i=0;i<=n.length-1;i++){let t=n[i];if(t.current&&!t.addedToCart){t.addedToCart=!0;t.current=!1;SetCurrentRoom(n);WSCCONSENT.SetCookie(multiRoomKey,JSON.stringify(n));return}}}function GetMultiRoomFromCookie(){let n=[];if(multiRoomKey=`MultiRoom_${WsVars.HotelID}`,$.cookie(multiRoomKey)==="undefined"||$.cookie(multiRoomKey)===null)n.push({adults:1,children:0,childAges:[],current:!0,addedToCart:!1});else{n=JSON.parse($.cookie(multiRoomKey));var t=n.filter(function(n){return n.addedToCart==!1});if((typeof WSMAIN=="undefined"||WSMAIN==null||WSMAIN.Items==null||WSMAIN.Items.Length==0)&&t.length>0)for(i=0;i<n.length;i++)n[i].AddedToCart=!1}return n}function GetButtonCaptionForBookNow(){for(i=0;i<=WSMLROOMS.MultiRoom.length-1;i++){let n=WSMLROOMS.MultiRoom[i];if(n.current&&!n.addedToCart)return SHR.__("Book this for Room ")+i}}function SetCurrentRoom(n,t=-1){for(i=0;i<=n.length-1;i++)n[i].current=!1;if(t==-1)for(i=0;i<=n.length-1;i++){let t=n[i];if(!t.addedToCart){t.current=!0;return}}else n[t].current=!0}function WsMultiRoomCTABannerCart(n){var u,f,t,i,r,o;typeof n=="undefined"&&(n=!1);[];u="";let e=!1;if(MultiRoom=GetMultiRoomFromCookie(),f=Utils.Format("{0}?hotelID={1}&lang={2}&hgID={3}&currID={4}",WsVars.CalDrivenShop=="True"?"shop.aspx":"index.aspx",WsVars.HotelID,WsVars.LangCode,WsVars.HgID,WsVars.CurrencyId),typeof WsVars.CartItems!="underfined"&&WsVars.CartItems.length>0){var s=Utils.GetDateFromY2K(WsVars.CartItems[WsVars.CartItems.length-1].Dt1),h=Utils.GetDateFromY2K(WsVars.CartItems[WsVars.CartItems.length-1].Dt1+WsVars.CartItems[WsVars.CartItems.length-1].Nights),c=Utils.DateFormat(s,WsDtFm[Number(WsVars.LangID)]),l=Utils.DateFormat(h,WsDtFm[Number(WsVars.LangID)]);f+=Utils.Format("&checkIn={0}&checkOut={1}",c,l)}if(typeof MultiRoom!="undefined"&&MultiRoom!==null&&MultiRoom.length>1){for(t=0;t<MultiRoom.length;t++){if(i="",MultiRoom[t].addedToCart)if(typeof WsVars.CartItems!="undefined"&&WsVars.CartItems.length>0&&!n)for(let n=0;n<WsVars.CartItems.length;n++)WsVars.CartItems[n].RoomIndex==t&&(i+=WsVars.CartItems[n].Adults>1?WsVars.CartItems[n].Adults+" "+SHR.__("Adults","Adults"):WsVars.CartItems[n].Adults+" "+SHR.__("Adult","Adult"));else i+=MultiRoom[t].adults>1?MultiRoom[t].adults+" "+SHR.__("Adults","Adults"):MultiRoom[t].adults+" "+SHR.__("Adult","Adult");else i+=MultiRoom[t].adults>1?MultiRoom[t].adults+" "+SHR.__("Adults","Adults"):MultiRoom[t].adults+" "+SHR.__("Adult","Adult");if(MultiRoom[t].addedToCart)if(typeof WsVars.CartItems!="undefined"&&WsVars.CartItems.length>0&&!n)for(let n=0;n<WsVars.CartItems.length;n++)r=WsVars.CartItems[n].Child1+WsVars.CartItems[n].Child2+WsVars.CartItems[n].Child3+WsVars.CartItems[n].Child4,WsVars.CartItems[n].RoomIndex==t&&r!=0&&(i+=r>1?", "+r+" "+SHR.__("Children","Children"):", "+r+" "+SHR.__("Child","Child"));else MultiRoom[t].children>1?i+=", "+MultiRoom[t].children+" "+SHR.__("Children","Children"):MultiRoom[t].children!=0&&(i+=", "+MultiRoom[t].children+" "+SHR.__("Child","Child"));else MultiRoom[t].children>1?i+=", "+MultiRoom[t].children+" "+SHR.__("Children","Children"):MultiRoom[t].children!=0&&(i+=", "+MultiRoom[t].children+" "+SHR.__("Child","Child"));MultiRoom[t].addedToCart?u+=Utils.Format('<div class="ws-multiRoomRow"><div class="ws-multiRoomRowMsg">{1} {2}<\/div><div class="ws-multiRoomRowOcc">{0}<\/div><\/div>',i,Utils.Format(SHR.__("RoomNum"),t+1),SHR.__("AddedToCart")):(o=e?"disabled":"",u+=Utils.Format('<div class="ws-multiRoomRow ws-multiRoomRowLink '+o+'"><a href="{3}" ref={0} class="buWsCartDifferentRoomRate ws-button-small ws-secondary"><div class="ws-multiRoomRowMsg">{2}<\/div><div class="ws-multiRoomRowOcc">{1}<\/div><\/a><\/div>',t+1,i,Utils.Format(SHR.__("SelectAvailRmRt"),Utils.Format(SHR.__("RoomNum"),t+1)),f),e=!0)}$(".ws-multiRoom").html(u)}}function WsMultiRoomCTABanner(){var t;[];var i="",e="",r="";let n=0,u=0,f=[];if(t=location.pathname.split("/").slice(-1)[0],t=t.toLowerCase(),MultiRoom=GetMultiRoomFromCookie(),MultiRoom!==null&&MultiRoom.length>0){if(MultiRoom.length>1){for(let t=0;t<MultiRoom.length;t++){if(MultiRoom[t].addedToCart){f.push(t+1);continue}if(MultiRoom[t].current||n!=0){if(n==0){n=t+1;continue}u=t+1;break}}f.length>0&&(r=Utils.Format(this.SHR.__("RoomNum"),f[f.length-1])+" "+this.SHR.__("AddedToCart")+" ");let s="",o=n-1;o>=0&&(s+=MultiRoom[o].adults>1?MultiRoom[o].adults+" "+SHR.__("Adults","Adults"):MultiRoom[o].adults+" "+SHR.__("Adult","Adult"),MultiRoom[o].children>1?s+=", "+MultiRoom[o].children+" "+SHR.__("Children"):MultiRoom[o].children==1&&(s+=", "+MultiRoom[o].children+" "+SHR.__("Child")));let h="";u>0&&(h=t.indexOf("ratecalendar")>-1?Utils.Format(SHR.__("SelectRmRtRate"),Utils.Format(SHR.__("RoomNum"),n),Utils.Format(SHR.__("RoomNum"),u)):t.indexOf("roomcalendar")>-1?Utils.Format(SHR.__("SelectRmRtRoom"),Utils.Format(SHR.__("RoomNum"),n),Utils.Format(SHR.__("RoomNum"),u)):Utils.Format(SHR.__("SelectRmRtBefore"),Utils.Format(SHR.__("RoomNum"),n),Utils.Format(SHR.__("RoomNum"),u)));f.length<WsVars.MaxRoomsPerRes&&(i+=h==""?t.indexOf("ratecalendar")>-1?'<div class="ws-multiRoomRow ws-multiRoomRowLink"><div class="ws-multiRoomCTAMsgOne">'+r+Utils.Format(SHR.__("SelectRmRtRate"),Utils.Format(SHR.__("RoomNum"),n))+"<\/div><\/div>":t.indexOf("roomcalendar")>-1?'<div class="ws-multiRoomRow ws-multiRoomRowLink"><div class="ws-multiRoomCTAMsgOne">'+r+Utils.Format(SHR.__("SelectRmRtRoom"),Utils.Format(SHR.__("RoomNum"),n))+"<\/div><\/div>":'<div class="ws-multiRoomRow ws-multiRoomRowLink"><div class="ws-multiRoomCTAMsgOne">'+r+Utils.Format(SHR.__("SelectRmRt"),Utils.Format(SHR.__("RoomNum"),n))+"<\/div><\/div>":'<div class="ws-multiRoomRow ws-multiRoomRowLink"><div class="ws-multiRoomCTAMsgOne">'+r+h+"<\/div><\/div>",e+=t.indexOf("ratecalendar")>-1?Utils.Format('<div class="ws-multiRoomRow ws-multiRoomRowLink ws-multiRoomCTAMsgTwo"><b> {0} <\/b><div class="ws-multiRoomRowOcc">{1}<\/div><\/div>',Utils.Format(SHR.__("SelectAvailRmRtRate"),Utils.Format(SHR.__("RoomNum"),n)),s):t.indexOf("roomcalendar")>-1?Utils.Format('<div class="ws-multiRoomRow ws-multiRoomRowLink ws-multiRoomCTAMsgTwo"><b> {0} <\/b><div class="ws-multiRoomRowOcc">{1}<\/div><\/div>',Utils.Format(SHR.__("SelectAvailRmRtRoom"),Utils.Format(SHR.__("RoomNum"),n)),s):Utils.Format('<div class="ws-multiRoomRow ws-multiRoomRowLink ws-multiRoomCTAMsgTwo"><b> {0} <\/b><div class="ws-multiRoomRowOcc">{1}<\/div><\/div>',Utils.Format(SHR.__("SelectAvailRmRt"),Utils.Format(SHR.__("RoomNum"),n)),s))}$(".ws-multiRoom-cta-one").html(i);$(".ws-multiRoom-cta-two").html(e)}}function CreateChildAgeDropdown(n,t,i){let u=Number(WsVars.MaxChildAge);u==0&&(u=18);let r="";i==0&&(i=n.length);for(let e=0;e<i;e++){var f="childSelectDiv_"+t;f=f+Number(e+1);r+=`    <div class="${f}" ><label class="label">`+Utils.Format(SHR.__("ChildAge"),Number(e+1))+`</label>`;r+=`        <select class="child-ddl" childNo="${Number(e+1)}">`;let i=n[e];r+=`<option value="0" ${i!==null&&i==0?"selected":""} >${SHR.__("ChildAgeLessThanOneYear")}</option>`;for(let n=1;n<=u;n++)r+=`<option value="${n}" ${i!==null&&i==n?"selected":""} >${n}</option>`;r+=`        </select>`;r+=`    </div>`}return r}function UpdateCart(){var n=jQuery.extend(!0,{},WSMAIN),t;n.Promo="";n.Saved=WsVars.CartID;delete n.window;t={hgID:WsVars.HgID,hotelID:WsVars.HotelID,langID:WsVars.LangID,currID:WsVars.CurrencyId,wscart:JSON.stringify(n)};$("body").css({cursor:"wait"});$.ajax({type:"POST",url:"xml/setcart.aspx",data:t,dataType:"json",success:function(n){return $("body").css({cursor:"auto"}),WsVars.EnableBNPLProviderID==1&&WsVars.FlexPayUpCode!=""&&WsFlexPay.UpdateFlexPayMonthlyRate(),n.Msg!=null&&n.Msg.length>0&&WsVars.CurrencyId=="900"&&(Number(SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramConfig2)&SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramConfig2Enum.SuppLoyaltyPoints)>0&&WSMAIN.IsLoggedIn()&&WsVars.EnablePayByPoints=="1"||n.Msg==WsMulti.PayGateEnableForOneoftheItemSoUnableToAddItem?(WSMAIN.AlertAlt(n.Msg),!1):void 0},error:function(){$("body").css({cursor:"auto"})}})}function SetInputFieldRequired(){rqWsSalutation&&$("#cbSalutation").length>0&&$("#cbSalutation").attr("aria-required","true");rqWsFirstName&&$("#txFirstName").length>0&&$("#txFirstName").attr("aria-required","true");rqWsMiddleInit&&$("#txMiddleInit").length>0&&$("#txMiddleInit").attr("aria-required","true");rqWsLastName&&$("#txLastName").length>0&&$("#txLastName").attr("aria-required","true");rqWsAddress1&&$("#txAddress1").length>0&&$("#txAddress1").attr("aria-required","true");rqWsCity&&$("#txCity").length>0&&$("#txCity").attr("aria-required","true");rqWsZip&&$("#txZip").length>0&&$("#txZip").attr("aria-required","true");rqWsState&&$("#cbState option").length>1&&$("#cbState").attr("aria-required","true");rqWsCompany&&$("#txCompany").length>0&&$("#txCompany").attr("aria-required","true");rqWsGender&&$("#cbGender").length>0&&$("#cbGender").attr("aria-required","true");rqWsDob&&$("#cbBirthMM").length>0&&$("#cbBirthMM").attr("aria-required","true");rqWsDob&&$("#cbBirthDD").length>0&&$("#cbBirthDD").attr("aria-required","true");rqWsDob&&$("#cbBirthYY").length>0&&$("#cbBirthYY").attr("aria-required","true");rqWsMemberID&&$("#txMemberID").length>0&&!$("#txMemberID").is("[readonly]")&&$("#txMemberID").attr("aria-required","true");rqWsPhone&&$("#txPhone").length>0&&$("#txPhone").attr("aria-required","true");rqWsMobile&&$("#txMobile").length>0&&$("#txMobile").attr("aria-required","true");rqWsEmailAlt&&$("#txEmailAlt").length>0&&$("#txEmailAlt").attr("aria-required","true");rqWsBookedBy&&$("#txBooked").length>0&&$("#txBooked").attr("aria-required","true");rqWsTripPurpose&&$("#cbTripPurpose").length>0&&$("#cbTripPurpose").attr("aria-required","true");rqWsTravelProgram&&$("#cbTravelProgram").length>0&&$("#cbTravelProgram").attr("aria-required","true");rqWsTravelMember&&$("#txTravelMember").length>0&&$("#txTravelMember").attr("aria-required","true");rqWsArrFlight&&$("#txArrFlight").length>0&&$("#txArrFlight").attr("aria-required","true");rqWsArrTime&&$("#txArrTime").length>0&&$("#txArrTime").attr("aria-required","true");rqWsArrTime&&$("#cbArrTime").length>0&&$("#cbArrTime").attr("aria-required","true");rqWsGuestPref&&$("#txComments").length>0&&$("#txComments").attr("aria-required","true");rqWsEmail&&$("#txEmail").length>0&&$("#txEmail").attr("aria-required","true")}function GetRoomGroupTowerDisp(n){return WsVars.IsRoomGroupTowerEnabled=="0"||typeof n=="undefined"||typeof n.RmGroupTowerName==undefined||n.RmGroupTowerName==null?"":n.Name.includes(n.RmGroupTowerName)?"":Utils.Format("{0}: ",n.RmGroupTowerName)}function calendarTooltip(n,t,i,r,u){var f="",e="";e=i>0?i:WsMulti.COMP;r!=0&&(f=`<div class="ws-tip ws-tip-fee"><span class="ws-tip-amt">+$${r}</span> <span class="ws-tip-txt">${WsMulti.DailyResortFee}</span></div>`);let o=`<div class="ws-tip-content"><a href="javascript:void(0)" class="ws-tip-destroy"></a><a href="javascript:void(0)" class="ws-tip-close"><span class="ws-icon" data-icon="&#xf057;" aria-hidden="true"></span><span class="sr-only">${SHR.__("Close")}</span></a><div class="ws-tip ws-tip-avg-rate"><span class="ws-tip-amt">${e}</span> <span class="ws-tip-txt">${WsMulti.AvgRoomRate}</span></div>
       ${f}
        <div class="ws-tip ws-tip-avg-night"><span class="ws-tip-amt">${u}</span> <span class="ws-tip-txt">${WsMulti.AvgNight}</span></div>
        <div class="ws-tip ws-tip-tax"><span class="ws-tip-txt">${WsMulti.Excludestaxes}</span></div></div>`;toolTipContent=o;tippyTooltip(t)}function tippyTooltip(n){var i,r,u;let t;if(typeof toolTipContent!="undefined"&&($("#ws-calendar").hasClass("ws-show-this")||$("#dvCalendar").hasClass("ws-show-this")||$("#dvModalAvailWidgetLoader").is(":visible")||$("#ws-calendar").is(":visible")))if(i=$(".dtCheckin").attr("ref"),r=$(".dtCheckout").attr("ref"),WsVars.HoveredAddToDisplayTaxesForCalendar=="1"&&n!=0&&(n<i||n>r)){$("#dv_"+n).hasClass(".dtCheckout[aria-describedby]")||(t=tippy("#dv_"+n,{placement:"top",content:toolTipContent,allowHTML:!0,delay:[0,999999999],zIndex:99999}));$(".calDays div.pointer").not(".dtCheckout").mouseup(function(){t&&t.length>0&&t.forEach(n=>n.destroy())});$("#ws-calendar").hasClass("ws-hide-action")&&t&&t.length>0&&t[0].hide();$("#dv_"+n).on("mouseenter",function(){t&&t.length>0&&t[0].show()}).on("mouseleave",function(){t&&t.length>0&&t[0].destroy()});$(".ws-tip-close").click(function(){t&&t.length>0&&t[0].hide()});$(".calDays div.pointer").each(function(){$(this).addClass("ws-mouseover")})}else{t=tippy(".dtCheckout",{placement:"top",content:toolTipContent,allowHTML:!0,hideOnClick:"toggle",delay:[0,999999999],zIndex:99999});$(".calDays div.pointer").not(".dtCheckout").mouseup(function(){t&&t.length>0&&t.forEach(n=>n.destroy())});$("#ws-calendar").hasClass("ws-hide-action")?t&&t.length>0&&t[0].hide():$("#dvCalendar").hasClass("ws-show-this")?(u=$("body").height(),$("body").css("height",u),t&&t.length>0&&t[0].show(),$(window).scroll(function(){$("body").css("height","auto")})):$("#dvModalAvailWidgetLoader").is(":visible")&&(t&&t.length>0&&t[0].hide(),setTimeout(function(){$("#ws-calendar").hasClass("ws-show-this")&&t&&t.length>0&&t[0].show()},1500));setTimeout(function(){$("#ws-calendar").hasClass("ws-show-this")&&$("#ws-calendar").hasClass("ws-hide-action")||($(".dtCheckout").closest(".calMonth").hasClass("visible")?(t&&t.length>0&&t[0].hide(),($("#ws-calendar").hasClass("ws-show-this")||$("#dvCalendar").hasClass("ws-show-this"))&&t&&t.length>0&&t[0].show()):t&&t.length>0&&t[0].hide())},1500);$("body").on("click",".ws-tip-destroy",function(){t&&t.length>0&&t[0].destroy()});$("body").on("click",".ws-tip-close",function(){t&&t.length>0&&t[0].hide()})}}function ShowOrHideEigenIframe(n,t,i){WsVars.IsPaymentGatewayV1==1&&WsVars.IsEigenDropIn==1&&(showOrHideDvSection($("#divEigenIframe"),t),showOrHideDvSection($("#divPayment"),n),i=="XX"&&$("#eigenSessionID").val()==""&&GetEigenSession())}function initAddressAutocomplete(){setupAddrAutoCompleteInput("#txAddress1","#cbCountry","suggestions",WsVars.HotelID);setupAddrAutoCompleteInput("#txBillAddress1","#cbBillCountry","suggestionsBill",WsVars.HotelID);$("#cbCountry").on("change",function(){$("#txState").val("");$("#cbState").prop("selectedIndex",0)});$("#cbBillCountry").on("change",function(){$("#txBillState").val("");$("#cbBillState").prop("selectedIndex",0)});$(document).on("click",function(n){const t=$("#suggestions"),r=$("#txAddress1"),i=$("#suggestionsBill"),u=$("#txBillAddress1");t.is(n.target)||t.has(n.target).length||n.target===r[0]||t.hide();i.is(n.target)||i.has(n.target).length||n.target===u[0]||i.hide()})}function clearSuggestions(n,t,i){const r=$(`#${n}`);r.is(":visible")&&((typeof i=="undefined"||i==null)&&(i=500),t&&clearTimeout(t),i>0?t=setTimeout(()=>{r.empty(),r.css("display","none")},i):(r.empty(),r.css("display","none")))}function setupAddrAutoCompleteInput(n,t,i,r){const e=$(n),o=$(t);let u;const s=500;let f="";e.on("blur",function(){clearSuggestions(i,u)});e.on("keyup",function(n){const t=$(this).val(),h=o.val();if((n.key==="Escape"||n.key==="Tab")&&clearSuggestions(i,u,0),clearTimeout(u),t.length<3){clearSuggestions(i,u);return}let e=s;f.length>0&&Math.abs(f.length-t.length)>2&&(e=0);u=setTimeout(()=>{f=t,$.ajax({type:"POST",url:"xml/GetAddressAutoComplete.aspx",data:{input:t,country:h,hotelID:r},dataType:"json",success:function(n){displaySuggestions(n,i)},error:function(){$("body").css("cursor","auto");console.warn("Error fetching address suggessions.");clearSuggestions(i,u,0)}})},e)})}function displaySuggestions(n,t){if(clearSuggestions(t,null,0),typeof n!="undefined"&&n!=null){const i=$(`#${t}`);n.forEach(n=>{const r=document.createElement("div");r.classList.add("suggestion-item");r.textContent=n.Text;r.onclick=()=>fetchPlaceDetails(n.PlaceId,t);i.append(r)});i.show()}}function fetchPlaceDetails(n,t){try{lastQuery="";$.ajax({type:"POST",url:"xml/GetAddressAutoComplete.aspx",data:{placeId:n,hotelID:WsVars.HotelID},dataType:"json",success:function(n){t=="suggestions"?displayDetails(n,""):t=="suggestionsBill"&&displayDetails(n,"Bill")},error:function(){$("body").css({cursor:"auto"});console.warn("error fetching address details")}})}catch(i){console.error("Error:",i)}let r;clearSuggestions(t,r,0)}function displayDetails(n,t){if(typeof n!="undefined"&&n!=null&&typeof n.addressComponents!="undefined"&&n.addressComponents!=null){const r=$(`#cb${t}State`),a=$(`#tx${t}Address1`),v=$(`#tx${t}Address2`),y=$(`#tx${t}City`),p=$(`#tx${t}State`),w=$(`#tx${t}Zip`),b=`#dv${t}State .customSelectInner`,i=n.addressComponents;let s="",h="",c="",f=i.find(n=>n.types.includes("neighborhood")),u=i.find(n=>n.types.includes("postal_town")),e=i.find(n=>n.types.includes("locality")),l=i.find(n=>n.types.includes("postal_code"));u?e&&(s=e.longText):u=e;u&&(h=u.longText);l&&(c=l.longText);let o=i.filter(n=>n.types.length==0||n.types.indexOf("street_number")>-1||n.types.indexOf("subpremise")>-1||n.types.indexOf("route")>-1||n.types.indexOf("sublocality")>-1).map(n=>n.longText).join(" ");f&&n.formattedAddress.indexOf(f.longText)>-1&&(o=f.longText+" "+o);i.filter(n=>n.types.includes("administrative_area_level_1")).forEach(n=>{if(r.is(":visible")){const t=n.shortText,i=r.find(`option[value="${t}"]`);if(i.length>0){r.val(t);const n=document.querySelector(b);n&&(n.textContent=r.find("option:selected").text())}else console.log("State not found in the dropdown for:",t)}else p.val(n.longText)});a.val(o);v.val(s);y.val(h);w.val(c)}}function GetFlexPayRateOnIndex(n,t,i=1){return WsVars.EnableBNPLProviderID==1&&WsVars.FlexPayUpCode!=""&&(WsVars.ShowFlexPayOnCheckoutOnly==0||i==0)?WsFlexPay.ShowMonthlyRates(n,t,i):""}function ShowTransBookGuestInputs(){var u=!1,t=0,n,i,r;if(WSMAIN&&WSMAIN.Items!=null)for(n=0;n<WSMAIN.Items.length;n++)if(i=Number(WSMAIN.Items[n].Adults||0)+Number(WSMAIN.Items[n].Child1||0)+Number(WSMAIN.Items[n].Child2||0)+Number(WSMAIN.Items[n].Child3||0)+Number(WSMAIN.Items[n].Child4||0),i>1){if(WSMAIN.Items[n].Svcs&&WSMAIN.Items[n].Svcs!=null&&WSMAIN.Items[n].Svcs.length>0)for(r=0;r<WSMAIN.Items[n].Svcs.length;r++)i>1&&WSMAIN.Items[n].Svcs[r].IsTransportBooking&&(u=!0,t=i>t?i:t);WSMAIN.Items[n].IsTransportBooking&&(u=!0,t=i>t?i:t)}return u&&t>1}function IsValidAdditionalGuest(n,t){var r=!0,u=ConciergeProviderIncluded(),c=new Date,k,d,e,o,ot,st,ht;c.setHours(0,0,0,0);const ct=new Date(c.getFullYear(),c.getMonth()+1,0),it=ct.getDate();var rt=0,ut=0,b=0;for(let n=0;n<WSMAIN.Items.length;n++)WSMAIN.Items[n].Dt1+WSMAIN.Items[n].Nights>b&&(b=WSMAIN.Items[n].Dt1+WSMAIN.Items[n].Nights),Number(WSMAIN.Items[n].Adults||0)>rt&&(rt=Number(WSMAIN.Items[n].Adults||0)),k=Number(WSMAIN.Items[n].Child1||0)+Number(WSMAIN.Items[n].Child2||0)+Number(WSMAIN.Items[n].Child3||0)+Number(WSMAIN.Items[n].Child4||0),k>ut&&(ut=k);d=Utils.GetDateFromY2K(b);$("#cbBirthMM").val()&&$("#cbBirthDD").val()&&$("#cbBirthYY").val()&&(e=new Date($("#cbBirthYY").val(),$("#cbBirthMM").val()-1,$("#cbBirthDD").val()),o=getAge(e),(u==0||u==2)&&o<=12?(r=!1,$("#cbBirthMM").addClass("ws-error-form"),$("#dvWsDob p.ws-error").text(SHR.__("ValidDOBAdult"))):($("#cbBirthMM").removeClass("ws-error-form"),$("#dvWsDob p.ws-error").text()));n.find(".ws-form-item:visible").each(function(){var i=$(this),n=i.find("input, select").first(),u=i.find("p.ws-error"),f=n.val()?.trim(),e,o,s;(u.hide(),n.attr("id")?.includes("SecDocument"))||(e=i.find("label").clone().find(".ws-required").remove().end().text().trim(),n.is(":visible")&&!f?(o=n.is("select")?SHR.__("PleaseSelectField"):SHR.__("PleaseEnterField"),(t===undefined||n.attr("id")==t.attr("id"))&&u.text(o.replace("{0}",e)).show(),r=!1):n.attr("type")==="email"&&(s=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,s.test(f)||((t===undefined||n.attr("id")==t.attr("id"))&&u.text(SHR.__("ValidEmail")).show(),r=!1)))});var ft=n.attr("id")?.match(/guestBlockG(\d+)/),i=ft?ft[1]:"",s=n.find(`#divG${i}DOB`),et=s.find(`#ddlG${i}DobMM`),f=s.find(`#ddlG${i}DobDD`),l=s.find(`#ddlG${i}DobYY`),h=s.find("p.ws-error");h.hide();s.length>0&&i>1&&(et.val()&&f.val()&&l.val()?(e=new Date(l.val(),et.val()-1,f.val()),e>=c?((t===undefined||f.attr("id")==t.attr("id")||f.attr("id")==l.attr("id"))&&h.text(SHR.__("EnterDob")).show(),r=!1):(u==0||u==2)&&(o=getAge(e),$(`#guest${i}IsAdult`).val()=="true"&&o<=12?(r=!1,h.text(SHR.__("ValidDOBAdult")).show()):$(`#guest${i}IsAdult`).val()=="false"&&o>12&&(r=!1,h.text(SHR.__("ValidDOBChild")).show()))):((t===undefined||f.attr("id")==t.attr("id")||f.attr("id")==l.attr("id"))&&h.text(SHR.__("SelectDateofBirth")).show(),r=!1));var a=n.find(`#ddlG${i}PassExpMon`),v=n.find(`#ddlG${i}PassExpYear`),g=n.find(`#divG${i}PassportExpDate > p.ws-error`);if(g.hide(),a.val()&&v.val()?(ot=new Date(v.val(),a.val()-1,it),ot<=d&&((t===undefined||a.attr("id")==t.attr("id")||v.attr("id")==t.attr("id"))&&g.text(SHR.__("PleaseSelectValidField").replace("{0}",SHR.__("PassportExpiryDate"))).show(),r=!1)):((t===undefined||a.attr("id")==t.attr("id")||v.attr("id")==t.attr("id"))&&g.text(SHR.__("PleaseSelectField").replace("{0}",SHR.__("PassportExpiryDate"))).show(),r=!1),n.find(`#ddlG${i}SecDocumentType`).length>0&&u==1||u==2){var nt=n.find(`#ddlG${i}SecDocumentType`),y=nt.val().toUpperCase(),lt=nt.closest(".ws-form-item").find("p.ws-error");if(lt.hide(),nt.is(":visible")&&y){st=[{id:`txtG${i}SecDocumentNum`,label:SHR.__("SecondaryDocumentNumber")},{id:`ddlG${i}SecDocumentIssC`,label:SHR.__("SecondaryDocumentIssuingCountry")}];st.forEach(function(i){var u=n.find("#"+i.id),f=u.closest(".ws-form-item").find("p.ws-error"),o=u.val()?.trim(),e;f.hide();o||(e=u.is("select")?SHR.__("PleaseSelectField"):SHR.__("PleaseEnterField"),(t===undefined||u.attr("id")==t.attr("id"))&&f.text(e.replace("{0}",i.label)).show(),r=!1)});var p=n.find(`#ddlG${i}SecDocumentExpMon`),w=n.find(`#ddlG${i}SecDocumentExpYear`),tt=n.find(`#divG${i}SecDocumentExpDate > p.ws-error`);tt.hide();$(`#divG${i}SecDocumentExpDate`).is(":visible")&&(y=="UR"||y=="RE-ENTRY OR REFUGEE PERMIT"||y=="US NON-IMMIGRANT VISA")&&(p.val()&&w.val()?(ht=new Date(w.val(),p.val()-1,it),ht<=d&&((t===undefined||p.attr("id")==t.attr("id")||w.attr("id")==t.attr("id"))&&tt.text(SHR.__("PleaseSelectValidField").replace("{0}",SHR.__("SecondaryDocumentExpiryDate"))).show(),r=!1)):((t===undefined||p.attr("id")==t.attr("id")||w.attr("id")==t.attr("id"))&&tt.text(SHR.__("PleaseSelectField").replace("{0}",SHR.__("SecondaryDocumentExpiryDate"))).show(),r=!1))}}return r}function ConciergeProviderIncluded(){var t=!1,i=!1,n;if(WSMAIN&&WSMAIN.Items!=null)for(let r=0;r<WSMAIN.Items.length;r++)if((n=WSMAIN.Items[r].IsConciergeAddOnsIncluded,n==="2")||(n==="1"&&(i=!0),n==="0"&&(t=!0),t&&i))return"2";return i?"1":t?"0":""}function bindCountryDropdown(n){var t=$("#cbCountry"),i=$(n),r=t.children().clone().removeAttr("selected");i.empty().append($("<option>",{value:"",text:"",selected:!0})).append(r)}function bindExpiryDropdowns(n,t,i){var f=$(n),e=$(t),s,o,h,c,r,u,l;for(f.empty(),e.empty(),s=SHR.__("Months"),o=s.split(","),f.append(`<option value=""></option>`),r=0;r<o.length&&r<12;r++)f.append(new Option(o[r],(r+1).toString()));for(h=SHR.__("Year"),c=(new Date).getFullYear(),e.append(`<option value=""></option>`),r=0;r<10;r++)u=c+r,l=i===7||i===9||i===10?`${u}${h}`:`${u}`,e.append(new Option(l,u.toString()))}function bindDateOfBirthDropdowns(n,t,i){var f=$(n),e=$(t),o=$(i),h,s,c,u,r;for(f.empty(),e.empty(),o.empty(),h=SHR.__("Months"),s=h.split(","),f.append(`<option value=""></option>`),r=0;r<s.length&&r<12;r++)f.append(new Option(s[r],(r+1).toString()));for(e.append(`<option value=""></option>`),r=1;r<=31;r++)e.append(new Option(r.toString(),r.toString()));for(c=(new Date).getFullYear(),u=c,o.append(`<option value=""></option>`),r=0;r<100;r++)o.append(new Option(u.toString(),u.toString())),u--}function bindSecondaryDocTypeDropdown(n,t,i){var r=$(n);r.empty();r.append(`<option value=""></option>`);(t==="1"||t==="2")&&(r.append(`<option value="Permanent Resident Card">Permanent Resident Card</option>`),r.append(`<option value="Re-Entry or Refugee Permit">Re-Entry or Refugee Permit</option>`),r.append(`<option value="US non-immigrant Visa">US non-immigrant Visa</option>`),r.append(`<option value="Other not used (NEXUS, SENTRI Card, US Merchant Mariner Document, US Military ID)">
                        Other not used (NEXUS, SENTRI Card, US Merchant Mariner Document, US Military ID)</option>`));(t==="0"||t==="2")&&r.append(`<option value="UR">Unique Identification No</option>`);r.change(function(){showHideSecDocExpiry(n,i)})}function bindStateDropDownForUSAddress(n){var t=$(n);t.load("xml/getStates.aspx?country=US&lang="+WsVars.LangCode)}function storeConciergeGuestAdditionalData(){var t=["PassportNum","SecDocumentNum"],n;try{sessionStorage.clear();$(".guest-block:visible").each(function(){$(this).find(".ws-form-item:visible").each(function(){var n=$(this);n.find("input.ws-element, select.ws-element").each(function(){var n=$(this).attr("id"),r=$(this).val()?.trim(),i=!1;t.forEach(t=>{n.endsWith(t)&&(i=!0)});i||sessionStorage.setItem(n,r)})})});n=3e4;sessionStorage.setItem("ConcGuestAddDataTimestamp",Date.now().toString());setTimeout(()=>{sessionStorage.clear()},n)}catch(i){}}function bindConciergeGuestAdditionalData(){var t,n,i;try{t=3e4;n=sessionStorage.getItem("ConcGuestAddDataTimestamp");n&&(i=Date.now()-parseInt(n,10),i>=t?sessionStorage.clear():Object.keys(sessionStorage).forEach(function(n){let t=$("#"+n);t.length&&t.val(sessionStorage.getItem(n))}))}catch(r){}}function showHideSecDocExpiry(n,t){var i=$(n).val().toUpperCase();i=="UR"||i=="RE-ENTRY OR REFUGEE PERMIT"||i=="US NON-IMMIGRANT VISA"?$(`#divG${t}SecDocumentExpDate`).show():$(`#divG${t}SecDocumentExpDate`).hide()}function ShowOrHidePaymentIcons(n){$("#wsCreditCardLogo").addClass("ws-hide");$("#wsApplePayLogo").addClass("ws-hide");$("#wsGooglePayLogo").addClass("ws-hide");$("#wsSwishLogo").addClass("ws-hide");$("#wsKlarnaLogo").addClass("ws-hide");$("#wsWeChatLogo").addClass("ws-hide");$("#wsAlipayLogo").addClass("ws-hide");switch(n){case"applepay":$("#wsApplePayLogo").removeClass("ws-hide");break;case"googlepay":$("#wsGooglePayLogo").removeClass("ws-hide");break;case"swish":$("#wsSwishLogo").removeClass("ws-hide");break;case"klarna":case"klarna_account":case"klarna_paynow":$("#wsKlarnaLogo").removeClass("ws-hide");break;case"wechatpayweb":$("#wsWeChatLogo").removeClass("ws-hide");break;case"alipay":$("#wsAlipayLogo").removeClass("ws-hide");break;case"scheme":$("#wsCreditCardLogo").removeClass("ws-hide")}}function getAge(n){var t=new Date,i=t.getFullYear()-n.getFullYear();const r=t.getMonth()-n.getMonth();return(r<0||r===0&&t.getDate()<n.getDate())&&i--,i}function CheckPolicy(n){var t;if(n!=undefined&&n!=null&&n.length>0){var r=!1,u=!1,f=!1,i=n[0].Guar;for(t=0;t<n.length;t++)switch(n[t].Guar){case"DX":case"PP":f=!0;i=n[t].Guar;break;case"GX":u=!0;break;case"XX":r=!0}return u?"GX":f?i:r?"XX":i}}function ShowHidePaymentMethodDvSection(n){typeof n!="undefined"&&n!=null&&n!=""&&(n=n.toLowerCase());showOrHideDvSection($("#dvGiftCardNumber"),!1);showOrHideDvSection($("#dvGiftCardCvc"),!1);ShowOrHidePaymentIcons(n);$("#inPayByMethodType").val(n);RemoveReserveBtnClasses();switch(n){case"swish":case"klarna":case"klarna_account":case"klarna_paynow":case"applepay":case"googlepay":case"alipay":case"wechatpayweb":showOrHideDvSection($("#divCreditcardItem"),!1);$("#rbCreditCard").prop("checked",!1);break;case"giftcard":showOrHideDvSection($("#divCreditcardItem"),!1);showOrHideDvSection($("#dvGiftCardNumber"),!0);showOrHideDvSection($("#dvGiftCardCvc"),!0);$("#rbCreditCard").prop("checked",!1);break;case"scheme":showOrHideDvSection($("#divCreditcardItem"),!0);$("#rbCreditCard").prop("checked",!0);$("input:radio[name='WsPaymentMethod$rdPayMethodType']").prop("checked",!1);break;default:showOrHideDvSection($("#divCreditcardItem"),!0);$("#rbCreditCard").prop("checked",!0);$("input:radio[name='WsPaymentMethod$rdPayMethodType']").prop("checked",!1)}}function InitializeWalletPay(n){typeof WsWalletPay!="undefined"&&WsWalletPay!=null&&(n=="googlepay"?WsWalletPay.GooglePayPaymentRequest():n=="applepay"&&WsWalletPay.ApplepayPaymentRequest())}function RemoveReserveBtnClasses(){$("#buReserve_Paygate,#buReserve2_Paygate").hasClass("ws-submitting")&&$("#buReserve_Paygate,#buReserve2_Paygate").removeClass("ws-submitting");$(".ws-reserve-button").hasClass("ws-disabled")&&$(".ws-reserve-button").removeClass("ws-disabled")}var WSCCONSENT={_initComplete:!1,_self:this,_isExtConsentEnabled:!1,_tld:typeof Utils!="undefined"&&typeof Utils.TopLevelDomain!="undefined"?Utils.TopLevelDomain():"",UserConsent:{Necessary:!0,Functional:!1,Analytics:!1,Advertising:!1},CookieType:Object.freeze({Necessary:"Necessary",Functional:"Functional",Analytics:"Analytics",Advertising:"Advertising"}),NecessaryCookie:["WsDispCurr_*","CrsID.*","delegAuthLoginCheck.*","forceAuth.*","WSGHgSearch","mcfresh","McAuth3dsFresh","PrivacyPolicy.*.Consent","ASP.Net_SessionId","showQualifiedRate_*","alreadyShow_*","MultiRoom_*","SHRABC_.*","_MultiLanguage","WsHgSearch_.*"],FunctionalCookie:[],AnalyticsCookie:["ABTestVariant*","test_cookie"],AnalyticsCookie3rdParty:["_utmb","_utmt_.*","_utma","_utmz","_utmc","_gid","_ga","_ga_.*","_gat_.*","NID","TID"],AdvertisingCookie:["IsItemAddedToCart","IsUpgradePopUpShown"],AdvertisingCookie3rdParty:["__Secure-3PSIDCC","SIDCC","__Secure-3PAPISID","__Secure-1PAPISID","__Secure-1PSID","SAPISID","APISID","_Secure-3PSID","SSID","HSID","SID","VISITOR_INFO1_LIVE","LOGIN_INFO","YSC"],Init:function(n){_self=this;_self._tld==""&&typeof Utils!="undefined"&&typeof Utils.TopLevelDomain!="undefined"&&(_self._tld=Utils.TopLevelDomain());let t="";WsVars!=null&&WsVars.CookieConsent&&(WsVars.CookieConsent.startsWith("CMP")?(t="PrivacyPolicy."+WsVars.CookieConsent+"."+WsVars.ChainID+".Consent",_self._isExtConsentEnabled=!0):WsVars.CookieConsent=="CRSChainLevelCookie"?t="PrivacyPolicy.C"+WsVars.ChainID+".Consent":WsVars.CookieConsent=="CRSHotelLevelCookie"&&(t="PrivacyPolicy."+WsVars.HotelID+".Consent"));t!=""&&(_self.UserConsent=_self.GetUserConsentFromCookie(t));(typeof _self.UserConsent=="undefined"||_self.UserConsent==null)&&(_self.UserConsent={Necessary:!0,Functional:!1,Analytics:!1,Advertising:!1});_self._isExtConsentEnabled&&_self.InitCMPCookieConsent();n!==!0&&_self.DeleteCookies();_self._initComplete=!0},PostIBECookieConsent:function(){_self.UserConsent&&$.ajax({type:"POST",url:"xml/setcookie.aspx?setcookies=&hotelid="+WsVars.HotelID+"&fn="+_self.UserConsent.Functional+"&an="+_self.UserConsent.Analytics+"&ad="+_self.UserConsent.Advertising,dataType:"json",cache:!1,complete:function(n,t){t=="error"&&console.error("error during cookie consent setup");setTimeout(function(){window.location.reload()},3e3)}})},InvokeCMPSyncCookieConsent:function(n){(typeof n=="undefined"||n==null)&&(n=!1);let t=WsVars.CookieConsent.substring(3);if(_self.hasOwnProperty(t+"SyncCookieConsent")){let i=!1,r=_self[t+"SyncCookieConsent"];typeof r=="function"&&(cmpUserConsent=r(n),typeof cmpUserConsent!="undefined"&&(typeof cmpUserConsent.Functional=="undefined"&&(cmpUserConsent.Functional=!1),typeof cmpUserConsent.Analytics=="undefined"&&(cmpUserConsent.Analytics=!1),typeof cmpUserConsent.Advertising=="undefined"&&(cmpUserConsent.Advertising=!1)),i=!cmpUserConsent||_self.UserConsent.Functional!=cmpUserConsent.Functional||_self.UserConsent.Analytics!=cmpUserConsent.Analytics||_self.UserConsent.Advertising!=cmpUserConsent.Advertising,_self.UserConsent=cmpUserConsent);i&&(_self.DeleteCookies(!0),_self._initComplete=!0,_self.PostIBECookieConsent())}else console.warn("SyncCookieConsent handler is not implimented for "+t)},InitCMPCookieConsent:function(){if(WsVars&&WsVars.CookieConsent&&WsVars.CookieConsent.startsWith("CMP")){let n=WsVars.CookieConsent.substring(3);if(_self.InvokeCMPSyncCookieConsent(!0),_self.hasOwnProperty(n+"OnConsentChangeEvent")){let t=_self[n+"OnConsentChangeEvent"];if(typeof t=="string"){let n=t;window.addEventListener(n,function(){_self.InvokeCMPSyncCookieConsent(!1)})}else Array.isArray(t)&&t.forEach(function(n){typeof n=="string"&&window.addEventListener(n,function(){_self.InvokeCMPSyncCookieConsent(!1)})})}else console.warn("OnConsentChangeEvent handler is not implimented for "+n)}},CookieBotOnConsentChangeEvent:["CookiebotOnAccept","CookiebotOnDecline"],CookieBotSyncCookieConsent:function(n){if(typeof Cookiebot=="undefined"||typeof Cookiebot.consent=="undefined"||Cookiebot.consent==null)return typeof Cookiebot=="undefined"&&n===!1&&console.warn("Cookiebot object not found"),_self.UserConsent;return{Necessary:!0,Functional:Cookiebot.consent.preferences,Analytics:Cookiebot.consent.statistics,Advertising:Cookiebot.consent.marketing}},CookieInfoOnConsentChangeEvent:"CookieInformationConsentSubmitted",CookieInfoSyncCookieConsent:function(n){if(typeof CookieInformation=="undefined")return n===!1&&console.warn("CookieInformation object not found"),_self.UserConsent;return{Necessary:!0,Functional:CookieInformation.getConsentGivenFor("cookie_cat_functional"),Analytics:CookieInformation.getConsentGivenFor("cookie_cat_statistic"),Advertising:CookieInformation.getConsentGivenFor("cookie_cat_marketing")}},OneTrustOnConsentChangeEvent:"OneTrustGroupsUpdated",OneTrustSyncCookieConsent:function(n){if(typeof OneTrust=="undefined"||typeof OnetrustActiveGroups=="undefined")return n===!1&&console.warn("OneTrust object not found"),_self.UserConsent;let t=OnetrustActiveGroups.split(",");return{Necessary:!0,Functional:OnetrustActiveGroups.includes("C0003")||OnetrustActiveGroups.includes("3"),Analytics:OnetrustActiveGroups.includes("C0002")||OnetrustActiveGroups.includes("2"),Advertising:OnetrustActiveGroups.includes("C0004")||OnetrustActiveGroups.includes("4")}},SetCookie:function(n,t,i=null,r=false){if(typeof _self=="undefined"&&(_self=this),_self.AllowedCookie(n)){let u=";path=/";if(i!==null){let t=new Date,n=0;i.endsWith("m")?n=i.replace("m","")*6e4:i.endsWith("h")?n=i.replace("h","")*36e5:i.endsWith("d")&&(n=i.replace("d","")*864e5);t.setTime(t.getTime()+n);u+=";expires="+t.toUTCString()}r&&(u+=";secure");document.cookie=n+"="+t+u+";"}},AllowedCookie:function(n){return typeof WsVars.EnableCookieConsent=="undefined"||WsVars.EnableCookieConsent==null||WsVars.EnableCookieConsent==="false"?!0:_self.NecessaryCookie.filter(function(t){return new RegExp("^"+t.toLowerCase()).test(n.toLowerCase())}).length>0?!0:_self.FunctionalCookie.filter(function(t){return new RegExp("^"+t.toLowerCase()).test(n.toLowerCase())}).length>0?_self.UserConsent[_self.CookieType.Functional]:_self.AnalyticsCookie.filter(function(t){return new RegExp("^"+t.toLowerCase()).test(n.toLowerCase())}).length>0||!_self._isExtConsentEnabled&&_self.AnalyticsCookie3rdParty.filter(function(t){return new RegExp("^"+t.toLowerCase()).test(n.toLowerCase())}).length>0?_self.UserConsent[_self.CookieType.Analytics]:_self.AdvertisingCookie.filter(function(t){return new RegExp("^"+t.toLowerCase()).test(n.toLowerCase())}).length>0||!_self._isExtConsentEnabled&&_self.AdvertisingCookie3rdParty.filter(function(t){return new RegExp("^"+t.toLowerCase()).test(n.toLowerCase())}).length>0?_self.UserConsent[_self.CookieType.Advertising]:_self._isExtConsentEnabled?!0:!1},Consented:function(n){return(typeof _self=="undefined"&&(_self=this),_self._initComplete||_self.Init(!0),_self.UserConsent.hasOwnProperty(n))?_self.UserConsent[n]:(console.warn("Invalid consent check for "+n+". Returning false."),!1)},GetUserConsentFromCookie:function(n){let i=document.cookie.match(new RegExp(n+"=.+?(;|$)"));if(i){var t=i[0].toString().substring(n.length+1).trim();t.endsWith(";")&&(t=t.substring(0,t.length-1));let r=atob(t);return JSON.parse(r)}return null},DeleteCookies:function(){var n;if(typeof _self=="undefined"&&(_self=this),typeof WsVars.EnableCookieConsent!="undefined"&&WsVars.EnableCookieConsent!=null&&WsVars.EnableCookieConsent!=="false"){let t=document.cookie.split(";");for(let i=0;i<t.length;i++){let s=t[i].split("="),r=s[0].trim();if(r!=""){let e=!1;for(n=0;n<_self.NecessaryCookie.length;n++){let t=_self.NecessaryCookie[n];if(t.indexOf("*")>-1){let n=new RegExp("^"+t+"$");e=n.test(r)}else t==r&&(e=!0);if(e)break}if(!e){let u=!1;for(n=0;n<_self.AdvertisingCookie.length;n++){let t=_self.AdvertisingCookie[n];if(t.indexOf("*")>-1?u=new RegExp("^"+t+"$").test(r):t==r&&(u=!0),u)break}if(u){typeof _self.UserConsent!="undefined"&&_self.UserConsent!=null&&_self.UserConsent.Advertising||_self.DeleteCookie(r);continue}if(!_self._isExtConsentEnabled){for(u=!1,n=0;n<_self.AdvertisingCookie3rdParty.length;n++){let t=_self.AdvertisingCookie3rdParty[n];if(t.indexOf("*")>-1?u=new RegExp("^"+t+"$").test(r):t==r&&(u=!0),u)break}if(u){typeof _self.UserConsent!="undefined"&&_self.UserConsent!=null&&_self.UserConsent.Advertising||_self.DeleteCookie(r);continue}}let o=!1;for(n=0;n<_self.FunctionalCookie.length;n++){let t=_self.FunctionalCookie[n];if(t.indexOf("*")>-1?o=new RegExp("^"+t+"$").test(r):t==r&&(o=!0),o)break}if(o){typeof _self.UserConsent!="undefined"&&_self.UserConsent!=null&&_self.UserConsent.Functional||_self.DeleteCookie(r);continue}let f=!1;for(n=0;n<_self.AnalyticsCookie.length;n++){let t=_self.AnalyticsCookie[n];if(t.indexOf("*")>-1?f=new RegExp("^"+t+"$").test(r):t==r&&(f=!0),f)break}if(f){typeof _self.UserConsent!="undefined"&&_self.UserConsent!=null&&_self.UserConsent.Analytics||_self.DeleteCookie(r);continue}if(!_self._isExtConsentEnabled){for(f=!1,n=0;n<_self.AnalyticsCookie3rdParty.length;n++){let t=_self.AnalyticsCookie3rdParty[n];if(t.indexOf("*")>-1?f=new RegExp("^"+t+"$").test(r):t==r&&(f=!0),f)break}if(f){typeof _self.UserConsent!="undefined"&&_self.UserConsent!=null&&_self.UserConsent.Analytics||_self.DeleteCookie(r);continue}}_self._isExtConsentEnabled||console.warn("Uncategorised Cookie:"+r+", HotelID:"+WsVars.HotelID+", ChainID:"+WsVars.ChainID+", BrandingID:"+WsVars.BrandingID)}}}}},DeleteCookie:function(n){typeof _self=="undefined"&&(_self=this);document.cookie=_self._tld!=""?n+"=; domain=."+_self._tld+"; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;":n+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;"}},console,URLSearchParams,multiRoomKey,WsDtFm,SHR,toolTipContent;jQuery().ready(function(){WSCCONSENT.Init()});window.console||(console={log:function(){},warn:function(){},error:function(){},time:function(){},timeEnd:function(){}});window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach);String.prototype.startsWith||(String.prototype.startsWith=function(n,t){return t=t||0,this.indexOf(n,t)===t});Number.isNaN||Object.defineProperty(Number,"isNaN",{value:function(n){return n!==n}});String.prototype.repeat||(String.prototype.repeat=function(n){"use strict";var t,i;if(this==null)throw new TypeError("can't convert "+this+" to object");if(t=""+this,n=+n,n!=n&&(n=0),n<0)throw new RangeError("repeat count must be non-negative");if(n==Infinity)throw new RangeError("repeat count must be less than infinity");if(n=Math.floor(n),t.length==0||n==0)return"";if(t.length*n>=268435456)throw new RangeError("repeat count must not overflow maximum string size");for(i=t.length*n,n=Math.floor(Math.log(n)/Math.log(2));n;)t+=t,n--;return t+t.substring(0,i-t.length)});
/*! Improved jQuery.cookie plugin by @mathias: http://mths.be/cookie */
(function(n,t){t.cookie=function(t,i,r){var e="",u,f;if(typeof i!="undefined")r||(r={}),i||(i="",r.expires=-1),r.expires&&(typeof r.expires=="number"||r.expires.toUTCString)&&(u=new Date,typeof r.expires=="number"?u.setTime(+new Date+r.expires*864e5):u=r.expires,e="; expires="+u.toUTCString()),n.cookie=[t,"=",encodeURIComponent(i),e,r.path?"; path="+r.path:"",r.domain?"; domain="+r.domain:"",r.secure?"; secure":""].join("");else return f=n.cookie.match(new RegExp("(?:^|;)\\s?"+t.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")+"=(.*?)(?:;|$)","i")),f&&unescape(f[1])}})(document,jQuery);window.SHRWindsurfer=window.SHRWindsurfer||{};window.SHRWindsurfer.DoingItWrong=function(n){let t=n};window.SHRWindsurfer.Utils=window.SHRWindsurfer.Utils||{};window.SHRWindsurfer.Utils.IsMobile=function(){var n=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(n)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(n.substr(0,4))?!0:window.innerWidth<=576||self.innerWidth<=576?!0:!1};window.SHRWindsurfer.Utils.IsDesktopOrTablet=function(){return!window.SHRWindsurfer.Utils.IsMobile()};window.SHRWindsurfer.Utils.IsInput=function(n){return WsVars&&WsVars.EnableMultiByte?!0:/^[\w\-\s\d\.\,#&]+$/.test(n)};window.SHRWindsurfer.Utils.truthy=function(n){return n===!1?!1:n===!0?!0:typeof n=="undefined"||n===null?!1:(n=new String(n).toLowerCase(),n==="false"||n==="0"||n==="no"||n==="")?!1:!0};window.SHRWindsurfer.Utils.IsValidEmail=function(n){var t;return/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/i.test(n)?(t=n.substring(0,n.lastIndexOf("@")),t.indexOf('"')===-1)?!0:t.length<3?!1:(t=t.substring(1,t.length-1),t=t.split('\\"').join(""),t=t.split("\\\\").join(""),t.indexOf('"')>=0)?!1:t.indexOf("\\")>=0?!1:!0:!1};window.SHRWindsurfer.Utils.CartContainsLoyalty=function(){var t,n;if(WSMAIN==null)return SHRWindsurfer.DoingItWrong("CartContainsLoyalty needs WSMAIN."),!1;if(WSMAIN.Items.length>0)for(t=WSMAIN.Items.length,n=0;n<WSMAIN.Items.length;n++)if(WSMAIN.Items[n].IsMember==!0)return!0;return!1};window.SHRBrand=window.SHRBrand||{};window.SHRBrand.fixColumns=function(){if(WsVars.Step==="2"&&!$("body").hasClass("WsDetailEnhanced")){var n,t=0;$("article .ws-wrap").each(function(){n=$(this);t=n.outerHeight()>t?n.outerHeight():t});$("article .ws-wrap").each(function(){n=$(this);n.css("min-height",t)})}};window.Utils=window.Utils||{};Utils.Format=function(){var n,t;return arguments.length===0?"":(n=arguments[0],n==null||typeof n=="undefined")?"":(t=Array.prototype.slice.call(arguments,1),n.replace(/{(\d+)}/g,function(n,i){return typeof t[i]!="undefined"?t[i]:n}))};Utils.IsMobile=function(){return SHRWindsurfer.DoingItWrong("IsMobile"),SHRWindsurfer.Utils.IsMobile()};Utils.IsDesktopOrTablet=function(){return SHRWindsurfer.Utils.IsDesktopOrTablet()};Utils.IsInput=function(n){return SHRWindsurfer.DoingItWrong("IsInput"),SHRWindsurfer.Utils.IsInput(n)};Utils.TrimSpaces=function(n){return n.trim().replace(/[ ]{2,}/gi," ")};Utils.IsValidEmail=function(n){var i,t;return(SHRWindsurfer.DoingItWrong("IsValidEmail"),i=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/i,!i.test(n))?!1:(t=n.substring(0,n.lastIndexOf("@")),t.indexOf('"')===-1)?!0:t.length<3?!1:(t=t.substring(1,t.length-1),t=t.split('\\"').join(""),t=t.split("\\\\").join(""),t.indexOf('"')>=0)?!1:t.indexOf("\\")>=0?!1:!0};Utils.IsName=function(n){return WsVars&&WsVars.EnableMultiByte==="1"?!0:/^[a-zA-Z]+(([\'\.\-\s][a-zA-Z])?[a-zA-Z]*)*$/.test(n)};Utils.IsValidPhone=function(n){var t=n.replace(/\D/g,"");return t.length>=6&&t.length<=15};Utils.DateFormat=function(n,t){var r=0,o="",s="",u="";if(!(n instanceof Date))return n;var h=n.getFullYear()+"",f=n.getMonth()+1,e=n.getDate(),i={};for(i.y=i.yy=i.yyyy=h,i.M=f,i.d=e,i.MM=f>=10?f:"0"+f,i.dd=e>=10?e:"0"+e;r<t.length;){for(s=t.charAt(r),u="";t.charAt(r)==s&&r<t.length;)u+=t.charAt(r++);o+=i[u]!=null?i[u]:u}return o};Utils.GetDateFormat=function(n,t){const i=2e3,r=12,u=15,f=new Date(i,r-1,u),e=new Intl.DateTimeFormat(n,t).format(f);return e.replace(`${i}`,"YYYY").replace(`${r}`,"MM").replace(`${u}`,"DD")};Utils.GetDate=function(n,t){var f,h,c,e,o,u,r,i,s;if(n instanceof Date)return n;for(e=["/","-","."," "],o="/",u=0;u<e.length;u++)if(t.indexOf(e[u])>=0){o=e[u];break}r=n.split(o);i=t.split(o);try{if(r.length!==3||i.length!==3)throw"length";if(Utils.ArrayFind(i,"yyyy")>=0)f=r[Utils.ArrayFind(i,"yyyy")];else if(Utils.ArrayFind(i,"yy")>=0)f="20"+r[Utils.ArrayFind(i,"yy")];else if(Utils.ArrayFind("y")>=0)f="20"+r[Utils.ArrayFind(i,"y")];else throw"year";if(Utils.ArrayFind(i,"MM")>=0)h=Number(r[Utils.ArrayFind(i,"MM")])-1;else if(Utils.ArrayFind(i,"M")>=0)h=Number(r[Utils.ArrayFind(i,"M")])-1;else throw"month";if(Utils.ArrayFind(i,"dd")>=0)c=r[Utils.ArrayFind(i,"dd")];else if(Utils.ArrayFind(i,"d")>=0)c=r[Utils.ArrayFind(i,"d")];else throw"day";return new Date(f,h,c)}catch(l){return s=new Date,s.setDate(s.getDate()+1),s}};Utils.DateAdd=function(n,t){var i=new Date(n.getTime());return i.setDate(i.getDate()+t),i};Utils.DateDiff=function(n,t){return Math.round((t-n)/864e5)};Utils.MonthAdd=function(n,t){return new Date(n.getFullYear(),n.getMonth()+t,1)};Utils.MonthDiff=function(n,t){return Number(12*(t.getFullYear()-n.getFullYear())+(t.getMonth()-n.getMonth()))};Utils.GetIndexFromY2K=function(n){var t=new Date(2e3,0,1);return Math.round((n-t)/864e5)};Utils.GetDateFromY2K=function(n){return new Date(2e3,0,1+n)};Utils.GetIndex=function(n){var t=n.split("/"),i;return t.length===3?(i=new Date(Number(t[2]),Number(t[0])-1,Number(t[1])),this.GetIndexFromY2K(i)):-1};Utils.ToMMMMYYYY=function(n,t){var i,r;return t=Number(t),WsVars.LangCode!=="undefined"&&WsVars.LangCode!=""&&typeof Intl!="undefined"&&typeof Intl.Locale!="undefined"&&typeof Intl.DateTimeFormat!="undefined"&&Utils.IsLangSupportFormat(n)?(i={month:"long",year:"numeric",calendar:"gregory"},Intl.DateTimeFormat(WsVars.LangCode,i).format(n)):(r=SHR.__("Months","January,February,March,April,May,June,July,August,September,October,November,December").split(","),t==7||t==9||t==10)?n.getFullYear()+""+(n.getMonth()+1)+"":r[n.getMonth()].trim()+" "+n.getFullYear()};Utils.IsLangSupportFormat=function(n){var t=n.getMonth()+1,i=n.toLocaleString(WsVars.LangCode,{month:"long"});return t=t<10?"M0"+t:"M"+t,i!=t&&isNaN(parseInt(n.toLocaleString(WsVars.LangCode,{weekday:"narrow"})))?!0:!1};Utils.ToCust2=function(n){var t=this.GetDateFromY2K(n);return["SUN","MON","TUE","WED","THU","FRI","SAT"][t.getDay()]+" "+t.getDate()+", "+["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"][t.getMonth()]+" "+t.getFullYear()};Utils.GetWsRndAmt=function(n,t){return n+Math.round(t/100)};Utils.GetRndAmt=function(n,t,i){var r,f,u;return typeof i=="undefined"&&(i=!1),r=n.indexOf("~")?n.replace(/~/g,""):n,f=i?"":r,WsVars&&typeof WsVars.WsCurrenciesDecimals!="undefined"&&WsVars.WsCurrenciesDecimals!=null&&(u=WsVars.WsCurrenciesDecimals,u[r]!="undefined"&&u[r]!=null&&u[r].symbol!="undefined"&&u[r].symbol!=null&&(f=u[r].symbol)),(r==null||f==null)&&(f=r!=undefined||r!=""?r:"$"),f+Math.round(t)};Utils.GetDaysInTwoMonths=function(n){var t=new Date(2e3,0,1+n),i=new Date(t.getFullYear(),t.getMonth()+2,1);return Math.round((i-t)/864e5)};Utils.ArrayFind=function(n,t){for(var i=0;i<n.length;i++)if(t==n[i])return i;return-1};Utils.GetUnique=function(n){for(var i={},r=[],t=0,u=n.length;t<u;++t)i.hasOwnProperty(n[t])||(r.push(n[t]),i[n[t]]=1);return r};Utils.ToNumberFormat=function(n,t){var r=t.indexOf("~")>-1?t.replace(/~/g,""):t,o,u,f,e;if(n=Math.round(n*100)/100,o=2,WsVars&&typeof WsVars.WsCurrenciesDecimals!="undefined"&&WsVars.WsCurrenciesDecimals!=null&&(u=WsVars.WsCurrenciesDecimals,u[r]!="undefined"&&u[r]!=null&&u[r].decimals!="undefined"&&u[r].decimals!=null&&(o=u[r].decimals)),o=="0"||WsVars.UseRateRoundingAll==="1")return t!=""&&t.indexOf("~")>-1?Utils.Nformat(Math.round(n)):Math.round(n);var i=n.toString(),s=i.indexOf(".")+1,c=i.length,h=c-s;if(s===0?i+=".00":h===0?i+="00":h===1?i+="0":h>2&&(i=i.substr(0,s+2)),f=i.split("."),f.length===1)return f[0];if(e=t.indexOf("~")>-1?Utils.Nformat(f[0]):f[0],r=="POINTS"&&n%1==0)return e;const l=$("#shopapp").length>0;return l&&WsVars.UseCurrCode==="1"&&WsVars.UseRateRounding==="1"?e:e+"."+f[1]};Utils.Nformat=function(n){var t=n.toString(),i=t.indexOf(".");return t.replace(/\d(?=(?:\d{3})+(?:\.|$))/g,function(n,t){return i<0||t<i?n+",":n})};Utils.GetAmount=function(n,t,i,r,u){var f,e,o;return(typeof r=="undefined"&&(r=!1),typeof u=="undefined"&&(u=!1),f=t.indexOf("~")?t.replace(/~/g,""):t,u)?this.ToNumberFormat(n,t):i=="1"?f==""?this.ToNumberFormat(n,t):this.ToNumberFormat(n,t)+" "+f:(e=r?"":f,WsVars&&typeof WsVars.WsCurrenciesDecimals!="undefined"&&WsVars.WsCurrenciesDecimals!=null&&(o=WsVars.WsCurrenciesDecimals,o[f]!="undefined"&&o[f]!=null&&o[f].symbol!="undefined"&&o[f].symbol!=null&&(e=o[f].symbol)),(f==null||e==null)&&(e=f!=undefined||f!=""?f:"$"),n>=0?e.length<3?e+this.ToNumberFormat(n,t):e+" "+this.ToNumberFormat(n,t):"-"+e+this.ToNumberFormat(-n,t))};Utils.GetActualAmount=function(n,t){return n=n>0?n/100:0,this.ToNumberFormat(n,t)};Utils.GetAmountMod=function(n,t,i){var r=t.indexOf("~")?t.replace(/~/g,""):t,n=n.toString().indexOf(",")>-1?Number(n.toString().replace(/,/g,"")):n,u,f;return i=="1"?this.ToNumberFormat(n,t)+' <span class="ws-csymbol">'+r+"<\/span>":(u=r,WsVars&&typeof WsVars.WsCurrenciesDecimals!="undefined"&&WsVars.WsCurrenciesDecimals!=null&&(f=WsVars.WsCurrenciesDecimals,f[r]!="undefined"&&f[r]!=null&&f[r].symbol!="undefined"&&f[r].symbol!=null&&(u=f[r].symbol)),(r==null||u==null)&&(u=r!=undefined||r!=""?r:"$"),n>=0?u.length<3?u+this.ToNumberFormat(n,t):u+" "+this.ToNumberFormat(n,t):"-"+u+this.ToNumberFormat(n,t))};Utils.GetParam=function(n){for(var t,r=window.location.search.substring(1).split("&"),i=0;i<r.length;i++)if(t=r[i].split("="),t[0].toLowerCase()===n.toLowerCase())return decodeURIComponent(t[1]);return null};Utils.CheckSum=function(n){for(var i=0,r=0,t=n.length;t>=1;)r++,t--,i+=r%2>0?parseInt(n.charAt(t)):2*parseInt(n.charAt(t))>9?2*parseInt(n.charAt(t))-9:2*parseInt(n.charAt(t));return i%10==0};Utils.GetCardID=function(n){var t=n.length;if(t<12)return 0;var f=[5018,5020,5038,5612,5893,6304,6759,6761,6762,6763,0604,6390,5010,5011,5012,5013,5014,5015,5016,5017,502,503,504,505,506,507,508,6012,6013,6014,6015,6016,6017,6018,6019,602,603,604,605,6060,677,675,674,673,672,671,670,6760,6761,6762,6763,6764,6765,6766,6768,6769],o=parseInt(n.charAt(0)),i=parseInt(n.substring(0,2)),u=parseInt(n.substring(0,3)),r=parseInt(n.substring(0,4)),e=parseInt(n.substring(0,6));if(this.CheckSum(n)){if((t==16||t==13||t==19)&&o==4)return 145;if(t==16&&(i>=51&&i<=55||r>=2221&&r<=2720))return 92;if(t==15&&(i==34||i==37))return 15;if((t==16||t==19)&&(r==6011||i==65||e>=622126&&e<=622925||u>=644&&u<=649))return 63;if(t==14&&u>=300&&u<=305)return 44;if(t==14&&(i==36||i==38||i==39)||t==16&&(i==55||i==54))return 62;if(t==16&&r>=3528&&r<=3589)return 83;if(t>=16&&t<=19&&i==62)return 149;if(t>=12&&t<=19&&(jQuery.inArray(r,f)!==-1||jQuery.inArray(u,f)!==-1))return 150;if(t==16&&(r==5019||r==4571))return[154]}else{if(t>=16&&t<=19&&i==62)return 149;if(t>=12&&t<=19&&(jQuery.inArray(r,f)!==-1||jQuery.inArray(u,f)!==-1))return 150}return 0};Utils.CardType=function(n){return n==145?"Visa":n==92?"Mastercard":n==15?"American Express":n==63?"Discover":n==44?"Carte Blanche":n==62?"Diners Club":n==83?"JCB":n==149?"Union Pay":n==150?"Maestro":n==154?"Dankort":""};Utils.GetCards=function(n){var t=n.length;if(t<12)return[];var f=[5018,5020,5038,5612,5893,6304,6759,6761,6762,6763,0604,6390,5010,5011,5012,5013,5014,5015,5016,5017,502,503,504,505,506,507,508,6012,6013,6014,6015,6016,6017,6018,6019,602,603,604,605,6060,677,675,674,673,672,671,670,6760,6761,6762,6763,6764,6765,6766,6768,6769],o=parseInt(n.charAt(0)),i=parseInt(n.substring(0,2)),u=parseInt(n.substring(0,3)),r=parseInt(n.substring(0,4)),e=parseInt(n.substring(0,6));if(this.CheckSum(n)){if((t==16||t==13||t==19)&&o==4)return[145];if(t==16&&(i>=51&&i<=55||r>=2221&&r<=2720))return[92];if(t==15&&(i==34||i==37))return[15];if((t==16||t==19)&&i==62)return[63,149];if(t>=16&&t<=19&&i==62)return[149];if((t==16||t==19)&&(r==6011||i==65||e>=622126&&e<=622925||u>=644&&u<=649))return[63];if(t==14&&u>=300&&u<=305)return[44];if(t==14&&(i==36||i==38||i==39))return[62];if(t==16&&r>=3528&&r<=3589)return[83];if(t>=12&&t<=19&&(jQuery.inArray(r,f)!==-1||jQuery.inArray(u,f)!==-1))return[150];if(t==16&&(r==5019||r==4571))return[154]}else{if(t>=16&&t<=19&&i==62)return[149];if(t>=12&&t<=19&&(jQuery.inArray(r,f)!==-1||jQuery.inArray(u,f)!==-1))return[150]}return[]};Utils.ToMDYYYYFromIndex=function(n,t){var i=this.GetDateFromY2K(n);return t==1?i.getMonth()+1+"/"+i.getDate()+"/"+i.getFullYear():t==7||t==9||t==10?i.getFullYear()+"-"+(i.getMonth()+1)+"-"+i.getDate():i.getDate()+"/"+(i.getMonth()+1)+"/"+i.getFullYear()};Utils.ToMMMDFromIndex=function(n,t){var i=this.GetDateFromY2K(n);return this.ToMMMD(i,t)};Utils.ToMMMD=function(n,t){var r,i;return WsVars.LangCode!=="undefined"&&WsVars.LangCode!=""&&typeof Intl!="undefined"&&typeof Intl.Locale!="undefined"&&typeof Intl.DateTimeFormat!="undefined"&&Utils.IsLangSupportFormat(n)?(r=t==7||t==9||t==10?{month:"short",day:"numeric",year:"numeric",calendar:"gregory"}:{month:"short",day:"numeric"},Intl.DateTimeFormat(WsVars.LangCode,r).format(n)):(i=SHR.__("MonthsAbbr","Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec").split(","),t==1)?i[n.getMonth()].trim()+" "+n.getDate():t==7||t==9||t==10?n.getFullYear()+""+(n.getMonth()+1)+""+n.getDate()+"":n.getDate()+" "+i[n.getMonth()].trim()};Utils.ToMMMDYYYY=function(n,t){var r,i;return WsVars.LangCode!=="undefined"&&WsVars.LangCode!=""&&typeof Intl!="undefined"&&typeof Intl.Locale!="undefined"&&typeof Intl.DateTimeFormat!="undefined"&&Utils.IsLangSupportFormat(n)?(r={month:"short",day:"numeric",year:"numeric",calendar:"gregory"},Intl.DateTimeFormat(WsVars.LangCode,r).format(n)):(i=SHR.__("MonthsAbbr","Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec").split(","),t==1)?i[n.getMonth()].trim()+" "+n.getDate()+", "+n.getFullYear():t==7||t==9||t==10?n.getFullYear()+""+(n.getMonth()+1)+""+n.getDate()+"":n.getDate()+" "+i[n.getMonth()].trim()+", "+n.getFullYear()};Utils.ToCustom0=function(n,t,i){var e=n+t,r=Utils.GetDateFromY2K(n),o=Utils.GetDateFromY2K(e),u,f;return WsVars.LangCode!=="undefined"&&WsVars.LangCode!=""&&typeof Intl!="undefined"&&typeof Intl.Locale!="undefined"&&typeof Intl.DateTimeFormat!="undefined"&&Utils.IsLangSupportFormat(r)?(u={weekday:"long",month:"short",day:"numeric",year:"numeric",calendar:"gregory"},n==e)?Intl.DateTimeFormat(WsVars.LangCode,u).format(r):"<span>"+Intl.DateTimeFormat(WsVars.LangCode,u).format(r)+"<\/span> &mdash; <span>"+Intl.DateTimeFormat(WsVars.LangCode,u).format(o)+"<\/span>":(f=SHR.__("Weekdays","Sunday, Monday, Tuesday, Wednesday, Thursday, Friday, Saturday").split(","),n==e)?f[r.getDay()].trim()+", "+Utils.ToMMMDYYYY(r,i):"<span>"+f[r.getDay()].trim()+", "+Utils.ToMMMDYYYY(r,i)+"<\/span> &mdash; <span>"+f[o.getDay()].trim()+", "+Utils.ToMMMDYYYY(o,i)+"<\/span>"};Utils.ToCustom1=function(n,t,i){var e=n+t,r=Utils.GetDateFromY2K(n),o=Utils.GetDateFromY2K(e),u,f;return WsVars.LangCode!=="undefined"&&WsVars.LangCode!=""&&typeof Intl!="undefined"&&typeof Intl.Locale!="undefined"&&typeof Intl.DateTimeFormat!="undefined"&&Utils.IsLangSupportFormat(r)?(u=i==7||i==9||i==10?{weekday:"long",month:"short",day:"numeric",year:"numeric",calendar:"gregory"}:{weekday:"long",month:"short",day:"numeric"},n==e)?Intl.DateTimeFormat(WsVars.LangCode,u).format(r):"<span>"+Intl.DateTimeFormat(WsVars.LangCode,u).format(r)+" &mdash; "+Intl.DateTimeFormat(WsVars.LangCode,u).format(o)+"<\/span>":(f=SHR.__("Weekdays","Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday").split(","),n==e)?f[r.getDay()].trim()+", "+Utils.ToMMMD(r,i):f[r.getDay()].trim()+", "+Utils.ToMMMD(r,i)+" &mdash; "+f[o.getDay()].trim()+", "+Utils.ToMMMD(o,i)};Utils.ToCustom2=function(n,t,i){var e=n+t,r=Utils.GetDateFromY2K(n),o=Utils.GetDateFromY2K(e),s="Night",u,f;return t>1&&(s=SHR.__("Nights","Nights")),WsVars.LangCode!=="undefined"&&WsVars.LangCode!=""&&typeof Intl!="undefined"&&typeof Intl.Locale!="undefined"&&typeof Intl.DateTimeFormat!="undefined"&&Utils.IsLangSupportFormat(r)?(u=i==7||i==9||i==10?{weekday:"short",month:"short",day:"numeric",year:"numeric",calendar:"gregory"}:{weekday:"short",month:"short",day:"numeric"},n==e)?Intl.DateTimeFormat(WsVars.LangCode,u).format(r):Intl.DateTimeFormat(WsVars.LangCode,u).format(r)+" - "+Intl.DateTimeFormat(WsVars.LangCode,u).format(o)+", "+t+" "+s:(f=SHR.__("WeekdaysAbbr","Sun,Mon,Tue,Wed,Thu,Fri,Sat").split(","),n==e)?f[r.getDay()].trim()+", "+Utils.ToMMMD(r,i):f[r.getDay()].trim()+", "+Utils.ToMMMD(r,i)+" - "+f[o.getDay()].trim()+", "+Utils.ToMMMD(o,i)+", "+t+s};Utils.GetSvcDateTime=function(n,t){var u="&nbsp;",r;try{if(r=t[0],u=this.ToCustom0(r.Dt,0,n),r.Tm!=="0000"){var f="AM",i=r.Tm.substr(0,2),e=r.Tm.substr(2,2);i=Number(i);i>12?(f="PM",i=i-12):i===12&&(f="PM");u+=this.Format(", {0}:{1} {2}",i,e,f)}}catch(o){}return u};Utils.GetDist=function(n,t,i,r){if(Math.abs(i-n)>1)return 99;var u=(i-n)*Math.PI/180,f=(r-t)*Math.PI/180,e=Math.sin(u/2)*Math.sin(u/2)+Math.cos(n*Math.PI/180)*Math.cos(i*Math.PI/180)*Math.sin(f/2)*Math.sin(f/2),o=2*Math.atan2(Math.sqrt(e),Math.sqrt(1-e)),s=6371/1.61*o;return Math.round(s)};Utils.GetCityState=function(n,t,i,r){return r.length==0?Utils.GetGeoName(t,i,r):Utils.HasCountry(i,r)?Utils.GetGeoName(t,i,r):""};Utils.HasCountry=function(n,t){for(var r,u,f,i=0;i<n.length;i++)for(r=0;r<n[i].types.length;r++)if(u=n[i].types[r],u=="country"&&(f=n[i].short_name.trim(),t.indexOf(f)>-1))return!0;return!1};Utils.GetGeoName=function(n,t,i){var r,h;if(t.length==0)return"";if(t.length==1)return t[0].long_name;var i=["US","CA","MX"],o="",s="",u="",e="",f="",c="",l="";for(r=0;r<t.length;r++)for(h=0;h<t[r].types.length;h++)if(f=t[r].types[h],f=="locality")o=t[r].short_name.trim();else if(f=="administrative_area_level_1")s=t[r].short_name.trim();else if(f=="country")u=t[r].short_name.trim(),u=="GB"&&(u="UK");else if(f=="establishment")e=t[r].short_name.trim();else if(f=="premise")e=t[r].short_name.trim();else if(f=="street_number"){c=t[r].short_name.trim();break}else if(f=="route"){l=t[r].short_name.trim();break}if(c.length>0||l.length>0)return"";if(e.length>0)return s.length>0&&Utils.ArrayFind(i,u)>=0?e+", "+s:u.length>0?e+", "+u:e;if(o.length>0){if(s.length>0&&Utils.ArrayFind(i,u)>=0)return o+", "+s;if(u.length>0)return o+", "+u}return o};Utils.GetCityState2=function(n,t){return t.length==0?Utils.GetGeoName2(n,t):Utils.HasCountry2(n,t)?Utils.GetGeoName2(n,t):""};Utils.HasCountry2=function(n,t){var i=n.countryRegion;return t.indexOf(i)>-1?!0:!1};Utils.GetGeoName2=function(n){if(n.length==0)return"";if(n.length==1)return n[0].formattedAddress;var t="",i="",r="",u="",f="";if(n.addressLine!=null&&(f=n.addressLine),n.landmark!=null&&(u=n.landmark),t=n.locality,i=n.adminDistrict,r=n.countryRegion,f.length>0)return"";if(u.length>0)return i.length>0?u+", "+i:r.length>0?u+", "+r:u;if(t.length>0){if(i.length>0)return t+", "+i;if(r.length>0)return t+", "+r}return t};Utils.LangMap={"14":{name:"Arabic",locale:"ar_SA",lcid:"ar-sa",lang:"ar"},"7":{name:"Chinese (simplified)",locale:"zh_CN",lcid:"zh-cn",lang:"zh-cn"},"10":{name:"Chinese (traditional)",locale:"zh_TW",lcid:"zh-tw",lang:"zh-tw"},"12":{name:"Czech",locale:"cs_CZ",lcid:"cs",lang:"cs"},"17":{name:"Dutch",locale:"nl_NL",lcid:"nl-nl",lang:"nl"},"1":{name:"English",locale:"en_US",lcid:"en-us",lang:"en"},"6":{name:"English (GB)",locale:"en_GB",lcid:"en-gb",lang:"en"},"2":{name:"French",locale:"fr_FR",lcid:"fr-fr",lang:"fr"},"4":{name:"German",locale:"de_DE",lcid:"de-de",lang:"de"},"15":{name:"Greek",locale:"el_GR",lcid:"el",lang:"el"},"16":{name:"Hindi",locale:"hi_IN",lcid:"hi",lang:"hi"},"18":{name:"Hungarian",locale:"hu_HU",lcid:"hu",lang:"hu"},"22":{name:"Indonesian",locale:"id_ID",lcid:"id-ID",lang:"id"},"5":{name:"Italian",locale:"it_IT",lcid:"it-it",lang:"it"},"9":{name:"Japanese",locale:"ja_JP",lcid:"ja",lang:"ja"},"21":{name:"Korean",locale:"ko",lcid:"ko",lang:"ko"},"11":{name:"Portuguese",locale:"pt_PT",lcid:"pt-pt",lang:"pt"},"19":{name:"Romanian",locale:"ro_RO",lcid:"ro",lang:"ro"},"8":{name:"Russian",locale:"ru_RU",lcid:"ru",lang:"ru"},"20":{name:"Slovak",locale:"sk_SK",lcid:"sk",lang:"sk"},"3":{name:"Spanish",locale:"es_ES",lcid:"es-es",lang:"es"},"13":{name:"Swedish",locale:"sv_SE",lcid:"sv-se",lang:"sv"}};Utils.LangIDToLocale=function(){var t="1",n="locale",i;return WsVars&&WsVars.hasOwnProperty("LangID")&&(t=WsVars.LangID.toString()),arguments.length>0&&(t=arguments[0].toString()),arguments.length>1&&(n=arguments[1].toString()),Utils.LangMap.hasOwnProperty(t)||(t="1"),i=Utils.LangMap[t],n=n.toString(),i.hasOwnProperty(n)||(n="locale"),i[n]};Utils.IsArrayEqual=function(n,t){if(n==null&&t==null)return!0;if(n!=null&&t==null||t!=null&&n==null||n.length!=t.length)return!1;n=n.sort();t=t.sort();for(let i=0;i<n.length;i++)if(n[i]!=t[i])return!1;return!0};Utils.TopLevelDomain=function(){let n,t,i="__test_get_top_level_domain__=cookie",r=document.location.hostname.split(".");for(n=r.length-1;n>=0;n--)if(t=r.slice(n).join("."),document.cookie=i+";domain=."+t+";max-age=5",document.cookie.indexOf(i)>-1)return document.cookie=i.split("=")[0]+"=;domain=."+t+";expires=Thu, 01 Jan 1970 00:00:01 GMT;",t};Array.prototype.findIndex||Object.defineProperty(Array.prototype,"findIndex",{value:function(n){var i,r,u,t,f;if(this==null)throw new TypeError('"this" is null or not defined');if(i=Object(this),r=i.length>>>0,typeof n!="function")throw new TypeError("predicate must be a function");for(u=arguments[1],t=0;t<r;){if(f=i[t],n.call(u,f,t,i))return t;t++}return-1},configurable:!0,writable:!0});
/*! (C) Andrea Giammarchi - Mit Style License */
URLSearchParams=URLSearchParams||function(){"use strict";function r(n){var s,c,r,l,f,h,o=Object.create(null);if(this[t]=o,n)if(typeof n=="string")for(n.charAt(0)==="?"&&(n=n.slice(1)),l=n.split("&"),f=0,h=l.length;f<h;f++)r=l[f],s=r.indexOf("="),-1<s?i(o,u(r.slice(0,s)),u(r.slice(s+1))):r.length&&i(o,u(r),"");else if(e(n))for(f=0,h=n.length;f<h;f++)r=n[f],i(o,r[0],r[1]);else if(n.forEach)n.forEach(w,o);else for(c in n)i(o,c,n[c])}function w(n,t){i(this,t,n)}function i(n,t,i){var r=e(i)?i.join(","):i;t in n?n[t].push(r):n[t]=[r]}function u(n){return decodeURIComponent(n.replace(v," "))}function o(n){return encodeURIComponent(n).replace(a,p)}var e=Array.isArray,n=r.prototype,a=/[!'\(\)~]|%20|%00/g,v=/\+/g,y={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"},p=function(n){return y[n]},t="__URLSearchParams__:"+Math.random();n.append=function(n,r){i(this[t],n,r)};n["delete"]=function(n){delete this[t][n]};n.get=function(n){var i=this[t];return n in i?i[n][0]:null};n.getAll=function(n){var i=this[t];return n in i?i[n].slice(0):[]};n.has=function(n){return n in this[t]};n.set=function(n,i){this[t][n]=[""+i]};n.forEach=function(n,i){var r=this[t];Object.getOwnPropertyNames(r).forEach(function(t){r[t].forEach(function(r){n.call(i,r,t,this)},this)},this)};n.toJSON=function(){return{}};n.toString=function(){var u=this[t],f=[],n,i,e,r;for(i in u)for(e=o(i),n=0,r=u[i];n<r.length;n++)f.push(e+"="+o(r[n]));return f.join("&")};var s=Object.defineProperty,f=Object.getOwnPropertyDescriptor,b=function(t){function i(i,r){n.append.call(this,i,r);i=this.toString();t.set.call(this._usp,i?"?"+i:"")}function r(i){n["delete"].call(this,i);i=this.toString();t.set.call(this._usp,i?"?"+i:"")}function u(i,r){n.set.call(this,i,r);i=this.toString();t.set.call(this._usp,i?"?"+i:"")}return function(n,t){return n.append=i,n["delete"]=r,n.set=u,s(n,"_usp",{configurable:!0,writable:!0,value:t})}},k=function(n){return function(t,i){return s(t,"_searchParams",{configurable:!0,writable:!0,value:n(i,t)}),i}},h=function(t){var i=t.append;t.append=n.append;r.call(t,t._usp.search.slice(1));t.append=i},c=function(n,t){if(!(n instanceof t))throw new TypeError("'searchParams' accessed on an object that does not implement interface "+t.name);},l=function(n){var i=n.prototype,o=f(i,"searchParams"),e=f(i,"href"),t=f(i,"search"),u;!o&&t&&t.set&&(u=k(b(t)),Object.defineProperties(i,{href:{get:function(){return e.get.call(this)},set:function(n){var t=this._searchParams;e.set.call(this,n);t&&h(t)}},search:{get:function(){return t.get.call(this)},set:function(n){var i=this._searchParams;t.set.call(this,n);i&&h(i)}},searchParams:{get:function(){return c(this,n),this._searchParams||u(this,new r(this.search.slice(1)))},set:function(t){c(this,n);u(this,t)}}}))};return l(HTMLAnchorElement),/^function|object$/.test(typeof URL)&&URL.prototype&&l(URL),r}(),function(n){var t=function(){try{return!!Symbol.iterator}catch(n){return!1}}();"forEach"in n||(n.forEach=function(n,t){var i=Object.create(null);this.toString().replace(/=[\s\S]*?(?:&|$)/g,"=").split("=").forEach(function(r){!r.length||r in i||(i[r]=this.getAll(r)).forEach(function(i){n.call(t,i,r,this)},this)},this)});"keys"in n||(n.keys=function(){var i=[],n;return this.forEach(function(n,t){i.push(t)}),n={next:function(){var n=i.shift();return{done:n===undefined,value:n}}},t&&(n[Symbol.iterator]=function(){return n}),n});"values"in n||(n.values=function(){var i=[],n;return this.forEach(function(n){i.push(n)}),n={next:function(){var n=i.shift();return{done:n===undefined,value:n}}},t&&(n[Symbol.iterator]=function(){return n}),n});"entries"in n||(n.entries=function(){var i=[],n;return this.forEach(function(n,t){i.push([t,n])}),n={next:function(){var n=i.shift();return{done:n===undefined,value:n}}},t&&(n[Symbol.iterator]=function(){return n}),n});!t||Symbol.iterator in n||(n[Symbol.iterator]=n.entries);"sort"in n||(n.sort=function(){for(var e=this.entries(),r=e.next(),o=r.done,i=[],u=Object.create(null),n,t,f;!o;)f=r.value,t=f[0],i.push(t),t in u||(u[t]=[]),u[t].push(f[1]),r=e.next(),o=r.done;for(i.sort(),n=0;n<i.length;n++)this["delete"](i[n]);for(n=0;n<i.length;n++)t=i[n],this.append(t,u[t].shift())})}(URLSearchParams.prototype);jQuery().ready(function(n){n("#buMyResv").click(function(){return n("#MyRetrieve_dvWsRetrieve").toggleClass("ws-show-this"),WsVars.IBESkinVer=="3"&&n("#MyRetrieve_dvWsRetrieve").toggleClass("ws-hide-action"),n("#txRetrLastName").focus(),!1});n(".buWsGetResvClose").click(function(){return WsVars.IBESkinVer=="3"&&(n("#MyRetrieve_dvWsRetrieve").addClass("ws-hide-action"),n("#buMyResv").focus()),n("#MyRetrieve_dvWsRetrieve").removeClass("ws-show-this"),!1});n(".buWsGetResv").click(function(){if(n("#fmRetrieve input").removeClass("ws-error-form"),n("#txRetrLastName").val().length==0)return n("#txRetrLastName + p.ws-error").html(SHR.__("EnterLastNameBooked")),n("#txRetrLastName").addClass("ws-error-form").focus(),!1;if(n("#txRetrConfirm").val().length==0)return n("#txRetrConfirm + p.ws-error").html(SHR.__("EnterConfirmNumber")),n("#txRetrConfirm").addClass("ws-error-form").focus(),!1;var t={hotelID:WsVars.HotelID,hgID:WsVars.HgID,langID:WsVars.LangID,currID:WsVars.CurrencyId,crsID:n("#txRetrConfirm").val(),lname:n("#txRetrLastName").val(),inAction:"buGetResv"};return n("body").css({cursor:"wait"}),n.ajax({type:"POST",url:"change.aspx",data:t,dataType:"json",success:function(t){var i;n("body").css({cursor:"auto"});var u=t.Msg,r=t.ResvID,f=t.resvKey,h=t.LangID,e=t.LangCode,o=t.HotelID,s=t.Curr;u.length>0?(n("#txRetrConfirm + p.ws-error").html(u),n("#txRetrConfirm").addClass("ws-error-form").focus()):(t.ResvID.trim()!=n("#txRetrConfirm").val().trim()&&(r=Utils.Format("{0}-{1}",r,n("#txRetrConfirm").val())),i=Utils.Format("confirm.aspx?ret=1&hotelid={0}&lang={1}&crsid={2}&resvKey={3}&currID={4}",o,e,r,f,s),n("#hgID").length>0?i=i+"&hgID="+n("#hgID").val():WsVars.HgID!="0"&&(i=i+"&hgID="+WsVars.HgID),location.href=i)},error:function(){n("body").css({cursor:"auto"})}}),!1});n("#fmRetrieve").submit(function(){return n(".buWsGetResv").click(),!1});WsVars.IBESkinVer=="3"&&n("#buRetrieveSubmit").addClass("ws-hide-action");n("#txRetrConfirm").on("blur",function(){this.value=this.value.toUpperCase()})});var isNewGuest=!0,cntr=0,loadercntr=0;CartTypeEnum=Object.freeze({Stored:"Stored",Confirmed:"Confirmed",Abandoned:"Abandoned",Recovered:"Recovered",Modified:"Modified",Removed:"Removed"});multiRoomKey=``;WsDtFm=WsDtFm||{};$(document).ready(function(){var n=n||null,t=t||"",r=function(n){var t=Utils.Format("xml/setloyalty.aspx?logout=1&hgID={0}&hotelID={1}&lang={2}&currID={3}",WsVars.HgID,WsVars.HotelID,WsVars.LangCode,WsVars.CurrencyId);$("body").css({cursor:"wait"});$.ajax({type:"GET",url:t,dataType:"json",cache:!1,success:function(){n===undefined||n==null?reloadPage():location=n},error:function(){$("body").css({cursor:"auto"})}})},i;$("#MyHeading_buConsent").click(function(n){return n.preventDefault(),Utils.IsValidEmail($("[id$=txEmailId]").val())?SetAbandonCartConsent($("[id$=txEmailId]").val(),"CartRecovery",1):$("#MyHeading_spErrorMsg").html(WsMulti.InvalidEmailAddress),"txEmailId"});$("[id$=fmUnivConsent]").submit(function(){return $("[id$=MyHeading_buConsent]").click(),!1});$("#txEmailVerify,#txPasswordVerify").bind("paste",function(n){n.preventDefault()});$("#buWsProgramMember").click(function(){return $("#ulWsProgramMember").toggle("fast"),!1});$("#buWsProgramLogin").click(function(n){n.preventDefault();$.magnificPopup.open({items:{src:$("#buWsProgramLogin").attr("href"),type:"inline"},callbacks:{close:function(){if(WsVars.MemberProgram==="7"){var n=this;$dropin=$("#btBtreedropinHeader");$dropin.empty()}return $.magnificPopup.proto.close.call(this),!1}},midClick:!0})});$("#buWsProgramLogout, #buWsDelegAuthLogout").click(function(){var i=0,n,t,u;if(WsVars.CartItems!=null&&WsVars.CartItems.length>0)for(n=0;n<WsVars.CartItems.length;n++)WsVars.CartItems[n].IsMember===!0&&i++;return t=$(this).attr("data-extlogouturl"),u=$(this).attr("href"),UpdateUrlParams({selectedPackage:null,selectedRate:null}).then(function(){i===0?r(t):($("#MyHeading_buSignOutContYes").attr("data-extlogouturl",t),$.magnificPopup.open({items:{src:u},type:"inline",midClick:!0}))}).catch(n=>displayError("UpdateUrlParams() Error:"+n)),!1});$("#MyHeading_buSignOutContYes").click(function(){return r($(this).attr("data-extlogouturl")),!1});$("#MyHeading_buSignOutContNo").click(function(){return $.magnificPopup.close(),!1});$("#buWsLanguage").click(function(){return $("#MyHeading_ulWsLanguage").toggle("fast"),$(this).attr("aria-expanded","true"),!1});$("#MyHeading_ulWsLanguage a").click(function(){var n=$(this).attr("ref"),t=$(this).attr("lang");return typeof WsVars!="undefined"&&WsVars.LangID==n?!1:(WsLangHref(n,t),!1)});$("#buWsCurrency").click(function(){return $("#MyHeading_ulWsCurrency").toggle("fast"),$(this).attr("aria-expanded","true"),!1});$(".ws-shouldlogin").on("click",function(n){return n.preventDefault(),$link=$("#buWsDelegAuthLogin:first"),$link[0].click(),!1});$("#MyHeading_ulWsCurrency a").click(function(){$("#MyHeading_ulWsCurrency").hide("fast");$("#MyHeading_ulWsCurrency a").removeClass("ws-active");$(this).addClass("ws-active");var t=$(this).html(),i=!1,n=$(this).attr("currID"),r=!0;return n!=undefined&&n>0&&(WSCCONSENT.SetCookie("WsDispCurr_"+WsVars.HotelID,t),WsVars.CurrencyId!=n&&(WsVars.CurrencyId=n,r=!1,UpdateUrlParams({currID:WsVars.CurrencyId,selectedPackage:null,selectedRate:null,selectedGroup:null}),location.reload(!0))),r&&(i=WsShowRates2(t)),i&&$("#MyHeading_txWsCurrency").html('<span class="ws-icon" data-icon="&#xf13a;" aria-hidden="true"><\/span>'+t),(WsVars.IsPaymentGateway==="1"||WsVars.GuestLoyalty!=""||$("#MyHeading_buMember").length>0)&&ShowBaseOrSelectedCurrencyPrices(),!1});$("#fmUnivSignIn").submit(function(){return $("#MyHeading_buSignIn").click(),!1});$("#MyHeading_buSignIn").click(function(n){var i,t;if(n.preventDefault(),i="",$("#txUnivLoginPwd").is(":visible")&&(i=$("#txUnivLoginPwd").val()),t={hotelID:WsVars.HotelID,langID:WsVars.LangID,currID:WsVars.CurrencyId,usn:$("#txUnivLoginUsn").val(),pwd:i,rmbme:$("#chkUnivRememberMe").prop("checked")},$("#txUnivLoginUsn,#txUnivLoginPwd").removeClass("ws-error-form"),$("#msgUnivLogin").html(""),WsVars.MemberProgram==="4"){if($("#txUnivLoginUsn").val().length<3)return $("#msgUnivLogin").html(WsMulti.EnterLoyaltyLogin),$("#txUnivLoginUsn").addClass("ws-error-form").focus(),!1;WsVars.Step==="4"&&$("#txLastName").length>0&&(t.Email=$("#txEmail").val(),t.Title=$("#cbSalutation").val(),t.FName=$("#txFirstName").val(),t.LName=$("#txLastName").val(),t.Addr1=$("#txAddress1").val(),t.City=$("#txCity").val(),t.St=$("#txState").val(),t.StCode=$("#cbState").val(),t.Country=$("#cbCountry").val(),t.Zip=$("#txZip").val(),t.Phone=$("#txPhone").val(),t.Optin=$("#chOptin").prop("checked")==!0?"1":"0")}else if((Number(SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramConfig2)&SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramConfig2Enum.LoginUsingUserNameForLoyaltyAPI)>0||(Number(SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramConfig2)&SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramConfig2Enum.LoginUsingExternalLoyaltyMemberTableByPin)>0){if($("#txUnivLoginUsn").val()===undefined||$("#txUnivLoginUsn").val()===null||$("#txUnivLoginUsn").val().length<=0)return $("#msgUnivLogin").html(WsMulti.EnterLoyaltyLogin),$("#txUnivLoginUsn").addClass("ws-error-form").focus(),!1}else if((Number(SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramConfig2)&SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramConfig2Enum.LoginUsingExternalLoyaltyMemberTableByDOB)>0){if($("[id$=cbBirthYY]").length>0&&(t.dobY=$("[id$=cbBirthYY]").val()),$("[id$=cbBirthMM]").length>0&&(t.dobM=$("[id$=cbBirthMM]").val()),$("[id$=cbBirthDD]").length>0&&(t.dobD=$("[id$=cbBirthDD]").val()),$("#txUnivLoginUsn").val()===undefined||$("#txUnivLoginUsn").val()===null||$("#txUnivLoginUsn").val().length<=0)return $("#msgUnivLogin").html(WsMulti.PlayerID),$("#txUnivLoginUsn").addClass("ws-error-form").focus(),!1;if($("#divDOB").html.length>0&&($("[id$=cbBirthYY]").val()===undefined||$("[id$=cbBirthYY]").val()===null||$("[id$=cbBirthYY]").val()===""||$("[id$=cbBirthMM]").val()===undefined||$("[id$=cbBirthMM]").val()===null||$("[id$=cbBirthMM]").val()===""||$("[id$=cbBirthDD]").val()===undefined||$("[id$=cbBirthDD]").val()===null||$("[id$=cbBirthDD]").val()===""))return $("#msgUnivLogin").html(WsMulti.EnterDob),!1}else if(!Utils.IsValidEmail($("#txUnivLoginUsn").val()))return $("#msgUnivLogin").html(WsMulti.EnterEmailAddress),$("#txUnivLoginUsn").addClass("ws-error-form").focus(),!1;return $("#txUnivLoginPwd").is(":visible")&&$("#txUnivLoginPwd").val().length===0?($("#msgUnivLogin").html(WsMulti.EnterPassword),$("#txUnivLoginPwd").addClass("ws-error-form").focus(),!1):($(".mfp-content").css({cursor:"wait"}),$.ajax({type:"POST",url:"xml/getloyalty.aspx",data:t,dataType:"json",success:function(n){if($(".mfp-content").css({cursor:"auto"}),n.Msg!=null){$("#msgUnivLogin").html(n.Msg);$("#txUnivLoginUsn,#txUnivLoginPwd").addClass("ws-error-form").focus();return}if(SHR.TrkLib.Login({}),WsVars.MemberProgram==="4")WsVars.Step==="2"?location.reload(!0):WsVars.Step==="3"||WsVars.Step==="4"?WsVars.CartItems.length>0?location.reload(!0):location.href=Utils.Format("promos.aspx?hotelID={0}&lang={1}&hgID={2}&currID={3}",WsVars.HotelID,WsVars.LangCode,WsVars.HgID,WsVars.CurrencyId):WsVars.Step==="1"&&WSMORE.Promo.length>0?$("#buUpdateResults").click():location.href=Utils.Format("promos.aspx?hotelID={0}&lang={1}&hgID={2}&currID={3}",WsVars.HotelID,WsVars.LangCode,WsVars.HgID,WsVars.CurrencyId);else if(SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramConfig!==SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramConfigEnum.None)location.reload(!0);else{var t=Utils.GetParam("showQualifiedRates");typeof t!="undefined"&&t!==null?t.toLowerCase()==="true"&&(t="&showQualifiedRates=true"):(t=JSON.parse($.cookie("showQualifiedRate_"+WsVars.HotelID)),t=typeof t!="undefined"&&t!==null&&t===!0?"&showQualifiedRates=true":"");location.href=Utils.Format("index.aspx?hotelID={0}&lang={1}&hgID={2}&ts={3}&currID={4}{5}",WsVars.HotelID,WsVars.LangCode,WsVars.HgID,(new Date).getTime(),WsVars.CurrencyId,t)}},error:function(){$(".mfp-content").css({cursor:"auto"})}}),!1)});$("[id$=fmSignInHeaderFull]").submit(function(){return $("[id$=buSignInHeaderFull]").click(),!1});$("[id$=fmSignUpHeaderFull]").submit(function(){return $("[id$=buSignUpHeaderFull]").click(),!1});$("[id$=fmChangePasswordHeaderFull]").submit(function(){return $("[id$=buChangePasswordHeaderFull]").click(),!1});$("[id$=buSignInHeaderFull]").click(function(){if($("body").css({cursor:"wait"}),$("[id$=txLoginUsnHeaderFull],[id$=txLoginPwdHeaderFull]").removeClass("ws-error-form"),$("[id$=msgLoginHeaderFull]").html(""),WsVars.MemberProgram==="4"){if($("[id$=txLoginUsnHeaderFull]").val().length<3)return $("[id$=msgLoginHeaderFull]").html(WsMulti.EnterLoyaltyLogin),$("[id$=txLoginUsnHeaderFull]").addClass("ws-error-form").focus(),!1}else if(!Utils.IsValidEmail($("[id$=txLoginUsnHeaderFull]").val()))return $("[id$=msgLoginHeaderFull]").html(WsMulti.EnterEmailAddress),$("[id$=txLoginUsnHeaderFull]").addClass("ws-error-form").focus(),!1;if($("[id$=txLoginPwdHeaderFull]").val().length===0)return $("[id$=msgLoginHeaderFull]").html(WsMulti.EnterPassword),$("[id$=txLoginPwdHeaderFull]").addClass("ws-error-form").focus(),!1;var i={hotelID:WsVars.HotelID,langID:WsVars.LangID,hgID:WsVars.HgID,usn:$("[id$=txLoginUsnHeaderFull]").val(),pwd:$("[id$=txLoginPwdHeaderFull]").val(),rmbme:$("[id$=chkRememberMeHeaderFull]").prop("checked")};return n!=null?(i.wsitem=JSON.stringify(n),i.rooms=WSMAIN.Rooms):t.length>0&&(i.wsrate=t),$.ajax({type:"POST",url:"xml/getloyalty.aspx",data:i,dataType:"json",success:function(i){if($("body").css({cursor:"auto"}),i.Msg!=null){$("[id$=msgLoginHeaderFull]").html(i.Msg);$("[id$=txLoginUsnHeaderFull],[id$=txLoginPwdHeaderFull]").addClass("ws-error-form").focus();return}SHR.TrkLib.Login({});SHR.TrkLib.Login({});WsVars.MemberProgram==="4"?location.href=n!=null&&i.ItemAdded==="1"?Utils.Format("cart.aspx?hotelID={0}&lang={1}&hgID={2}&currID={3}",WsVars.HotelID,WsVars.LangCode,WsVars.HgID,WsVars.CurrencyId):t.length>0&&i.LoyalRate.length>0?Utils.Format("promo.aspx?hotelID={0}&lang={1}&hgID={2}&rate={3}&currID={4}",WsVars.HotelID,WsVars.LangCode,WsVars.HgID,i.LoyalRate,WsVars.CurrencyId):Utils.Format("promos.aspx?hotelID={0}&lang={1}&hgID={2}&currID={3}",WsVars.HotelID,WsVars.LangCode,WsVars.HgID,WsVars.CurrencyId):location.reload(!0)},error:function(){$("body").css({cursor:"auto"})}}),!1});$("[id$=txEmailVerifyHeaderFull],[id$=txPasswordVerifyHeaderFull]").bind("paste",function(n){n.preventDefault()});$("[id$=buSignUpHeaderFull]").click(function(n){n.preventDefault();Setloyalty()});$("[id$=buWsGuestForgotPassEmailHeaderFull]").click(function(){if($("[id$=inWsGuestForgotPassEmailHeaderFull]").removeClass("ws-error-form"),$("[id$=msgForgotPassHeaderFull]").removeClass("ws-visible").addClass("ws-hidden"),$("[id$=paraWsGuestEmailSentHeaderFull]").html("").removeClass("ws-visible").addClass("ws-hidden"),$("[id$=inWsGuestForgotPassEmailHeaderFull]").val().length==0)return $("[id$=inWsGuestForgotPassEmailHeaderFull]").addClass("ws-error-form").focus(),$("[id$=msgForgotPassHeaderFull]").html(WsMulti.EnterEmailAddress),$("[id$=msgForgotPassHeaderFull]").removeClass("ws-hidden").addClass("ws-visible"),!1;if(!Utils.IsValidEmail($("[id$=inWsGuestForgotPassEmailHeaderFull]").val()))return $("[id$=inWsGuestForgotPassEmailHeaderFull]").addClass("ws-error-form").focus(),$("[id$=msgForgotPassHeaderFull]").html(WsMulti.InvalidEmailAddress),$("[id$=msgForgotPassHeaderFull]").removeClass("ws-hidden").addClass("ws-visible"),!1;if(SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramID==SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramEnum.StellerCRM)return $("body").css({cursor:"wait"}),$.ajax({type:"POST",url:"xml/ResetPwd.aspx",data:{hotelID:WsVars.HotelID,langID:WsVars.LangID,currID:WsVars.CurrencyId,email:$("[id$=inWsGuestForgotPassEmailHeaderFull]").val()},dataType:"json",success:function(n){$("body").css({cursor:"auto"});n.Msg.length>0&&(n.Status==="1"?$("[id$=paraWsGuestEmailSentHeaderFull]").html(n.Msg).removeClass("ws-hidden").addClass("ws-visible"):($("[id$=msgForgotPassHeaderFull]").html(WsMulti.RGPassResetError),$("[id$=msgForgotPassHeaderFull]").removeClass("ws-hidden").addClass("ws-visible")))},error:function(){$("body").css({cursor:"auto"})}}),!1;var n={hotelID:WsVars.HotelID,langID:WsVars.LangID,currID:WsVars.CurrencyId,email:$("[id$=inWsGuestForgotPassEmailHeaderFull]").val(),welcome:!1},t="xml/GetPwdResetEmail.aspx";return WSEvents&&WSEvents.do_action("RequestPwdResetEmailHeaderFull",{url:t,data:n}),$("body").css({cursor:"wait"}),$.ajax({type:"POST",url:t,data:n,dataType:"json"}).done(function(n){$("body").css({cursor:"auto"});n.Msg.length>0&&$("[id$=paraWsGuestEmailSentHeaderFull]").html(n.Msg).removeClass("ws-hidden").addClass("ws-visible")}).fail(function(n){$("body").css({cursor:"auto"});$("[id$=msgForgotPassHeaderFull]").html(WsMulti.RGPassResetError);$("[id$=msgForgotPassHeaderFull]").removeClass("ws-hidden").addClass("ws-visible");WSEvents&&WSEvents.do_action("RequestPwdResetEmailErrorHeaderFull",n)}),!1});$("[id$=buChangePasswordHeaderFull]").click(function(){if($("body").css({cursor:"wait"}),$("[id$=txEmailHeaderFull1],[id$=txCurrentPasswordHeaderFull],[id$=txNewPasswordHeaderFull],[id$=txtPasswordVerifyHeaderFull]").removeClass("ws-error-form"),$("[id$=msgChangePasswordHeaderFull]").html(""),$("[id$=successMsgChangePasswordHeaderFull]").addClass("ws-hidden").html(""),Utils.IsValidEmail($("[id$=txEmailHeaderFull1]").val())){if($("[id$=txCurrentPasswordHeaderFull]").length>0&&$("[id$=txCurrentPasswordHeaderFull]").val().length<8)return $("[id$=msgChangePasswordHeaderFull]").html(WsMulti.EnterPassword),$("[id$=txCurrentPasswordHeaderFull]").addClass("ws-error-form").focus(),!1;if($("[id$=txNewPasswordHeaderFull]").length>0&&$("[id$=txNewPasswordHeaderFull]").val().length<8)return $("[id$=msgChangePasswordHeaderFull]").html(WsMulti.EnterPassword),$("[id$=txNewPasswordHeaderFull]").addClass("ws-error-form").focus(),!1;if($("[id$=txtPasswordVerifyHeaderFull]").length>0&&$("[id$=txNewPasswordHeaderFull]").length>0&&$("[id$=txtPasswordVerifyHeaderFull]").val()!==$("[id$=txNewPasswordHeaderFull]").val())return $("[id$=msgChangePasswordHeaderFull]").html(WsMulti.EnterRetypePassword),$("[id$=txtPasswordVerifyHeaderFull]").addClass("ws-error-form").focus(),!1}else return $("[id$=msgChangePasswordHeaderFull]").html(WsMulti.EnterEmailAddress),$("[id$=txEmailHeaderFull1]").addClass("ws-error-form").focus(),!1;var n={hotelID:WsVars.HotelID,langID:WsVars.LangID,currID:WsVars.CurrencyId,email:$("[id$=txEmailHeaderFull1]").val(),password:$("[id$=txCurrentPasswordHeaderFull]").val(),newpassword:$("[id$=txNewPasswordHeaderFull]").val(),welcome:!1};return $.ajax({type:"POST",url:"xml/ChangePassword.aspx",data:n,dataType:"json"}).done(function(n){$("body").css({cursor:"auto"});n.Msg.length>0&&(n.Status==1?$("[id$=successMsgChangePasswordHeaderFull]").html(n.Msg).removeClass("ws-hidden"):$("[id$=msgChangePasswordHeaderFull]").html(n.Msg));n.Status==0&&$("[id$=txEmailHeaderFull1],[id$=txCurrentPasswordHeaderFull],[id$=txNewPasswordHeaderFull],[id$=txtPasswordVerifyHeaderFull]").addClass("ws-error-form").focus()}).fail(function(n){$("body").css({cursor:"auto"});$("[id$=msgChangePasswordHeaderFull]").html(WsMulti.RGPassResetError);$("[id$=msgChangePasswordHeaderFull]").removeClass("ws-hidden").addClass("ws-visible");WSEvents&&WSEvents.do_action("RequestChangePwdErrorHeaderFull",n)}),!1});WsVars.IBESkinVer=="3"&&($(".ws-collapsible").not("#dvMessage,#dvMktMessage,#spanCalendar,#dvWsCartMsg,.ws-msg-caution,#ws-billing-address,.ws-show-this,#txModifyResv").addClass("ws-hide-action"),$("html:not(.WsIbeShop) #ws-calendar .ws-inner,#dvCalendar .ws-inner").attr("aria-hidden",!0),$("#MyRetrieve_dvWsRetrieve,html:not(.WsIbeShop) #ws-calendar,#ws-occupancy-select,#ws-options-select, #ws-cart-view .ws-inner").keydown(function(n){var t=$(this).find('a[href]:not([disabled]), button:not([disabled]), input[type="text"]:not([disabled]), input[type="checkbox"]:not([disabled]), select:not([disabled])'),i;if(firstFocusableEl=t[0],lastFocusableEl=t[t.length-1],KEYCODE_TAB=9,KEYCODE_ESC=27,n.key==="Escape"||n.keyCode===KEYCODE_ESC){switch(this.id){case"MyRetrieve_dvWsRetrieve":$(".buWsGetResvClose").click();break;case"ws-calendar":$("#buCalClose").click();break;case"ws-occupancy-select":$("#buOccClose").click();break;case"ws-options-select":$("#buOptionsClose,#buOptionsClose .ws-icon").click()}return}(i=n.key==="Tab"||n.keyCode===KEYCODE_TAB,i)&&(n.shiftKey?document.activeElement===firstFocusableEl&&(lastFocusableEl.focus(),n.preventDefault()):document.activeElement===lastFocusableEl&&(firstFocusableEl.focus(),n.preventDefault()))}),$("meta[name=viewport]").attr("content","width=device-width, initial-scale=1.0"),$("html").hasClass("WsIbeShop")||($("#lbItinCheckIn,#lbItinCheckIn2").attr("for","spCheckIn"),$("#lbItinCheckOut,#lbItinCheckOut2").attr("for","spCheckOut")),$("#ws-occupancy-select .ws-inner,html:not(.WsIbeShop) #ws-options-select .ws-inner").attr("role","dialog").attr("aria-modal","true"),$("#ws-occupancy-select .ws-inner").attr("aria-label",$("#lbOccupants").text()),$("html:not(.WsIbeShop) #ws-calendar .ws-inner").attr("role","dialog").attr("aria-modal","true"),$("html:not(.WsIbeShop) #ws-calendar .ws-inner").attr("aria-label",WsMulti.Itinerary),$("#cbRooms").attr("aria-describedby","lbAnotherRoom"),$("html:not(.WsIbeShop) #ws-options-select .ws-inner").attr("aria-label",WsMulti.PromoCorpCode),$("#buTabDetails").click(function(){$(".ws-cart #ws-cost-summary").css("display","none");$(".ws-cart #ws-cost-detail").css("display","block");$("#buTabDetails").attr("aria-selected","true");$("#buTabSummary").attr("aria-selected","false");(WsVars.IsPaymentGateway==="1"||WsVars.GuestLoyalty!=""||$("#MyHeading_buMember").length>0)&&ShowBaseOrSelectedCurrencyPrices()}),$("#buTabSummary").click(function(){$(".ws-cart #ws-cost-summary").css("display","block");$(".ws-cart #ws-cost-detail").css("display","none");$("#buTabSummary").attr("aria-selected","true");$("#buTabDetails").attr("aria-selected","false");(WsVars.IsPaymentGateway==="1"||WsVars.GuestLoyalty!=""||$("#MyHeading_buMember").length>0)&&ShowBaseOrSelectedCurrencyPrices()}),$(".buWsGallery").blur(function(){$(this).parents().closest(".ws-crop-this").css("outline","none")}),$(".buWsGallery").focus(function(){$(this).parents().closest(".ws-crop-this").css("outline","auto")}),i=document.querySelectorAll('[role="tablist"]'),i.length>0&&i.forEach(function(n){n.addEventListener("keydown",handleTabs)}),$("#ws-agree-tandc .ws-label-after").attr("for","agree"),$(".cnAdults,.cnChildren,.cnChild1,.cnChild2,.cnChild3,.cnChild4,.cnRooms").each(function(){var n=$(this).find("label").attr("id");$(this).attr("role","radiogroup").attr("aria-labelledby",n);$("#"+n).attr("for",$("#"+n).next("div").attr("id"))}),$(".cbAdults span,.cbChild1 span,.cbRooms span").attr("role","radio").attr("tabIndex","0"));$("#cbSignUpCountryHeaderFull").change(function(){$("#cbSignUpStateHeaderFull").load("xml/getStates.aspx?country="+$(this).val()+"&lang="+WsVars.LangCode,function(){$(this).change();$("#cbSignUpStateHeaderFull option").length>1?($("#dvSignUpStateHeaderFull .customSelect, #dvSignUpStateHeaderFull .ws-required").show(),$("#cbSignUpStateHeaderFull").removeClass("ws-hide"),$("#txSignUpStateHeaderFull").addClass("ws-hide"),$("#lblTxSignUpStateHeaderFull").addClass("ws-hide"),$("#lblCbSignUpStateHeaderFull").removeClass("ws-hide")):($("#dvSignUpStateHeaderFull .customSelect, #dvSignUpStateHeaderFull .ws-required").hide(),$("#cbSignUpStateHeaderFull").addClass("ws-hide"),$("#txSignUpStateHeaderFull").removeClass("ws-hide"),$("#lblTxSignUpStateHeaderFull").removeClass("ws-hide"),$("#lblCbSignUpStateHeaderFull").addClass("ws-hide"))})});(WsVars.IsPaymentGateway==="1"||WsVars.GuestLoyalty!=""||$("#MyHeading_buMember").length>0)&&ShowBaseOrSelectedCurrencyPrices();WsVars.EnhancedMultiroom.toLowerCase()=="true"&&(WsMultiRoomCTABannerCart(),WsMultiRoomCTABanner());$(function(){$(".customSelect").append('<span class="ws-down-arrow" aria-hidden="true"><\/span>')})});$(document).mouseup(function(n){$(n.target).parents("#MyHeading_ulWsLanguage").length===0&&$(n.target).parents("#buWsLanguage").length===0&&($("#MyHeading_ulWsLanguage").hide("fast"),$("#buWsLanguage").attr("aria-expanded","false"));$(n.target).parents("#MyHeading_ulWsCurrency").length===0&&$(n.target).parents("#buWsCurrency").length===0&&($("#MyHeading_ulWsCurrency").hide("fast"),$("#buWsCurrency").attr("aria-expanded","false"));$(n.target).parents("#ulWsProgramMember").length===0&&$(n.target).parents("#buWsProgramMember").length===0&&$("#ulWsProgramMember").hide("fast")});SHR=SHR||{};SHR.Loyalty=SHR.Loyalty||{};SHR.Loyalty.initBraintreeSignup=function(){client_token=$("#MyHeading_hdToken").val();var n=document.querySelector("#MyHeading_buSignUp_WithBraintree");braintree.dropin.create({authorization:client_token,container:"#btBtreedropinHeader",locale:Utils.LangIDToLocale()},function(n,t){$("[id$=buSignUp_WithBraintree]").click(function(){if($("#MyHeading_buSignUp_WithBraintree").hasClass("ws-submitting"))return!1;var n=CheckValidations();if(n!=null){$("[id$=msgSignUpHeaderFull]").html(n);return}if(isNewGuest)$("#MyHeading_buSignUp_WithBraintree").addClass("ws-submitting ws-disabled"),t.requestPaymentMethod(function(t,i){if(t){console.log("Error",t);$("#MyHeading_buSignUp_WithBraintree").removeClass("ws-submitting ws-disabled");return}return document.querySelector("#MyHeading_nonce").value=i.nonce,$("[id$=msgPaymentProcessBraintree]").html(n),Setloyalty(),!1});else{$("[id$=msgSignUpHeaderFull]").html(WsMulti.lbSignInMsgUniv);$("[id$=txEmailHeaderFull]").val("");$("[id$=txEmailHeaderFull]").focus();return}})})};jQuery(document).ready(function(n){var t,u,r,i,f,e;if(SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramID==SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramEnum.FairCloud&&(u=new URLSearchParams(window.location.search),u!=undefined))for(r=window.location.search.substring(1).split("&"),i=0;i<r.length;i++)if(r[i]!=null&&(t=r[i].split("=")),t!=null&&t!=""&&t!=undefined&&t[0]!=null&&t[0].toLowerCase()==="fbpmstoken"&&t[1]!=null)return n("#dvMessage").removeClass("ws-show-this"),f="xml/getloyalty.aspx",e={hotelID:WsVars.HotelID,langID:WsVars.LangID,hgID:WsVars.HgID,fbpmstoken:JSON.stringify(t[1])},n("body").css({cursor:"auto"}),n.ajax({type:"POST",url:f,data:e,dataType:"json",success:function(t){t!=null&&t!=undefined&&(t.Status=="1"?location.reload():t.Msg!=null&&t.Msg!=""&&n("#dvMessage").addClass("ws-show-this").html(t.Msg))},error:function(){n("body").css({cursor:"auto"})}}),!1;WsVars.IBESkinVer=="3"&&(n("h1").not(".ws-heading h1,.dvHotelAddon h1,.ws-nav-header h1,.ws-property-info h1,.ws-wrap h1").each(function(){let t="";n.each(this.attributes,function(){t=t+" "+Utils.Format('{0}="{1}"',this.name,this.value)});n(this).replaceWith("<h2"+t+">"+n(this).html()+"<\/h2>")}),n("#ws-full-terms-conditions h4").each(function(){let t="";n.each(this.attributes,function(){t=t+" "+Utils.Format('{0}="{1}"',this.name,this.value)});n(this).replaceWith("<h3"+t+">"+n(this).html()+"<\/h3>")}),n("#fmUnivSignIn h2, #fmLAJagree h2, #fmSignInHeaderFull h2, #fmSignUpHeaderFull h2, #fmWsForgotPassHeaderFull h2").css("text-align","center"),n("#ws-modal-loyalty-header-full h4").each(function(){n(this).replaceWith("<h3>"+n(this).html()+"<\/h3>")}),n("#buTabDetails").hasClass("active")?(n(".ws-cart #ws-cost-summary").css("display","none"),n(".ws-cart #ws-cost-detail").css("display","block"),n("#buTabDetails").attr("aria-selected","true"),n("#buTabSummary").attr("aria-selected","false")):(n(".ws-cart #ws-cost-summary").css("display","block"),n(".ws-cart #ws-cost-detail").css("display","none"),n("#buTabSummary").attr("aria-selected","true"),n("#buTabDetails").attr("aria-selected","false")),n(".counter span").each(function(){n(this).attr("aria-label",n(this).html())}));n("#ws-main").attr("role","main");(WsVars.IsPaymentGateway==="1"||WsVars.GuestLoyalty!=""||n("#MyHeading_buMember").length>0)&&ShowBaseOrSelectedCurrencyPrices();n(document).ajaxStart(function(){n("#loading").hasClass("hide")&&n("#loading-message").text(SHR.__("Loading"))});n(document).ajaxComplete(function(){n("#loading").hasClass("hide")||n("#loading-message").text("")});navigator.userAgent.toLowerCase().indexOf("chrome")==-1&&setInterval(function(){n("img").attr("loading","")},500)});$(document).ajaxComplete(function(n){$(".dtCheckout").closest(".calMonth").hasClass("visible")&&($(".ws-tip-close").click(),setTimeout(function(){tippyTooltip(0)},1500));!$("#ws-calendar").hasClass("ws-show-this")&&$("#ws-calendar").is(":visible")?$(".ws-tip-close").click():!$("#dvCalendar").hasClass("ws-show-this")&&$("#dvCalendar").is(":visible")&&$(".ws-tip-close").click();n.preventDefault()});
//# sourceMappingURL=wscmn.min.js.map