function ChangeOnFullPrePayment(n){var u,r;if(typeof n!=undefined&&n!=""){var t=WSMAIN.CheckPolicy(WSMAIN.Items),f=!1,i=!1;showOrHideDvSection($("#divPayment"),!0);$(".billing-check").show();n=="PayMonthly"?WsVars.EnableBNPLProviderID==1&&WsVars.FlexPayUpCode!=""&&(ShowOrHideEigenIframe(!1,!1,""),showOrHideDvSection($("#divPayment"),!1),WsFlexPay.ShowFlexPayIframe(!1),$(".ws-reserve-button").addClass("ws-disabled"),($("#lPayMonthly").length>0&&$("#lPayMonthly").hasClass("FlexPayTokenAvailable")||$("#lPayMonthly1").length>0&&$("#lPayMonthly1").hasClass("FlexPayTokenAvailable"))&&$(".ws-reserve-button").removeClass("ws-disabled"),$(".billing-check").hide()):t=="DX"||t=="PP"||n=="OptFullPrePayment"||n=="PayDeposit"?(f=!0,i=!0,ShowOrHideEigenIframe(!1,!0,t),WsVars.EnableBNPLProviderID==1&&WsVars.FlexPayUpCode!=""&&WsFlexPay.ShowFlexPayIframe(!0)):n=="PayAtHotel"&&(HideAllOtherPayMethods(!0,!0),showOrHideDvSection($("#dvPayByOtherMethods"),!0),t=="GX"?($("#divPayAtHotelMessage").html(WsMulti.PayAtHotelMessageForPolicyGX),i=!0,ShowOrHideEigenIframe(!1,!0,"")):t=="XX"&&($("#divPayAtHotelMessage").html(WsMulti.PayAtHotelMessageForPolicyXX),i=!1,ShowOrHideEigenIframe(!0,!1,"")),WsVars.EnableBNPLProviderID==1&&WsVars.FlexPayUpCode!=""&&WsFlexPay.ShowFlexPayIframe(!0));f&&WsVars.IsAdyenV2=="1"&&BuildWsPaymentMethods(WsPaymentOptions,WSMAIN.Items);showOrHideDvSection($("#dvPayAtHotelMsg"),n=="PayAtHotel"&&(t=="GX"||t=="XX"));showOrHideDvSection($("#divPayAtHotelMessage"),n=="PayAtHotel"&&(t=="GX"||t=="XX"));WSMAIN.GetDepositByPayOpt(n);hideCPayMethod(!i&&WsVars.HideCCSection==1);u="";$("input:radio[name='rdPayMethodType']:checked").length>0&&(u=$("input:radio[name='rdPayMethodType']:checked").val());r=' <span class="ws-required redstarcc">*<\/span>';i&&(WsVars.IBESkinVer=="3"&&(r=' <span class="ws-required redstarcc" aria-label="required">*<\/span>'),$("#lbCardHolder").length>0&&$("#lbCardNumber").length>0&&$("#lbCardExpire").length>0&&($("#lbCardHolder").html($("#lbCardHolder").html().replace(r,"")),$("#lbCardNumber").html($("#lbCardNumber").html().replace(r,"")),$("#lbCardExpire").html($("#lbCardExpire").html().replace(r,""))),$("#lbCardCvv").length>0&&$("#lbCardCvv").html($("#lbCardCvv").html().replace(r,"")));WSMAIN.ReqCc=i;const e=!(n==="PayAtHotel"&&t==="XX");i&&(u==="scheme"||$("#dvPayFullPrePayment").length>0)&&e&&($("#lbCardHolder .redstarcc").length||$("#lbCardHolder,#lbCardType,#lbCardNumber,#lbCardExpire,#lbCardCvv").append(r));$("#inPaygateOption").val(n);$("input:radio[name='rblPayFullPrePayment']:checked").blur();WSMAIN.IsLoggedIn()&&(Number(SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramConfig2)&SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramConfig2Enum.SuppLoyaltyPoints)>0&&$("#divslidecontainer").is(":visible")&&WsVars.EnablePayByPoints=="1"&&GetLoyaltyPoints(!1,0,-1)}}function ProcessGotoIPGateway(n=null){var t=WsVars.IsAdyenV2==1||WsVars.IsPlanetPayment==1||WsVars.IsRedDotPay==1||WsVars.IsNexiNetaxept==1||WsVars.IsNexiPayEngine==1||WsVars.IsShift4Prop==1||WsVars.IsPaymentGatewayV1==1?{gotoPaygate:"1"}:{gotoipggateway:"1"},u=$("#txCardHolder").val(),f=$("#txCardNumber").val(),e=$("#txCardCvv").val(),r=$("#cbCardMM").val()+"/"+$("#cbCardYY").val(),h=r,o,i,s;typeof n!=undefined&&n!=null&&(o=JSON.stringify(n),i=JSON.parse(o),i!=undefined&&i!=null&&(u=i.CardHolderName,f=i.CardNumber,e=i.Cvv,r=i.ExpiryMonth+"/"+i.ExpiryYear),WsVars.EnableBNPLProviderID==1&&WsVars.FlexPayUpCode!=""&&($("input:radio[name='rblPayFullPrePayment']:checked").length>0&&$("input:radio[name='rblPayFullPrePayment']:checked").val()=="PayMonthly"||$("input:radio[name='rblSHRPayFullPrePayment']:checked").length>0&&$("input:radio[name='rblSHRPayFullPrePayment']:checked").val()=="PayMonthly")&&(t.inPayByMethodType="FlexPay",t.PostalCode=i.PostalCode));s=Utils.Format("checkout.aspx?hgID={0}&hotelID={1}&lang={2}&currID={3}",WsVars.HgID,WsVars.HotelID,WsVars.LangCode,WsVars.CurrencyId);$("#txLoginEmail").length>0?t.email=$("#txLoginEmail").val():$("#txEmail").length>0&&(t.email=$("#txEmail").val());t.title=$("#cbSalutation").val();t.fname=$("#txFirstName").val();t.lname=$("#txLastName").val();t.mi=$("#txMiddleInit").val();t.addr1=$("#txAddress1").val();t.addr2=$("#txAddress2").val();t.city=$("#txCity").val();t.state=$("#txState").val();t.stcode=$("#cbState").val();t.country=$("#cbCountry").val();t.zip=$("#txZip").val();t.phone=$("#txPhone").val();t.mobile=$("#txMobile").val();t.company=$("#txCompany").val();t.gender=$("#cbGender").val();t.dobMM=$("#cbBirthMM").val();t.dobDD=$("#cbBirthDD").val();t.dobYY=$("#cbBirthYY").val();t.memberID=$("#txMemberID").val();t.emailalt=$("#txEmailAlt").val();t.booked=$("#txBooked").val();t.purpose=$("#cbTripPurpose").val();t.tvlProgram=$("#cbTravelProgram").val();t.tvlMember=$("#txTravelMember").val();t.arrFlight=$("#txArrFlight").val();t.arrTime=$("#txArrTime").val();t.comments=$("#txComments").val();t.saved=$("#inSaved").val();t.preferences=WSMAIN.GetPrefs();t.optin=WSMAIN.GetOptin();t.optinMobile=WSMAIN.GetOptinMobile();t.MerchantId=$("#hMerchantId").val();t.customerId=$("#hCustomerId").val();t.token=$("#inIPGToken").val();t.nameOnCard=u;t.expDate=r;t.cvv=e;t.Number=f;t.cardToken=$("#hCardToken").val()!=""?$("#hCardToken").val():"";t.resvid=$("#hResvId").val();t.chkBillDiff=$("#chkBillDiff").length>0&&$("#chkBillDiff").prop("checked")==!0?"1":"0";t.BillAddress1=$("#txBillAddress1").val();t.BillAddress2=$("#txBillAddress2").val();t.BillCity=$("#txBillCity").val();t.BillZip=$("#txBillZip").val();t.BillState=$("#cbBillState").val();t.BillCountry=$("#cbBillCountry").val();$("#inPaygateOption").length>0&&(t.paygateOption=$("#inPaygateOption").val());$("#inPayByMethodType").length>0&&(t.inPayByMethodType=$("#inPayByMethodType").val());(WsVars.IsIPGProp==1||WsVars.IsAdyenV2==1||WsVars.IsPlanetPayment==1||WsVars.IsRedDotPay==1||WsVars.IsNexiNetaxept==1||WsVars.IsNexiPayEngine==1||WsVars.IsShift4Prop==1||WsVars.IsPaymentGatewayV1==1)&&(t.CustomerBrowser=getBrowserInfo());t.hdGiftCardBrand=$("#hdGiftCardBrand").val();($("#inPayByMethodType").val()=="googlepay"||$("#inPayByMethodType").val()=="applepay")&&(t.paygateWalletTransToken=WSMAIN.paygateWalletTransToken);WsVars.IsAdyenV2=="1"&&$("#txGiftCardCvc").length>0&&$("#txGiftCardCvc").val()!=""&&$("#txGiftCardCvc").val().length>0&&(t.cvv=$("#txGiftCardCvc").val());WsVars.IsAdyenV2=="1"&&$("#txGiftCardNumber").length>0&&$("#txGiftCardNumber").val()!=""&&$("#txGiftCardNumber").val().length>0&&(t.Number=$("#txGiftCardNumber").val());t.RmRtAddGuestsName=WSMAIN.GetRmRtAddGuestsName();t.HotelGuestMerbershipProgram=WSMAIN.GetHotelGuestMerbershipProgram();$("#pcPayQrCodeModal").hasClass("mfp-hide")||(t.crsresId=$("#inCrsResvID").val(),t.merchantTxId=$("#inMerchantReference").val(),t.redirectResult="VerifyResult",t.CartInfo=$("#inCartInfo").val());$.ajax({type:"POST",url:s,data:t,dataType:"json",success:function(n){var i,r,f,t,o,s;if(n!=null&&(n.Status==="REDIRECT"||n.Status==="SUCCESS"))if(WsVars.EnableBNPLProviderID==1&&WsVars.FlexPayUpCode!=""&&n.Status!="REDIRECT"&&WsFlexPay.ConfirmResOnFlexPay(n.CrsResvId),(WsVars.IsAdyenV2=="1"||WsVars.IsPlanetPayment=="1"||WsVars.IsRedDotPay=="1"||WsVars.IsNexiNetaxept=="1"||WsVars.IsNexiPayEngine=="1"||WsVars.IsShift4Prop=="1"||WsVars.IsPaymentGatewayV1=="1")&&n.Url!=undefined&&n.Url!=null&&n.Url!=""&&n.Url.toLowerCase().indexOf("qrcode")>=0&&n.Url2!=undefined&&n.Url2!=null&&n.Url2!="")if(Utils.IsMobile())$("input:radio[name='rblPayFullPrePayment']:checked").length>0&&$("input:radio[name='rblPayFullPrePayment']:checked").val()=="PayMonthly"||$("input:radio[name='rblSHRPayFullPrePayment']:checked").length>0&&$("input:radio[name='rblSHRPayFullPrePayment']:checked").val()=="PayMonthly"?setTimeout(function(){location.replace(n.Url2)},1e3):location.replace(n.Url2);else{if(r=n.Url2.split("?"),typeof r!="undefined"&&r.length>0&&r[1]!=null&&(i=r[1].split("&")),typeof i!="undefined"&&i.length>0)for(f=0;f<i.length;f++)t=i[f].split("="),t[0].toLowerCase()==="merchanttxid"&&$("#inMerchantReference").val(t[1]),t[0].toLowerCase()==="crsresid"&&$("#inCrsResvID").val(t[1]),t[0].toLowerCase()=="cartinfo"&&$("#inCartInfo").val(t[1]);ShowQrCodeModal(n.Url,n.Url2)}else if(n.Url.indexOf("POST|")==0){var u=n.Url.substr(5),e=u.indexOf("?"),h="";e>0&&(h=u.substr(e),u=u.substr(0,e));o=$("<form>",{action:u,method:"POST",target:"_top"});e>0&&(s=new URLSearchParams(h),s!=undefined&&s.forEach(function(n,t){o.append($("<input>",{name:t,value:n,type:"hidden"}))}));$(document.body).append(o);o.submit()}else $("input:radio[name='rblPayFullPrePayment']:checked").length>0&&$("input:radio[name='rblPayFullPrePayment']:checked").val()=="PayMonthly"||$("input:radio[name='rblSHRPayFullPrePayment']:checked").length>0&&$("input:radio[name='rblSHRPayFullPrePayment']:checked").val()=="PayMonthly"?setTimeout(function(){location.href=n.Url},1e3):location.href=n.Url;else n!=null&&n.Status==="FAILURE"&&n.Token!=""&&n.Msg.length>0?($(document).trigger("wsHideProcessingModal"),WsVars.EnableBNPLProviderID==1&&WsVars.FlexPayUpCode!=""&&($("input:radio[name='rblPayFullPrePayment']:checked").length>0&&$("input:radio[name='rblPayFullPrePayment']:checked").val()=="PayMonthly"||$("input:radio[name='rblSHRPayFullPrePayment']:checked").length>0&&$("input:radio[name='rblSHRPayFullPrePayment']:checked").val()=="PayMonthly")&&WsFlexPay.LogErrorAtFlexPay("Error occured during booking","booking"),$("#buReserve_Paygate,#buReserve2_Paygate").hasClass("ws-submitting")&&$("#buReserve_Paygate,#buReserve2_Paygate").removeClass("ws-submitting"),$("#inIPGToken").val(n.Token),n.IsPayGateError!=undefined&&n.IsPayGateError!=null&&n.IsPayGateError!=""&&n.IsPayGateError.toLowerCase().indexOf("true")>=0?(WsVars.IBESkinVer=="3"&&$("#dvBillingMessage").removeClass("ws-hide-action"),$("#dvBillingMessage").addClass("ws-messages ws-msg-error ws-collapsible ws-show-this"),$("#dvBillingMessage").html(n.Msg)):($("#dvMessage").addClass("ws-messages ws-msg-errorPaygate ws-collapsible ws-show-this"),$("#dvMessage").html(n.Msg))):n.Msg.length>0&&($(document).trigger("wsHideProcessingModal"),WsVars.EnableBNPLProviderID==1&&WsVars.FlexPayUpCode!=""&&($("input:radio[name='rblPayFullPrePayment']:checked").length>0&&$("input:radio[name='rblPayFullPrePayment']:checked").val()=="PayMonthly"||$("input:radio[name='rblSHRPayFullPrePayment']:checked").length>0&&$("input:radio[name='rblSHRPayFullPrePayment']:checked").val()=="PayMonthly")&&WsFlexPay.LogErrorAtFlexPay("Error occured during booking","booking"),$("#pcPayQrCodeModal").hasClass("compact-modal")&&$.magnificPopup.close(),n.IsPayGateError!=undefined&&n.IsPayGateError!=null&&n.IsPayGateError!=""&&n.IsPayGateError.toLowerCase().indexOf("true")>=0?(WsVars.IBESkinVer=="3"&&$("#dvBillingMessage").removeClass("ws-hide-action"),$("#dvBillingMessage").addClass("ws-messages ws-msg-error ws-collapsible ws-show-this"),$("#dvBillingMessage").html(n.Msg)):($("#dvMessage").addClass("ws-messages ws-msg-error ws-collapsible ws-show-this"),$("#dvMessage").html(n.Msg)),$("#buReserve_Paygate,#buReserve2_Paygate").hasClass("ws-submitting")&&($("#buReserve_Paygate,#buReserve2_Paygate").removeClass("ws-submitting"),$(".ws-reserve-button").removeClass("ws-disabled")));$("body").css({cursor:"auto"})},error:function(){$(document).trigger("wsHideProcessingModal");WsVars.EnableBNPLProviderID==1&&WsVars.FlexPayUpCode!=""&&($("input:radio[name='rblPayFullPrePayment']:checked").length>0&&$("input:radio[name='rblPayFullPrePayment']:checked").val()=="PayMonthly"||$("input:radio[name='rblSHRPayFullPrePayment']:checked").length>0&&$("input:radio[name='rblSHRPayFullPrePayment']:checked").val()=="PayMonthly")&&WsFlexPay.LogErrorAtFlexPay("Error occured during booking","booking");$("#pcPayQrCodeModal").hasClass("compact-modal")&&$.magnificPopup.close();$("#buReserve_Paygate,#buReserve2_Paygate").hasClass("ws-submitting")&&$("#buReserve_Paygate,#buReserve2_Paygate").removeClass("ws-submitting");$("body").css({cursor:"auto"})}})}function CheckVerifyStatus(){var n={hotelID:WsVars.HotelID,chainID:WsVars.ChainID,channelID:WsVars.Chan,crsID:$("#inCrsResvID").val(),merchantReference:$("#inMerchantReference").val()};$.ajax({type:"POST",url:"xml/getpaygate.aspx?adyenVerifyStatus=1",data:n,dataType:"json",success:function(n){n!=null&&n.Status==="SUCCESS"?ProcessGotoIPGateway():n!=null&&n.Status==="FAILURE"&&n.Msg.length>0?($("#pcPayQrCodeModal").hasClass("compact-modal")&&$.magnificPopup.close(),$("#dvMessage").addClass("ws-messages ws-msg-errorPaygate ws-collapsible ws-show-this"),$("#dvMessage").html(n.Msg)):n.Msg.length>0&&($("#pcPayQrCodeModal").hasClass("compact-modal")&&$.magnificPopup.close(),$("#dvMessage").addClass("ws-messages ws-msg-error ws-collapsible ws-show-this"),$("#dvMessage").html(n.Msg),$("#buReserve_Paygate,#buReserve2_Paygate").hasClass("ws-submitting")&&($("#buReserve_Paygate,#buReserve2_Paygate").removeClass("ws-submitting"),$(".ws-reserve-button").removeClass("ws-disabled")));$("body").css({cursor:"auto"})},error:function(){$("#pcPayQrCodeModal").hasClass("compact-modal")&&$.magnificPopup.close();$("#buReserve_Paygate,#buReserve2_Paygate").hasClass("ws-submitting")&&$("#buReserve_Paygate,#buReserve2_Paygate").removeClass("ws-submitting");$("body").css({cursor:"auto"})}})}function ProcessChargeWithReservation(n){$(document).trigger("wsShowProcessingModal");var r=JSON.stringify(n),i=JSON.parse(r),u=Utils.Format("checkout.aspx?hgID={0}&hotelID={1}&lang={2}&currID={3}",WsVars.HgID,WsVars.HotelID,WsVars.LangCode,WsVars.CurrencyId),t={gotoAuth3DSCharge:"1"};t.transID=i.transaction_id;t.status=i.status;t.await=i.await_Confirm;$("#inMyCheck3dsPayload").val()!=undefined&&$("#inMyCheck3dsPayload").val()!=""&&(t.auth3dsPayload=$("#inMyCheck3dsPayload").val());WsVars.IsFreedomPayProp==1&&window.wsFreedompay!=undefined&&window.wsFreedompay.Options!=undefined&&window.wsFreedompay.Enabled()&&wsFreedompay.Valid()&&i!=undefined&&i!=null?((typeof i.Payment!="undefined"&&i.Payment!=""||i.eciFlag!="00"&&i.eciFlag!="07"&&i.issueChallenge==!1)&&(typeof i.transactionId!="undefined"&&i.transactionId!=""?t.transID=i.transactionId:typeof i.Payment!="undefined"&&typeof i.Payment.ProcessorTransactionId!="undefined"&&i.Payment.ProcessorTransactionId!=""&&(t.transID=i.Payment.ProcessorTransactionId),typeof i.paResStatus!="undefined"&&i.paResStatus!=""?t.status=i.paResStatus=="Y"||i.paResStatus=="A"?"SUCCESS":"FAILURE":typeof i.Payment!="undefined"&&typeof i.Payment.ExtendedData!="undefined"&&i.Payment.ExtendedData.PAResStatus!=""&&(t.status=i.Payment.ExtendedData.PAResStatus=="Y"?"SUCCESS":"FAILURE"),t.auth3dsjson=r,t.auth3dsformat="cardinal",typeof i.Payment!="undefined"&&typeof i.Payment.ExtendedData!="undefined"&&typeof i.Payment.ExtendedData.ThreeDSVersion!="undefined"&&i.Payment.ExtendedData.ThreeDSVersion!=""&&(t.auth3dsformat=i.Payment.ExtendedData.ThreeDSVersion==""?"cardinal":"cardinalAuth")),t.nameOnCard=$("#txCardHolder").val(),t.number=$("#txCardNumber").val(),t.expDate=$("#cbCardMM").val()+"/"+$("#cbCardYY").val(),t.cvv=$("#txCardCvv").val()):WsVars.IsEigenDropIn==1&&(t.auth3dsjson=i.SessionID,t.nameOnCard=$("#txtEigenCardHolder").val(),t.number=i.MaskedCardNumber,t.expDate=i.ExpiryMonth+"/"+i.ExpiryYear);$("#txLoginEmail").length>0?t.email=$("#txLoginEmail").val():$("#txEmail").length>0&&(t.email=$("#txEmail").val());t.title=$("#cbSalutation").val();t.fname=$("#txFirstName").val();t.lname=$("#txLastName").val();t.mi=$("#txMiddleInit").val();t.addr1=$("#txAddress1").val();t.addr2=$("#txAddress2").val();t.city=$("#txCity").val();t.state=$("#txState").val();t.stcode=$("#cbState").val();t.country=$("#cbCountry").val();t.zip=$("#txZip").val();t.phone=$("#txPhone").val();t.mobile=$("#txMobile").val();t.company=$("#txCompany").val();t.gender=$("#cbGender").val();t.dobMM=$("#cbBirthMM").val();t.dobDD=$("#cbBirthDD").val();t.dobYY=$("#cbBirthYY").val();t.memberID=$("#txMemberID").val();t.emailalt=$("#txEmailAlt").val();t.booked=$("#txBooked").val();t.purpose=$("#cbTripPurpose").val();t.tvlProgram=$("#cbTravelProgram").val();t.tvlMember=$("#txTravelMember").val();t.arrFlight=$("#txArrFlight").val();t.arrTime=$("#txArrTime").val();t.comments=$("#txComments").val();t.saved=$("#inSaved").val();t.preferences=WSMAIN.GetPrefs();t.optin=WSMAIN.GetOptin();t.optinMobile=WSMAIN.GetOptinMobile();t.RmRtAddGuestsName=WSMAIN.GetRmRtAddGuestsName();t.HotelGuestMerbershipProgram=WSMAIN.GetHotelGuestMerbershipProgram();$("#inPaygateOption").length>0&&(t.paygateOption=$("#inPaygateOption").val());$.ajax({type:"POST",url:u,data:t,dataType:"json",success:function(n){n.Msg.length>0&&(n.Msg==="SUCCESS"?($("#idMyCheckProcessChargeValue").val("1"),location.href=n.Url):n.Msg==="FAILURE"?($(document).trigger("wsHideProcessingModal"),$("#idMyCheckProcessChargeValue").val("0"),$("#buMycheckDecline").click()):($(document).trigger("wsHideProcessingModal"),$("#idMyCheckProcessChargeValue").val("0"),$("#dvMessage").addClass("ws-messages ws-msg-error ws-collapsible ws-show-this"),$("#dvMessage").html(n.Msg)))},error:function(){$(document).trigger("wsHideProcessingModal")}})}function getBrowserInfo(){var n={browserAcceptHeader:"application/json",browserJavaEnabled:navigator.javaEnabled(),browserJavascriptEnabled:!0,browserLanguage:navigator.userLanguage||navigator.language,browserColorDepth:window.screen.colorDepth,browserScreenHeight:window.screen.height,browserScreenWidth:window.screen.width,browserTZ:(new Date).getTimezoneOffset(),challengeWindowSize:"05"};return JSON.stringify(n)}function ValidRegex(n){var t=!0;try{new RegExp(n)}catch(i){t=!1}return t}var WsMulti=WsMulti||{},client_token=null,_WsPaymentOptions={},WSMAIN,WsHasProgram,SHR;let autocomplete;WSMAIN={CartID:"",LName:"",Dt1:-1,Nights:0,Rooms:1,Adults:1,Child1:0,Child2:0,Child3:0,Child4:0,Promo:"",Group:"",Iata:"",Ix:-1,Items:[],ReqCc:!1,paygateWalletTransToken:"",emReserveTextVisibility:function(){this.CheckNeedSignUp()&&$(".ws-removeAllRestricted").removeClass("ws-hidden").addClass("ws-visible");WSMAIN.IsLoggedIn()?(SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramID==SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramEnum.FairCloud&&$("#chkLoyaltyAgreeTerm").length>0&&$("#chkLoyaltyAgreeTerm").prop("checked")==!0?$("#emReserveText").removeClass("ws-hidden").addClass("ws-visible"):$("#emReserveText").removeClass("ws-visible").addClass("ws-hidden"),SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramID==SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramEnum.StellerCRM&&($("#dvWsNewPassword").removeClass("ws-form-item").addClass("ws-hide-action"),$("#dvWsPasswordVerify").removeClass("ws-form-item").addClass("ws-hide-action"),$(".ws-SignUpCharge").removeClass("ws-visible").addClass("ws-hidden"))):($("#chkLoyaltyAgreeTerm").prop("checked")==!1||SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramID>1&&SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramID!=SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramEnum.FairCloud?$("#emReserveText").removeClass("ws-visible").addClass("ws-hidden"):SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramID!=SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramEnum.FairCloud||SHRWindsurfer.Utils.CartContainsLoyalty()?$("#emReserveText").removeClass("ws-hidden").addClass("ws-visible"):$("#emReserveText").removeClass("ws-visible").addClass("ws-hidden"),SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramID==SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramEnum.StellerCRM&&(SHRWindsurfer.Utils.CartContainsLoyalty()?($("#dvWsNewPassword").removeClass("ws-hide-action").addClass("ws-form-item"),$("#dvWsPasswordVerify").removeClass("ws-hide-action").addClass("ws-form-item"),$(".ws-SignUpCharge").removeClass("ws-hidden").addClass("ws-visible")):($("#dvWsNewPassword").removeClass("ws-form-item").addClass("ws-hide-action"),$("#dvWsPasswordVerify").removeClass("ws-form-item").addClass("ws-hide-action"),$(".ws-SignUpCharge").removeClass("ws-visible").addClass("ws-hidden"))))},Init:function(n){var o=this,i,u,e,t,r,f;for(this.CartID=n.CartID,this.LName=n.LName,this.Dt1=n.Dt1,this.Nights=n.Nights,this.Rooms=n.Rooms,this.Adults=n.Adults,this.Child1=n.Child1,this.Child2=n.Child2,this.Child3=n.Child3,this.Child4=n.Child4,this.Promo=n.Promo,this.Group=n.Group,this.Iata=n.Iata,this.Items=n.Items,this.resetCart(),WSMAIN.LoadAdditionalGuestsField(n.AdditionalGuests),WSMAIN.LoadGuestsProgramsField(n.HotelGuestMembership),WsVars.OptInDefaultChecked=="1"&&(SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramConfig==SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramConfigEnum.ShowSignInSignUpWithAmountDisplayedForLoyaltyRates||SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramConfig==SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramConfigEnum.DontShowSignInSignUpForLoyaltyRates)?$("#chkLoyaltyAgreeTerm").prop("checked",!0):WsVars.OptInDefaultChecked=="1"?this.CheckNeedSignUp()?$("#chkLoyaltyAgreeTerm").prop("checked",!0):$("#chkLoyaltyAgreeTerm").prop("checked",!1):$("#chkLoyaltyAgreeTerm").prop("checked",!1),Utils.IsMobile()||$("#IsFloatBranding").val()!="True"?$("#dvSidebar").removeClass("sticky-sidebardetails"):$("#dvSidebar").addClass("sticky-sidebardetails"),this.emReserveTextVisibility(),HideAllOtherPayMethods(!1,!0),WsVars.IsAdyenV2=="1"&&GetAdyenV2PaymentMethod(WSMAIN.Items),i={},u=[],t=0;t<this.Items.length;t++)i[this.Items[t].Currency]=this.Items[t].Currency;for(t in i)u.push(i[t]);for(u.length<=1?(e=new Yetii({id:"ws-entry"}),$("#ws-entry .tab").show()):($("#ws-entry-nav,#ws-cost-summary").hide(),$("#ws-cost-detail").show()),t=0;t<this.Items.length;t++)if(this.Items[t].Currency!="POINTS"&&(this.Items[t].Guar==="GX"||this.Items[t].Guar==="DX"||this.Items[t].Guar==="PP")){this.ReqCc=!0;break}if((this.ReqCc||SHRWindsurfer.WsLoyaltyHandler.hasActiveLoyaltyProgram()&&WSMAIN.LoyaltySignupChecked()&&(SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramID==SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramEnum.StellerCRM||SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramID==SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramEnum.FairCloud))&&(r=' <span class="ws-required redstarcc">*<\/span>',WsVars.IBESkinVer=="3"&&(r=' <span class="ws-required redstarcc" aria-label="required">*<\/span>'),$("#lbCardHolder,#lbCardType,#lbCardNumber,#lbCardExpire,#lbCardCvv").append(r),(WsVars.IsElavonFuseboxProp==!0||WsVars.IsFreedomPayProp==!0||WsVars.IsShift4Prop==!0)&&WsVars.TokenizeChargeRefund==!1&&$("#lbCardCvv").html($("#lbCardCvv").html().replace(r,""))),document.getElementById("isMyCheckEnabled")!=null&&document.getElementById("isMyCheckEnabled").value=="True"&&document.getElementById("inMyCheckMethod").value=="1"&&WsVars.IsMyCheck==="1"){function n(){clearTimeout(f);$("#subReloadModal").html(WsMulti.ReloadModalMessage);$("#buReloadModal").html(WsMulti.ReloadModalButton);$.magnificPopup.open({items:{src:$("#dvReloadModal")},type:"inline",modal:!0,callbacks:{close:function(){window.location.reload(!0)}}});$("#buReloadModal").click(function(){return $.magnificPopup.close(),!1})}f=setTimeout(n,72e4)}$("input:radio[name='rblPayFullPrePayment']").length>0&&$("input:radio[name='rblPayFullPrePayment']").change();$("input:radio[name='rdPayMethodType']").length>0&&$("input:radio[name='rdPayMethodType']").change()},Alert:function(n,t){var i;t===undefined&&(t=0);t==1?(WsVars.IBESkinVer=="3"&&$("#dvBillingMessage").removeClass("ws-hide-action"),$("#dvBillingMessage").addClass("ws-show-this").html(n),i=setTimeout(function(){$("#dvBillingMessage").removeClass("ws-show-this")},15e3)):($("#dvMessage").addClass("ws-show-this").html(n),i=setTimeout(function(){$("#dvMessage").removeClass("ws-show-this")},15e3))},IsInput:function(n){return WsVars.EnableMultiByte==="1"?!0:/^[\w\-\s\d\.\'\,#&ÀÈÌÒÙàèìòùÁÉÍÓÚÝáéíóúýÂÊÎÔÛâêîôûÃÑÕãñõÄËÏÖÜäëïöüçÇ]+$/.test(n)},GetOptin:function(){return $("#chOptinLogin").length>0?$("#chOptinLogin").prop("checked")==!0?"1":"0":$("#chOptin").length>0?$("#chOptin").prop("checked")==!0?"1":"0":WSMAIN.IsLoggedIn()&&WsVars.MemberProgram!=4?"1":"0"},GetOptinMobile:function(){return $("#chkOptinMobile").length>0?$("#chkOptinMobile").prop("checked")==!0?"1":"0":"0"},GetPrefs:function(){var n=[];return $("select[name=inGuestPref]").each(function(){$(this).val()!="0"&&n.push($(this).val())}),$("input[name=inGuestPref]:checked ").each(function(){n.push($(this).val())}),n.join(",")},update:function(){var n,t,i,r;for(this.dvs=null,n=jQuery.extend(!0,{},WSMAIN),n.Msg="",t=0;t<n.Items.length;t++)for(n.Items[t].Cancel="",n.Items[t].Policy="",i=0;i<n.Items[t].Svcs.length;i++)n.Items[t].Svcs[i].Policy="",n.Items[t].Svcs[i].CanPolicy="",n.Items[t].Svcs[i].Desc="";delete n.window;r={hgID:WsVars.HgID,hotelID:WsVars.HotelID,langID:WsVars.LangID,currID:WsVars.CurrencyId,wscart:JSON.stringify(n)};$("body").css({cursor:"wait"});$.ajax({type:"POST",url:"xml/setcart.aspx",data:r,dataType:"json",success:function(n){if(n.Msg!=null&&n.Msg.length>0&&WsVars.CurrencyId=="900"&&(Number(SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramConfig2)&SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramConfig2Enum.SuppLoyaltyPoints)>0&&WSMAIN.IsLoggedIn()&&WsVars.EnablePayByPoints=="1")return WSMAIN.Alert(n.Msg),!1;location.reload()},error:function(){$("body").css({cursor:"auto"})}})},getCountryflag:function(n){function v(n){$(n).val().trim().length<5?($(n).val(""),$(n).val(t+" "+$(n).val())):$(n).val().trim().length>5&&$(n).val().indexOf("+")!=-1?$(n).val($(n).val()):$(n).val(t+" "+$(n).val())}function y(n){$(n).val().trim().length<5?($(n).val(""),$(n).val(i+" "+$(n).val())):$(n).val().trim().length>5&&$(n).val().indexOf("+")!=-1?$(n).val($(n).val()):$(n).val(i+" "+$(n).val())}function g(){if(n=r.getSelectedCountryData().iso2,t="+"+r.getSelectedCountryData().dialCode,($("#txPhone").val().trim().length<5||$("#txPhone").val().indexOf("+")!=-1)&&(r=window.intlTelInput(f,{initialCountry:n,formatOnDisplay:!1}),v("#txPhone"),typeof n!="undefined"&&r.setCountry(n)),p(),f.value.trim())if(r.isValidNumber()&&$("#txPhone").val().indexOf("+")!=-1&&!$("#txPhone").val().match(h))b.classList.remove("hide");else{f.classList.add("error");var i=r.getValidationError();(i=="-99"||$("#txPhone").val().match(h))&&(i="0");o.innerHTML=d[i];o.innerHTML!="undefined"&&o.classList.remove("hide");$("#txPhone").val().trim().length<5&&(o.innerHTML="",f.classList.remove("error"))}}function nt(){if(n=u.getSelectedCountryData().iso2,i="+"+u.getSelectedCountryData().dialCode,($("#txMobile").val().trim().length<5||$("#txMobile").val().indexOf("+")!=-1)&&(u=window.intlTelInput(e,{initialCountry:n,formatOnDisplay:!1}),y("#txMobile"),typeof n!="undefined"&&u.setCountry(n)),w(),e.value.trim())if(u.isValidNumber()&&$("#txMobile").val().indexOf("+")!=-1&&!$("#txMobile").val().match(h))k.classList.remove("hide");else{e.classList.add("error");var t=u.getValidationError();(t=="-99"||$("#txMobile").val().match(h))&&(t="0");s.innerHTML=d[t];s.innerHTML!="undefined"&&s.classList.remove("hide");$("#txMobile").val().trim().length<5&&(s.innerHTML="",e.classList.remove("error"))}}var f=document.querySelector("#txPhone"),e=document.querySelector("#txMobile"),h,c,r,u,t,i;const o=document.querySelector("#error-msg"),b=document.querySelector("#valid-msg"),s=document.querySelector("#error-msg1"),k=document.querySelector("#valid-msg1"),d=["Invalid number","Invalid country code","Too short","Too long","Invalid number","Invalid Length"];if(h="[a-zA-Z@!#$%&*_~]+|[+]{2,}",c=document.getElementById("cbCountry"),n==""||typeof n=="undefined")var tt=window.intlTelInput(f),it=window.intlTelInput(e),l=tt.getSelectedCountryData().iso2,a=it.getSelectedCountryData().iso2;(n==""||typeof n=="undefined")&&$("#txPhone").val().length<1&&(n=c.options[c.selectedIndex].value);n=="-1"&&(n="US");typeof l!="undefined"&&l!=n&&$("#txPhone").val().length>1&&(n=l);r=window.intlTelInput(f,{initialCountry:n,autoPlaceholder:!1,formatOnDisplay:!1,utilsScript:"https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/js/utils.js"});n!=""&&typeof n!="undefined"&&r.setCountry(n);typeof a!="undefined"&&a!=n&&$("#txMobile").val().length>1&&(n=a);u=window.intlTelInput(e,{initialCountry:n,autoPlaceholder:!1,formatOnDisplay:!1,utilsScript:"https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/js/utils.js"});n!=""&&typeof n!="undefined"&&u.setCountry(n);t=r.getSelectedCountryData().dialCode;i=u.getSelectedCountryData().dialCode;typeof t=="undefined"&&(t="");t!=""&&typeof t!="undefined"&&(t="+"+t);i!=""&&typeof i!="undefined"&&(i="+"+i);typeof i=="undefined"&&(i="");window.onload=v("#txPhone");window.onload=y("#txMobile");$("#txPhone").click(function(){typeof r.getSelectedCountryData().dialCode!="undefined"&&(t="+"+r.getSelectedCountryData().dialCode,v("#txPhone"))});$("#txMobile").click(function(){typeof u.getSelectedCountryData().dialCode!="undefined"&&(i="+"+u.getSelectedCountryData().dialCode,y("#txMobile"))});$("#iti-2__country-listbox").click(function(){$("#txPhone").val($("#txPhone").val().replace(t,""));WSMAIN.getPhoneFlagDialCode()});$("#iti-3__country-listbox").click(function(){$("#txMobile").val($("#txMobile").val().replace(i,""));WSMAIN.getMobileFlagDialCode()});const p=()=>{f.classList.remove("error"),o.innerHTML="",o.classList.add("hide"),b.classList.add("hide")},w=()=>{e.classList.remove("error"),s.innerHTML="",s.classList.add("hide"),k.classList.add("hide")};rqWsPhone==!0&&g();rqWsMobile==!0&&nt();f.addEventListener("blur",()=>{g()});f.addEventListener("change",p);f.addEventListener("keyup",p);e.addEventListener("blur",()=>{nt()});e.addEventListener("change",w);e.addEventListener("keyup",w)},getCountryFlagOnChange:function(){var e=document.querySelector("#txPhone"),o=document.querySelector("#txMobile"),r=document.getElementById("cbCountry"),n=r.options[r.selectedIndex].value;n=="-1"&&(n="US");var u=window.intlTelInput(e,{initialCountry:n,autoPlaceholder:!1,formatOnDisplay:!1}),f=window.intlTelInput(o,{initialCountry:n,autoPlaceholder:!1,formatOnDisplay:!1}),t=u.getSelectedCountryData().dialCode,i=f.getSelectedCountryData().dialCode;typeof t!="undefined"&&$("#txPhone").val().indexOf("+")=="0"&&$("#txPhone").val().indexOf(t)=="1"&&($("#txPhone").val($("#txPhone").val().replace("/^[+]"+t+"/g","")),$("#txPhone").val().trim().length<5&&(document.getElementById("txPhone").value=""));typeof t!="undefined"&&$("#txPhone").val().indexOf("+"+t)==-1&&$("#txPhone").val("+"+t+" "+$("#txPhone").val());typeof i!="undefined"&&$("#txMobile").val().indexOf("+")=="0"&&$("#txMobile").val().indexOf(i)=="1"&&($("#txMobile").val($("#txMobile").val().replace("/^[+]"+i+"/g","")),$("#txMobile").val().trim().length<5&&(document.getElementById("txMobile").value=""));typeof i!="undefined"&&$("#txMobile").val().indexOf("+"+i)==-1&&$("#txMobile").val("+"+i+" "+$("#txMobile").val());u.setCountry(n);f.setCountry(n);WSMAIN.getCountryflag(n)},getPhoneFlagDialCode:function(){var n;document.getElementById("txPhone").defaultValue="";n=$("#txPhone").val();$("#txPhone").val("");var t=document.querySelector("#txPhone"),i=window.intlTelInput(t),r=i.getSelectedCountryData().dialCode;$("#txPhone").val().indexOf("+")==-1&&$("#txPhone").val("+"+r+n)},getMobileFlagDialCode:function(){var n;document.getElementById("txMobile").defaultValue="";n=$("#txMobile").val();$("#txMobile").val("");var t=document.querySelector("#txMobile"),i=window.intlTelInput(t),r=i.getSelectedCountryData().dialCode;$("#txMobile").val().indexOf("+")==-1&&$("#txMobile").val("+"+r+n)},resetCart:function(){var r=0,u,n,i,t;if(this.Items.length>0){for(u=this.Items.length,n=0;n<this.Items.length;n++)if(u+=this.Items[n].Svcs.length,this.Items[n].IsOL==!0&&this.Items[n].DailyOL.length>0){for(r=0,i=0;i<this.Items[n].DailyOL.length;i++)this.Items[n].DailyOL[i]=="1"&&r++;if(this.Items[n].IsOLResVal&&this.Items[n].Nights>0)return(WSMAIN.Alert(WsMulti.COMP7dayValidation),t=Number(n),t<0||t>=WSMAIN.Items.length)?!1:(WSMAIN.Items.splice(t,1),WSMAIN.update(),!1);if(this.Items[n].IsOL==!0&&this.Items[n].MaxCompNights>0&&r>this.Items[n].MaxCompNights)return(t=Number(n),t<0||t>=WSMAIN.Items.length)?!1:(WSMAIN.Items.length>1&&(WSMAIN.Items.splice(t,1),WSMAIN.update(),this.Alert(WsMulti.MaxCompNightsPerRoom,0)),!1);if(this.Items[n].IsOL==!0&&this.Items[n].OfferMinLOS>0&&this.Items[n].Nights>0&&this.Items[n].Nights<this.Items[n].OfferMinLOS)return(t=Number(n),t<0||t>=WSMAIN.Items.length)?!1:(WSMAIN.Items.length>1&&(WSMAIN.Items.splice(t,1),WSMAIN.update(),this.Alert(WsMulti.CompOfferMinLOS,0)),!1);if(this.Items[n].IsOL==!0&&this.Items[n].IncentiveMinLOS>0&&this.Items[n].Nights>0&&this.Items[n].Nights<this.Items[n].IncentiveMinLOS)return(t=Number(n),t<0||t>=WSMAIN.Items.length)?!1:(WSMAIN.Items.length>1&&this.Alert(WsMulti.CompIncentiveMinLOS,0),!1)}$("#MyHeading_buHeaderCart b").html(WsMulti.Cart+" ("+u+")")}},IsLoggedIn:function(){return WsVars.GuestLoyalty!=""||$("#MyHeading_buMember").length>0},CheckNeedSignUp:function(){if(SHRWindsurfer.WsLoyaltyHandler.hasActiveLoyaltyProgram()){if(this.IsLoggedIn()&&SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramID!=SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramEnum.FairCloud)return!1;if(SHRWindsurfer.Utils.CartContainsLoyalty())return!0}return!1},CheckShowSignUp:function(){return this.CheckNeedSignUp()?!0:SHRWindsurfer.WsLoyaltyHandler.hasActiveLoyaltyProgram()?SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramID===SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramEnum.FairCloud?!0:this.IsLoggedIn()?!1:SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramID===SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramEnum.Redlion?!0:SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramID===SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramEnum.WindsurferGuest?!0:SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramID===SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramEnum.StellerCRM?!0:SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramID===SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramEnum.MavrickCRM&&($("#chkMaverickSignUp").is(":checked")||$("#chkLoyaltyAgreeTerm").is(":visible"))?!0:SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramID===SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramEnum.ResortWorld&&$("#chkLoyaltyAgreeTerm").is(":visible")?!0:SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramID===SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramEnum.FBLV&&$("#chkLoyaltyAgreeTerm").is(":checked")?!0:!1:!1},LoyaltySignupChecked:function(){return $("#chkLoyaltyAgreeTerm").is(":hidden")?!1:$("#chkLoyaltyAgreeTerm").is(":checked")?!0:$("#chkMaverickSignUp").is(":checked")?!0:!1},WSRegGuestSignupChecked:function(){return SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramID!==SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramEnum.WindsurferGuest?!1:WSMAIN.LoyaltySignupChecked()},SetCCRequired:function(){var n=' <span class="ws-required redstarcc">*<\/span>';WsVars.IBESkinVer=="3"&&(n=' <span class="ws-required redstarcc" aria-label="required">*<\/span>');this.ReqCc||(WSMAIN.LoyaltySignupChecked()?($("#lbCardHolder,#lbCardType,#lbCardNumber,#lbCardExpire,#lbCardCvv").append(n),(WsVars.IsElavonFuseboxProp==!0||WsVars.IsFreedomPayProp==!0||WsVars.IsShift4Prop==!0)&&WsVars.TokenizeChargeRefund==!1&&$("#lbCardCvv").html($("#lbCardCvv").html().replace(n,""))):($("#lbCardHolder").html($("#lbCardHolder").html().replace(n,"")),$("#lbCardNumber").html($("#lbCardNumber").html().replace(n,"")),$("#lbCardExpire").html($("#lbCardExpire").html().replace(n,"")),$("#lbCardCvv").html($("#lbCardCvv").html().replace(n,""))))},ShowAgreeTermsModal:function(){SHRWindsurfer.WsLoyaltyHandler.hasActiveLoyaltyProgram()&&(SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramID==SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramEnum.StellerCRM||SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramID==SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramEnum.FairCloud)&&WSMAIN.SetCCRequired();var n=WSMAIN.CheckNeedSignUp(),t=$("#chkLoyaltyAgreeTerm").is(":checked");if(WSMAIN.emReserveTextVisibility(),n&&!t){if(SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramConfig===SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramConfigEnum.DontShowSignInSignUpForLoyaltyRates&&!SHRWindsurfer.Utils.CartContainsLoyalty())return;$.magnificPopup.open({items:{src:"#ws-modal-LAJagree",type:"inline"},callbacks:{close:function(){return($("#hdSignInClicked").val()=="1"||$("#hdSignUpClicked").val()=="1")&&$("#chkLoyaltyAgreeTerm").prop("checked",!0),$("#hdSignInClicked").val()=="0"&&WSMAIN.emReserveTextVisibility(),$.magnificPopup.proto.close.call(this),!1}}})}return n},CheckforSignUpSignIN:function(){var t,n;return WSEvents&&WSEvents.do_action("SignupValidateBegin",{}),t=SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramID==SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramEnum.FairCloud?"xml/setloyalty.aspx":"xml/setloyalty.aspx?verify=1",n={hotelID:WsVars.HotelID,langID:WsVars.LangID,hgID:WsVars.HgID,fname:$("#txFirstName").val(),lname:$("#txLastName").val(),eml:$("#txEmail").val(),rqWsEmail:rqWsEmail},SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramID==SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramEnum.FairCloud&&(n.billingZipCode=$("#txBillZip").val(),n.nameOnCard=$("#txCardHolder").val(),n.cardNumber=$("#txCardNumber").val(),n.expiryMonth=$("#cbCardMM").val().length>1?$("#cbCardMM").val():0+$("#cbCardMM").val(),n.expiryYear=$("#cbCardYY").val(),$("#cbSalutation").length>0&&(n.salute=$("#cbSalutation").val()),$("#cbBirthYY").length>0&&(n.dobY=$("#cbBirthYY").val()),$("#cbBirthMM").length>0&&(n.dobM=$("#cbBirthMM").val()),$("#cbBirthDD").length>0&&(n.dobD=$("#cbBirthDD").val()),$("#txPhone").length>0&&(n.phone=$("#txPhone").val()),$("#txAddress1").length>0&&(n.Address1=$("#txAddress1").val()),$("#txAddress2").length>0&&(n.Address2=$("#txAddress2").val()),$("#txCity").length>0&&(n.City=$("#txCity").val()),$("#txZip").length>0&&(n.Zip=$("#txZip").val()),$("#cbCountry").length>0&&(n.Country=$("#cbCountry").val()),$("#cbState").length>0&&$("#cbState").val()!=""?n.State=$("#cbState").val():$("#txState").length>0&&(n.State=$("#txState").val()),n.simple=1),SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramID==SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramEnum.FairCloud&&$.ajaxSetup({"async":!1}),$.ajax({type:"POST",url:t,data:n,dataType:"json",success:function(n){if(WSEvents&&WSEvents.do_action("SignupProcessOK",n),$("body").css({cursor:"auto"}),n.Msg.length>0&&($("#msgSignUp").length>0?$("#msgSignUp").html(n.Msg):$("#dvMessage").length>0&&($("#dvMessage").html(n.Msg),$("#dvMessage").addClass("ws-messages ws-collapsible ws-show-this"))),n.Status=="1")$("#MyHeading_buAgreeLogin").show(),$(".wsCartLoyaltyItemBuDelete").hide(),isNewGuest=!1;else if(n.Status==-1)$(".wsCartLoyaltyItemBuDelete").show(),$("#MyHeading_buAgreeLogin").hide(),isNewGuest=!0;else if(n.Status=="-4"&&SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramID==SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramEnum.FairCloud){n.Msg.length>0&&n.Msg=="Token expired"?($("#MyHeading_paraLoyalSignInHeaderFull").html(WsMulti.lbLoginExpiredMsg),$("#MyHeading_sbLoyalSignIn").html(WsMulti.lbLoginExpiredMsg)):($("#MyHeading_paraLoyalSignInHeaderFull").html(WsMulti.lbSignInMsgUniv),$("#MyHeading_sbLoyalSignIn").html(WsMulti.lbSignInMsgUniv));$("#txUnivLoginUsn").val($("#txEmail").val());$("#MyHeading_txLoginUsnHeaderFull").val($("#txEmail").val());$("#txUnivLoginUsn,#txUnivLoginPwd").removeClass("ws-error-form");$("#msgUnivLogin").html("");$("#txUnivLoginPwd").val("");isNewGuest=!0;$.magnificPopup.open({items:{src:"#ws-modal-login",type:"inline"},callbacks:{close:function(){return n.Msg.length>0&&n.Msg=="Token expired"?($("#MyHeading_paraLoyalSignInHeaderFull").html(WsMulti.lbLoginExpiredMsg),$("#MyHeading_sbLoyalSignIn").html(WsMulti.lbLoginExpiredMsg)):($("#MyHeading_paraLoyalSignInHeaderFull").html(WsMulti.lbSignInMsgUniv),$("#MyHeading_sbLoyalSignIn").html(WsMulti.lbSignInMsgUniv)),$.magnificPopup.proto.close.call(this),!1}}});SHRWindsurfer.Utils.CartContainsLoyalty()?WSMAIN.Alert(WsMulti.MsgLoginForPromo):WSMAIN.Alert(WsMulti.MsgLoginForNonPromo)}SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramID==SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramEnum.FairCloud&&(document.querySelector("#hSignupStatus").value=n.Status)},error:function(n){return $("body").css({cursor:"auto"}),WSEvents&&WSEvents.do_action("SignupProcessError",n),!1}}),isNewGuest},IsEmpty:function(n){return typeof n=="undefined"||n.length<=0||n==""||isNaN(n)||n<0?!0:!1},IsEmailFirstLastName:function(){var n=$("#txFirstName").val(),t=$("#txLastName").val(),i=$("#txEmail").val(),r,u,f;return SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramID==SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramEnum.ResortWorld?($("#cbBirthYY").length>0&&(r=$("#cbBirthYY").val()),$("#cbBirthMM").length>0&&(u=$("#cbBirthMM").val()),$("#cbBirthDD").length>0&&(f=$("#cbBirthDD").val()),n!=""&&t!=""&&i!=""&&r!=""&&u!=""&&f!=""?!0:!1):n!=""&&t!=""&&i!=""?!0:!1},LoadAdditionalGuestsField:function(n){var l=WsVars.EnableConciergeService=="1",f=Number(WsVars.AdditionalGuestsAllowed),t,i,o,s,u,r,h,a,c,e;if(WsVars.EnableConciergeService=="1"&&ShowTransBookGuestInputs())f=Number.MAX_SAFE_INTEGER;else if(WsVars.EnableConciergeService=="1"){for(t=0;t<WSMAIN.Items.length;t++)$("#dvAdnlGuestInfo_"+t).remove();$("#TranspAddGuestCount").val("0");$("#fdAdditionDetails, #fdAdditionalGuests").empty().hide();WSMAIN.LoadConciergeAdditionalGuestsFields("0");return}if(WsVars.EnableConciergeService!="1"&&sessionStorage.clear(),f>0)for(t=0;t<WSMAIN.Items.length;t++){if(i=WSMAIN.Items[t],o=0,i.Adults>0&&(o=Number(i.Adults)),i.Child1!=undefined&&(o+=Number(i.Child1)),i.Child2!=undefined&&(o+=Number(i.Child2)),i.Child3!=undefined&&(o+=Number(i.Child3)),i.Child4!=undefined&&(o+=Number(i.Child4)),s=$("#dvAdnlGuestInfo_"+t).attr("totalOccupancy"),u=o-1,i.AdditionalGuests!=null&&i.AdditionalGuests.length>u&&(u=i.AdditionalGuests.length),u==0){$("#dvAdnlGuestInfo_"+t).remove();continue}if(r=0,s!=undefined)if(h=Number(s),h==u)continue;else if(h<u)r=h;else{for(e=s;e>u;e--)$("#dvAdnlGuestInfo_"+t+"_"+(e-1)).remove();$("#dvAdnlGuestInfo_"+t).attr("totalOccupancy",u);continue}else a=i.RoomType+"/"+i.RateType,Number(u)>0&&WsVars.EnableConciergeService!="1"&&$("#dvAdditionalGuests").append("<div id='dvAdnlGuestInfo_"+t+"' CrsResvId='"+i.CrsID+"' idx='"+t+"' class='ws-form-item'><input type='hidden' id='roomTypeID_"+t+"' name='roomTypeID_"+t+"' value='"+i.RmID+"'/><p id='pRoomRateOccu_"+t+"' ><strong> "+a+"<\/strong><\/p><\/div>");if(f=Number(WsVars.AdditionalGuestsAllowed),Number(u)<f&&(f=u),WsVars.EnableConciergeService!="1"){for(r;r<f;r++)$("#dvAdnlGuestInfo_"+t).append("<div id='dvAdnlGuestInfo_"+t+"_"+r+"' class='ws-form-item' ><div id='dvAddGuestFirstName' class='ws-form-item ws-medium'><label for='txAddGuestFirstName_"+t+"_"+r+"' id='lbAddGuestFirstName_"+t+"_"+r+"'>"+WsMulti.Guest+" "+(r+2)+" "+WsMulti.FirstName+(l?" <span class='ws-required'>*<\/span>":"")+"<\/label ><input name='txAddGuestFirstName_"+t+"_"+r+"' ref='"+t+"_"+r+"' type='text' maxlength='20' id='txAddGuestFirstName_"+t+"_"+r+"' class='ws-element'><p class='ws-error' style='display:block'><\/p><\/div><div id='dvAddGuestLastName' class='ws-form-item ws-medium ws-multi'><label for='txAddGuestLastName_"+t+"_"+r+"' id='lbAddGuestLastName_"+t+"_"+r+"'>"+WsMulti.Guest+" "+(r+2)+" "+WsMulti.LastName+(l?" <span class='ws-required'>*<\/span>":"")+" <\/label><input name='txAddGuestLastName_"+t+"_"+r+"' ref='"+t+"_"+r+"' type='text' maxlength='20' id='txAddGuestLastName_"+t+"_"+r+"' class='ws-element'><p class='ws-error' style='display:block'><\/p><\/div><\/div>");if(n!=undefined&&n.length>0)for(c=0,e=0;e<n.length;e++)Number(n[e].RoomStayIdx)==t&&($("#txAddGuestFirstName_"+t+"_"+c).val(n[e].FirstName),$("#txAddGuestLastName_"+t+"_"+c).val(n[e].LastName),c++);$("#dvAdnlGuestInfo_"+t).attr("totalOccupancy",u)}else f=f==0?u:f,$("#TranspAddGuestCount").val(f),WSMAIN.LoadConciergeAdditionalGuestsFields(f)}},ValidateAdditionalGuest:function(n){$("#txAddGuestFirstName_"+n+" + p.ws-error").css("display","none");$("#txAddGuestLastName_"+n+" + p.ws-error").css("display","none");var t=$("#txAddGuestFirstName_"+n).val(),i=$("#txAddGuestLastName_"+n).val();return(t===""||t===undefined)&&(i===""||i===undefined)?!0:t!==""&&i!==""?!0:t===""?($("#txAddGuestFirstName_"+n+" + p.ws-error").html(WsMulti.EnterFirstName),$("#txAddGuestFirstName_"+n+" + p.ws-error").css("display","block"),!1):i===""?($("#txAddGuestLastName_"+n+" + p.ws-error").html(WsMulti.EnterLastName),$("#txAddGuestLastName_"+n+" + p.ws-error").css("display","block"),!1):!0},GetRmRtAddGuestsName:function(){var s=[],u=Number(WsVars.AdditionalGuestsAllowed),t,n,i,o,r,f,e;if(u>0&&WSMAIN.Items.length>0)for(t=0;t<WSMAIN.Items.length;t++)for(n=WSMAIN.Items[t],i=0,n.Adults>0&&(i=Number(n.Adults)),n.Child1!=undefined&&(i+=Number(n.Child1)),n.Child2!=undefined&&(i+=Number(n.Child2)),n.Child3!=undefined&&(i+=Number(n.Child3)),n.Child4!=undefined&&(i+=Number(n.Child4)),o=i-1,r=0,u=Number(WsVars.AdditionalGuestsAllowed),Number(o)<Number(WsVars.AdditionalGuestsAllowed)&&(u=o),r;r<u;r++)f=$("#txAddGuestFirstName_"+t+"_"+r).val(),e=$("#txAddGuestLastName_"+t+"_"+r).val(),f!=undefined&&e!=undefined&&f!=""&&e!=""&&s.push(t+"_"+f+"|"+e);return s},CheckPolicy:function(n){var t;if(n!=undefined&&n!=null&&n.length>0){var r=!1,u=!1,f=!1,i=n[0].Guar;for(t=0;t<n.length;t++)switch(n[t].Guar){case"DX":case"PP":f=!0;i=n[t].Guar;break;case"GX":u=!0;break;case"XX":r=!0}return u?"GX":f?i:r?"XX":i}},GetDepositByPayOpt:function(n){var i=0,e=0,t,a,v,f,u,c,s;if(WSMAIN.Items!=null&&WSMAIN.Items.length>0)for(t=0;t<WSMAIN.Items.length;t++){var r=0,h=0,l=0,o=WSMAIN.GetLoyaltyRedeemAmtFromItm(WSMAIN.Items[t]),y=WSMAIN.CheckPolicy(WSMAIN.Items);if(e+=o,WSMAIN.Items[t].Deposit>0&&WSMAIN.Items[t].Svcs!=null&&WSMAIN.Items[t].Svcs.length>0){for(a=0,v=0,f=0;f<WSMAIN.Items[t].Svcs.length;f++)(WSMAIN.Items[t].Svcs[f].Options.search("IncludeInDeposit")!="-1"||n=="OptFullPrePayment"||y==="PP")&&(a+=WSMAIN.Items[t].Svcs[f].Amt,v+=WSMAIN.Items[t].Svcs[f].Taxes);l=a+v}$("#tdSubtotal_"+t).length>0&&(h=$("#tdSubtotal_"+t).attr("ref"));n=="OptFullPrePayment"?r=h:(r=WSMAIN.Items[t].Deposit+l,i+=WSMAIN.Items[t].Deposit+l);WSMAIN.Items[t].PayOpt=n;WSMAIN.Items[t].TotalAmt=h;r<=0?($("#trDeposit_"+t).hide(),$("#trDepositRemain_"+t).hide()):($("#trDeposit_"+t).show(),$("#tdDeposit_"+t).length>0&&(o>0&&(r=r>o?r-o:0),$("#tdDeposit_"+t).attr("curr",WsVars.Currency),$("#tdDeposit_"+t).html(Utils.GetAmount(r,WsVars.Currency,WsVars.UseCurrCode)),$("#tdDeposit_"+t).attr("ref",Utils.ToNumberFormat(r,WsVars.Currency))),u=h-(r+o),WSMAIN.IsEmpty(u)&&(u=0),$("#dvLpTotalDetailRemainingAmt_"+t).length>0?($("#trDepositRemain_"+t).length>0&&$("#trDepositRemain_"+t).hide(),$("#txtLpTotalDetailRemainingAmt_"+t).length>0&&($("#txtLpTotalDetailRemainingAmt_"+t).attr("curr",WsVars.Currency),$("#txtLpTotalDetailRemainingAmt_"+t).html(Utils.GetAmount(u,WsVars.Currency,WsVars.UseCurrCode)),$("#txtLpTotalDetailRemainingAmt_"+t).attr("ref",Utils.ToNumberFormat(u,WsVars.Currency)))):($("#trDepositRemain_"+t).length>0&&$("#trDepositRemain_"+t).show(),$("#tdDepositRemain_"+t).length>0&&($("#tdDepositRemain_"+t).attr("curr",WsVars.Currency),$("#tdDepositRemain_"+t).html(Utils.GetAmount(u,WsVars.Currency,WsVars.UseCurrCode)),$("#tdDepositRemain_"+t).attr("ref",Utils.ToNumberFormat(u,WsVars.Currency)))),WsVars.IsFreedomPayProp==1&&window.wsFreedompay!=undefined&&window.wsFreedompay.Options!=undefined&&window.wsFreedompay.Enabled()&&window.wsFreedompay.Events!=undefined&&WSMAIN.ReqCc==!0&&window.wsFreedompay.Events.ClientReady())}c=0;$("#txTotal").length>0&&(c=$("#txTotal").attr("ref"));n=="OptFullPrePayment"&&(i=c);$("#dvDeposit").length>0&&(i<=0?showOrHideDvSection($("#dvDeposit"),!1):(showOrHideDvSection($("#dvDeposit"),!0),e>0&&(i=i>e?i-e:0),$("#txDeposit").attr("curr",WsVars.Currency),$("#txDeposit").html(Utils.GetAmount(i,WsVars.Currency,WsVars.UseCurrCode)),$("#txDeposit").attr("ref",Utils.ToNumberFormat(i,WsVars.Currency)),s=c-(i+e),WSMAIN.IsEmpty(s)&&(s=0),$("#txSumRemainingAmt").length>0&&($("#txSumRemainingAmt").attr("curr",WsVars.Currency),$("#txSumRemainingAmt").html(Utils.GetAmount(s,WsVars.Currency,WsVars.UseCurrCode)),$("#txSumRemainingAmt").attr("ref",s))));(WsVars.IsPaymentGateway==="1"||WsVars.GuestLoyalty!=""||$("#MyHeading_buMember").length>0)&&(typeof WsShowRates!="undefined"&&WsShowRates(),ShowBaseOrSelectedCurrencyPrices())},GetLoyaltyRedeemAmtFromItm:function(n){var i=0,t;if(WSMAIN.IsLoggedIn()&&(Number(SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramConfig2)&SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramConfig2Enum.SuppLoyaltyPoints)>0&&(n.LoyaltyPointsInfo!==undefined&&n.LoyaltyPointsInfo!=null&&n.LoyaltyPointsInfo.EntityID>0&&(i=n.LoyaltyPointsInfo.LoyaltyRedeemAmount/100),n.Svcs!==undefined&&n.Svcs!=null))for(t=0;t<n.Svcs.length;t++)n.Svcs[t].LoyaltyPointsInfo!==undefined&&n.Svcs[t].LoyaltyPointsInfo!=null&&n.Svcs[t].LoyaltyPointsInfo.EntityID>0&&(i+=n.Svcs[t].LoyaltyPointsInfo.LoyaltyRedeemAmount/100);return i},LoadGuestsProgramsField:function(n){var t,i;if(WsVars.ActiveMembershipAndRegEx!=undefined&&WsVars.ActiveMembershipAndRegEx!=""&&!$.isEmptyObject(WsVars.ActiveMembershipAndRegEx)){$("#dvWsGuestMerbershipProgram").append("<div id='dvActiveGuestPrograms' class='ws-form-item'><p id='pGuestProgramTitle' ><strong> "+WsMulti.GuestProgramTitle+"<\/strong><\/p><\/div>");for(t in WsVars.ActiveMembershipAndRegEx)t!=undefined&&t!=""&&$("#dvActiveGuestPrograms").append("<div id='dvActiveGuestPrograms_"+t+"' class='ws-form-item' ><div id='dvFirstGuestProgram' class='ws-form-item'><label for='txGuestProgramName_"+t+"' id='lblGuestMembershipPrograms_"+t+"'>"+WsVars.ActiveMembershipAndRegEx[t].ProgramName+"<\/label ><input name='txGuestProgramName_"+t+"' ref='"+t+"' type='text' id='txGuestProgramName_"+t+"' class='ws-element' value ='"+WsVars.ActiveMembershipAndRegEx[t].GuestProgMemberID+"'><p class='ws-error' style='display:block'><\/p><\/div><\/div>");if(n!=undefined&&n!=""&&n.length>0)for(i=0;i<n.length;i++)$("#txGuestProgramName_"+n[i].ProgCode).val(n[i].GuestProgCode)}},GetHotelGuestMerbershipProgram:function(){var i=[],n,t;if(WsVars.ActiveMembershipAndRegEx!=undefined&&WsVars.ActiveMembershipAndRegEx!=""&&!$.isEmptyObject(WsVars.ActiveMembershipAndRegEx))for(n in WsVars.ActiveMembershipAndRegEx)n!=undefined&&n!=""&&(t=$("#txGuestProgramName_"+n).val(),t!=undefined&&t!=""&&i.push(n+"|"+t));return i},GetRegexFromProgramCode:function(n){var i,t,r,u;if($("#txGuestProgramName_"+n).length>0){if(i=!1,t=$("#txGuestProgramName_"+n).val(),t!=undefined&&t!=""&&WsVars.ActiveMembershipAndRegEx!=undefined&&WsVars.ActiveMembershipAndRegEx!=""&&!$.isEmptyObject(WsVars.ActiveMembershipAndRegEx)&&t.length>0&&WsVars.ActiveMembershipAndRegEx.hasOwnProperty(n)&&(r=WsVars.ActiveMembershipAndRegEx[n].MembershipRegEx,u=ValidRegex(r),u!=undefined&&u==!0&&!t.match(r)&&$("#lblGuestMembershipPrograms_"+n).length>0))return $("#"+$("#txGuestProgramName_"+n)[0].id+"+ p.ws-error").html(WsMsgFmRegexValidation+" "+$("#lblGuestMembershipPrograms_"+n)[0].innerHTML),$("#txGuestProgramName_"+n).addClass("ws-error-form"),i=!0,$("#txGuestProgramName_"+n)[0].id;i||$("#"+$("#txGuestProgramName_"+n)[0].id+"+ p.ws-error").hasClass("ws-error")&&($("#txGuestProgramName_"+n).removeClass("ws-error-form"),$("#"+$("#txGuestProgramName_"+n)[0].id+"+ p.ws-error").html(""))}return 0},LoadConciergeAdditionalGuestsFields:function(n){var h=ConciergeProviderIncluded(),r,u,o,t,i,f,a,s;if(WsVars.EnableConciergeService=="1"&&h!=""){r=$("#fdAdditionDetails");u=$("#fdAdditionalGuests");rqWsEmail=rqWsFirstName=rqWsLastName=rqWsAddress1=rqWsCity=rqWsState=rqWsCountry=rqWsZip=rqWsMobile=!0;$("#dvWsEmail, #dvWsFirstName, #dvWsLastName, #dvWsAddress1, #dvWsCity, #dvState, #dvWsCountry, #dvWsZip, #dvWsMobile").show();r.removeClass("ws-hidden").addClass("ws-visible");r.find(".guest-block").remove();u.find(".guest-block").remove();n>0&&(u.removeClass("ws-hidden").addClass("ws-visible"),$("#hdAdditionalGuests").text(SHR.__("AdditionalGuest")));var e=0,c=0,l=0,v=0;for(let n=0;n<WSMAIN.Items.length;n++)Number(WSMAIN.Items[n].Adults||0)>e&&(e=Number(WSMAIN.Items[n].Adults||0)),o=Number(WSMAIN.Items[n].Child1||0)+Number(WSMAIN.Items[n].Child2||0)+Number(WSMAIN.Items[n].Child3||0)+Number(WSMAIN.Items[n].Child4||0),o>c&&(c=o);for(t=1;t<=n+1;t++)i=t===1,f=!1,l<e?(l++,f=!0):v++,a=f?SHR.__("Adult"):SHR.__("Child"),s=`
                 ${i?`<legend>${SHR.__("AdditionalInformation")}</legend>`:""}
                <div class="guest-block" id="guestBlockG${t}">
                    ${i?"":`<h4>${SHR.__("Guest")} ${t} (${a})</h4>`}

                    ${i?"":`
                    <div class="ws-form-item" id="divG${t}Email">
                        <label for="txtG${t}Email">${SHR.__("EmailAddress")} <span class="ws-required" aria-label="required">*</span></label>
                        <input type="email" id="txtG${t}Email" name="txtG${t}Email" class="ws-element" />
                        <p class="ws-error"></p>
                    </div>

                    <div class="ws-form-item" id="divG${t}FirstName">
                        <label for="txtG${t}FirstName">${SHR.__("FirstName")}<span class="ws-required" aria-label="required">*</span></label>
                        <input type="text" id="txtG${t}FirstName" name="txtG${t}FirstName" class="ws-element" />
                        <p class="ws-error"></p>
                    </div>

                    <div class="ws-form-item" id="divG${t}LastName">
                        <label for="txtG${t}LastName">${SHR.__("LastName")}<span class="ws-required" aria-label="required">*</span></label>
                        <input type="text" id="txtG${t}LastName" name="txtG${t}LastName" class="ws-element" />
                        <p class="ws-error"></p>
                    </div>`}

                    <div class="ws-form-item" id="divG${t}Gender">
                        <label for="ddlG${t}Gender">${SHR.__("Gender")}<span class="ws-required" aria-label="required">*</span></label>
                        <select id="ddlG${t}Gender" name="ddlG${t}Gender" class="custom ws-element">
                            <option value=""></option>
                            <option value="M">Male</option>
                            <option value="F">Female</option>
                        </select>
                        <p class="ws-error"></p>
                    </div>

                     ${!i||i&&!$("#dvWsDob").is(":visible")?`
                         <div class="ws-form-item" id="divG${t}DOB">
                             <label>${SHR.__("DateOfBirth")}<span class="ws-required" aria-label="required">*</span></label>
                             <select id="ddlG${t}DobMM" name="ddlG${t}DobMM" class="custom ws-element addGBirthMM " autocomplete="bday-month"></select>
                             <select id="ddlG${t}DobDD" name="ddlG${t}DobDD" class="custom ws-element addGBirthDD " autocomplete="bday-day"></select>
                             <select id="ddlG${t}DobYY" name="ddlG${t}DobYY" class="custom ws-element addGBirthYY " autocomplete="bday-year"></select>
                             <p class="ws-error"></p>
                             <input type="hidden" id="guest${t}IsAdult" value="${f}" >
                         </div>
                    `:""}

                    <div class="ws-form-item" id="divG${t}BodyWeight">
                        <label for="txtG${t}BodyWeight">${SHR.__("BodyWeight")}<span class="ws-required" aria-label="required">*</span></label>
                        <input type="text" id="txtG${t}BodyWeight" name="txtG${t}BodyWeight" class="ws-element" />
                        <p class="ws-error"></p>
                    </div>

                    <div class="ws-form-item" id="divG${t}CountryOfCitizenship">
                        <label for="ddlG${t}CountryOfCitizenship">${SHR.__("CountryOfCitizenship")}<span class="ws-required" aria-label="required">*</span></label>
                        <select id="ddlG${t}CountryOfCitizenship" name="ddlG${t}CountryOfCitizenship" class="custom ws-element"></select>
                        <p class="ws-error"></p>
                    </div>

                    <div class="ws-form-item" id="divG${t}PassportNum">
                        <label for="txtG${t}PassportNum">${SHR.__("PassportNumber")}<span class="ws-required" aria-label="required">*</span></label>
                        <input type="text" id="txtG${t}PassportNum" name="txtG${t}PassportNum" class="ws-element" />
                        <p class="ws-error"></p>
                    </div>

                    <div class="ws-form-item" id="divG${t}PassportExpDate">
                        <label>${SHR.__("PassportExpiryDate")}<span class="ws-required" aria-label="required">*</span></label>
                        <select id="ddlG${t}PassExpMon" name="ddlG${t}PassExpMon" class="custom ws-element addGCardMM" autocomplete="cc-exp-month"></select>
                        <select id="ddlG${t}PassExpYear" name="ddlG${t}PassExpYear" class="custom ws-element addGCardYY" autocomplete="cc-exp-year"></select>
                        <p class="ws-error"></p>
                    </div>

                    <div class="ws-form-item" id="divG${t}PassportIssueC">
                        <label for="ddlG${t}PassportIssueC">${SHR.__("PassportIssuingCountry")}<span class="ws-required" aria-label="required">*</span></label>
                        <select id="ddlG${t}PassportIssueC" name="ddlG${t}PassportIssueC" class="custom ws-element"></select>
                        <p class="ws-error"></p>
                    </div>
                    <!--
                    <div class="ws-form-item" id="divG${t}SecDocumentType">
                        <label for="ddlG${t}SecDocumentType">${SHR.__("SecondaryDocumentType")}</label>
                        <select id="ddlG${t}SecDocumentType" name="ddlG${t}SecDocumentType" class="custom ws-element"></select>
                        <p class="ws-error"></p>
                    </div>

                    <div class="ws-form-item" id="divG${t}SecDocumentNum">
                        <label for="txtG${t}SecDocumentNum">${SHR.__("SecondaryDocumentNumber")}</label>
                        <input type="text" id="txtG${t}SecDocumentNum" name="txtG${t}SecDocumentNum" class="ws-element" />
                        <p class="ws-error"></p>
                    </div>

                    <div class="ws-form-item" id="divG${t}SecDocumentIssC">
                        <label for="ddlG${t}SecDocumentIssC">${SHR.__("SecondaryDocumentIssuingCountry")}</label>
                        <select id="ddlG${t}SecDocumentIssC" name="ddlG${t}SecDocumentIssC" class="custom ws-element"></select>
                        <p class="ws-error"></p>
                    </div>

                    <div class="ws-form-item" id="divG${t}SecDocumentExpDate">
                        <label>${SHR.__("SecondaryDocumentExpiryDate")}</label>
                        <select id="ddlG${t}SecDocumentExpMon" name="ddlG${t}SecDocumentExpMon" class="custom ws-element addGCardMM" autocomplete="cc-exp-month"></select>
                        <select id="ddlG${t}SecDocumentExpYear" name="ddlG${t}SecDocumentExpYear" class="custom ws-element addGCardYY" autocomplete="cc-exp-year"></select>
                        <p class="ws-error"></p>
                    </div>
                    -->

                    ${i?`
                    <fieldset class="ws-form-item" id="fdG${t}USAddressBlock">
                        <legend>${SHR.__("USBasedAddress")}</legend>

                        <div class="ws-form-item" id="divG${t}USAddress">
                            <label for="txtG${t}USAddress">${SHR.__("Address")}<span class="ws-required" aria-label="required">*</span></label>
                            <input type="text" id="txtG${t}USAddress" name="txtG${t}USAddress" class="ws-element" />
                            <p class="ws-error"></p>
                        </div>

                        <div class="ws-form-item addGAdrrbox" id="divG${t}USCity">
                            <label for="txtG${t}USCity">${SHR.__("City")}<span class="ws-required" aria-label="required">*</span></label>
                            <input type="text" id="txtG${t}USCity" name="txtG${t}USCity" class="ws-element" />
                            <p class="ws-error"></p>
                        </div>

                        <div class="ws-form-item addGAdrrbox ws-multi" id="divG${t}USZipCode">
                            <label for="txtG${t}USZipCode">${SHR.__("ZipCode")}<span class="ws-required" aria-label="required">*</span></label>
                            <input type="text" id="txtG${t}USZipCode" name="txtG${t}USZipCode" class="ws-element" />
                            <p class="ws-error"></p>
                        </div>

                        <div class="ws-form-item addGAdrrbox" id="divG${t}USCountry">
                            <label for="ddlG${t}USCountry">${SHR.__("Country")}<span class="ws-required" aria-label="required">*</span></label>
                            <select id="ddlG${t}USCountry" name="ddlG${t}USCountry" class="custom ws-element">
                                <option value="US">USA</option>
                            </select>
                            <p class="ws-error"></p>
                        </div>

                        <div class="ws-form-item addGAdrrbox ws-multi" id="divG${t}USState">
                            <label for="ddlG${t}USState">${SHR.__("State")}<span class="ws-required" aria-label="required">*</span></label>
                            <select id="ddlG${t}USState" name="ddlG${t}USState" class="custom ws-element"></select>
                            <p class="ws-error"></p>
                        </div>
                    </fieldset>
                    `:""}

                </div>
                `,i?r.html(s).show():u.append(s).show(),bindCountryDropdown(`#ddlG${t}PassportIssueC`),bindStateDropDownForUSAddress(`#ddlG${t}USState`),bindCountryDropdown(`#ddlG${t}CountryOfCitizenship`),bindExpiryDropdowns(`#ddlG${t}PassExpMon`,`#ddlG${t}PassExpYear`,WsVars.LangID),bindDateOfBirthDropdowns(`#ddlG${t}DobMM`,`#ddlG${t}DobDD`,`#ddlG${t}DobYY`),h=="0"&&$(`#divG${t}CountryOfCitizenship, #divG${t}BodyWeight`).hide(),bindConciergeGuestAdditionalData(),$(".guest-block select.custom").customSelect(),$(".customSelect").append('<span class="ws-down-arrow" aria-hidden="true"><\/span>');$("#cbCountry").val()!="US"&&$("#guestBlockG1").is(":visible")?$("#fdG1USAddressBlock").show():$("#fdG1USAddressBlock").hide();$("#lbAddress1, #lbCity, label[for='cbState'], #lbZip, #lbCountry, #lbMobile").each(function(){$(this).find(".ws-required").length===0&&$(this).append(" <span class='ws-required'>*<\/span>")})}}},function(n){n(document).on("wsShowProcessingCursor",function(){n("body").css({cursor:"wait"})}).on("wsHideProcessingCursor",function(){n("body").css({cursor:"auto"})}).on("wsShowProcessingModal",function(){n(".divWaitLoadingProcessing").show();n(document).trigger("wsShowProcessingCursor")}).on("wsHideProcessingModal",function(){n(".divWaitLoadingProcessing").hide();n(document).trigger("wsHideProcessingCursor")})}(jQuery);WsHasProgram=!1;jQuery(document).ready(function(n){var f,t,r,e,o;rqCountryDialCode&&(n("#txPhone").length>0||n("#txMobile").length>0)&&WSMAIN.getCountryflag();n("input:radio[name='rblSHRPayFullPrePayment']").change(function(){var t=n("input:radio[name='rblSHRPayFullPrePayment']:checked").val();n("input:radio[name='rblPayFullPrePayment']").removeAttr("checked");ChangeOnFullPrePayment(t)});n("input:radio[name='rblPayFullPrePayment']").change(function(){var t=n("input:radio[name='rblPayFullPrePayment']:checked").val();n("input:radio[name='rblSHRPayFullPrePayment']").removeAttr("checked");ChangeOnFullPrePayment(t)});n("input:radio[name='rdPayMethodType']").change(function(){let t=n("input:radio[name='rdPayMethodType']:checked").val();ShowHidePaymentMethodDvSection(t);n("input:radio[name='rdPayMethodType']:checked").blur()});n("input:radio[name='WsPaymentMethod$rdPayMethodType']").change(function(){let t=n("input:radio[name='WsPaymentMethod$rdPayMethodType']:checked").val();ShowHidePaymentMethodDvSection(t);n("input:radio[name='WsPaymentMethod$rdPayMethodType']:checked").blur()});f=["txLoginEmail","txPassword","txEmail","txRetypeEmail","txNewPassword","txPasswordVerify","cbSalutation","txFirstName","txMiddleInit","txLastName","txAddress1","txAddress2","txCity","txZip","cbCountry","txState","cbState","txCompany","cbGender","cbBirthMM","cbBirthDD","cbBirthYY","txMemberID","txPhone","txMobile","txEmailAlt","txBooked","cbTripPurpose","cbTravelProgram","txTravelMember","txArrFlight","txArrTime","cbArrTime","txComments","inGuestPref","cbAdyenMethod","txCardHolder","txCardNumber","cbCardMM","cbCardYY","txCardCvv","chkBillDiff","txBillAddress1","txBillAddress2","txBillCity","txBillZip","cbBillCountry","txBillState","cbBillState","txtEigenCardHolder"];t=!1;SHRWindsurfer.WsLoyaltyHandler.hasActiveLoyaltyProgram()&&(WsHasProgram=!0);WsVars.OptInDefaultChecked=="1"&&(SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramConfig==SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramConfigEnum.ShowSignInSignUpWithAmountDisplayedForLoyaltyRates||SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramConfig==SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramConfigEnum.DontShowSignInSignUpForLoyaltyRates)?n("#chkLoyaltyAgreeTerm").prop("checked",!0):WsVars.OptInDefaultChecked=="1"?WSMAIN.CheckNeedSignUp()?n("#chkLoyaltyAgreeTerm").prop("checked",!0):n("#chkLoyaltyAgreeTerm").prop("checked",!1):n("#chkLoyaltyAgreeTerm").prop("checked",!1);WSMAIN.emReserveTextVisibility();r=!1;e="";WsGstBillState="";o=/^[a-z0-9]+$/i;n("#txCardHolder,#txCardNumber,#txCardCvv").val("");WsVars.IsAdyenV2=="1"&&n("#txGiftCardNumber,#txGiftCardCvc").length>0&&n("#txGiftCardNumber,#txGiftCardCvc").val("");n("#dvCardType .cc-icon").addClass("ccselected");try{document.getElementById("cbCardMM").selectedIndex=0;document.getElementById("cbCardYY").selectedIndex=0}catch(l){}n(".customSelect").remove();n(".custom").removeClass("hasCustomSelect").css({appearance:"",position:"",opacity:"","font-size":""}).customSelect();n("#txMobile").length>0&&n("#txMobile").val().length>0&&n("#dvWsMobile").is(":visible")&&n("#dvWsOptinMobile").show();n("#txLoginEmail").length>0?(WsHasProgram=!0,n("#dvWsEmail,#dvWsRetypeEmail,#dvWsOptinEmail").hide(),SHRWindsurfer.Utils.IsValidEmail(n("#txLoginEmail").val())&&n("#dvWsOptinLoginEmail").show()):n("#txEmail").length>0&&(SHRWindsurfer.WsLoyaltyHandler.hasActiveLoyaltyProgram()&&(WsHasProgram=!0,n("#dvWsEmail").show(),SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramConfig===SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramConfigEnum.DontShowSignInSignUpForLoyaltyRates&&(location.hash!=""&&location.hash.indexOf("#ws-rlded")>-1?(location.hash="",n("#chkLoyaltyAgreeTerm").prop("checked",!1),WSMAIN.emReserveTextVisibility()):(n("#chkLoyaltyAgreeTerm").prop("checked",!0),WSMAIN.emReserveTextVisibility()))),SHRWindsurfer.Utils.IsValidEmail(n("#txEmail").val())&&n("#dvWsOptinEmail").show());n("#chkBillDiff").prop("checked")==!0?n("#ws-billing-address").addClass("ws-show-this"):(n("#ws-billing-address").removeClass("ws-show-this"),n("#ws-billing-address input,#ws-billing-address select").attr("disabled","disabled"));n("#cbState option").length>1?(n("#dvState .customSelect, #dvState .ws-required").show(),n("#cbState").removeClass("ws-hide"),n("#txState").hide()):(n("#dvState .customSelect, #dvState .ws-required").hide(),n("#cbState").addClass("ws-hide"),n("#txState").show());n("#cbBillState option").length>1?(n("#dvBillState .customSelect, #dvBillState .ws-required").show(),n("#cbBillState").removeClass("ws-hide"),n("#txBillState").hide()):(n("#dvBillState .customSelect, #dvBillState .ws-required").hide(),n("#cbBillState").addClass("ws-hide"),n("#txBillState").show());n("#txPhone,#txMobile,#txZip,#txBillZip").keypress(function(){i(!0)});n(document).on("keyup","#wsform #dvAdditionalGuests input[type=text]",function(){var n=this.attributes.ref.value;WSMAIN.ValidateAdditionalGuest(n)});n(document).on("change","#wsform .guest-block input, #wsform .guest-block select",function(t){if(WsVars.EnableConciergeService=="1"){n(".ws-reserve-button").addClass("ws-disabled");var i=IsValidAdditionalGuest(n(t.target).closest(".guest-block"),n(t.target));if(!i)return!1;n(t.target).closest("form").trigger("wsValidate")}});n("#wsform input[type=text]").blur(function(){n(this).val(Utils.TrimSpaces(n(this).val()))});n("#buLogin").click(function(){return n("#txLoginEmail,#txPassword").removeClass("ws-error-form"),n("#txLoginEmail + p.ws-error").html(""),n("body").css({cursor:"wait"}),n.ajax({type:"POST",url:"xml/getloyalty.aspx",data:{hotelID:WsVars.HotelID,langID:WsVars.LangID,currID:WsVars.CurrencyId,usn:n("#txLoginEmail").val(),pwd:n("#txPassword").val()},dataType:"json",success:function(t){if(n("body").css({cursor:"auto"}),t.Msg!=null){n("#txLoginEmail + p.ws-error").html(t.Msg);n("#txLoginEmail,#txPassword").addClass("ws-error-form").focus();n("#emReserveText").removeClass("ws-visible").addClass("ws-hidden");return}SHR.TrkLib.Login({});location.reload()},error:function(){n("body").css({cursor:"auto"})}}),!1});n("#buForgotPwd").click(function(){return n(".ws-reset-password").addClass("ws-visible").removeClass("ws-hidden"),n(".ws-returning-guest").addClass("ws-hidden").removeClass("ws-visible"),n("#lbSignInMsg").addClass("ws-hidden"),n("#lbResetPwd").addClass("ws-visible").removeClass("ws-hidden"),n("#txPassword").addClass("ws-hidden"),n("#buLogin").addClass("ws-hidden"),n("#txLoginEmail,#txPassword").removeClass("ws-error-form"),n("#dvPwdSent").html(""),!1});n("#buResetPwd").click(function(){return(n("#txLoginEmail,#txPassword").removeClass("ws-error-form"),n("#txLoginEmail + p.ws-error").html(""),n("#dvPwdSent").html("").removeClass("ws-visible").addClass("ws-hidden"),!SHRWindsurfer.Utils.IsValidEmail(n("#txLoginEmail").val()))?(n("#txLoginEmail").addClass("ws-error-form").focus(),n("#txLoginEmail + p.ws-error").html(WsMsgFmEmail),!1):(n("body").css({cursor:"wait"}),n.ajax({type:"POST",url:"xml/ResetPwd.aspx",data:{hotelID:WsVars.HotelID,langID:WsVars.LangID,currID:WsVars.CurrencyId,email:n("#txLoginEmail").val()},dataType:"json",success:function(t){n("body").css({cursor:"auto"});t.Msg.length>0&&(t.Status==="1"?n("#dvPwdSent").html(t.Msg).removeClass("ws-hidden").addClass("ws-visible"):(n("#txLoginEmail").addClass("ws-error-form").focus(),n("#txLoginEmail + p.ws-error").html(t.Msg)))},error:function(){n("body").css({cursor:"auto"})}}),!1)});n("#buWsGuestResetPwd").click(function(){var t={hotelID:WsVars.HotelID,langID:WsVars.LangID,email:n("#txLoginEmail").val(),welcome:!1};return(n("#txLoginEmail,#txPassword").removeClass("ws-error-form"),n("#txLoginEmail + p.ws-error").html(""),n("#dvPwdSent").html("").removeClass("ws-visible").addClass("ws-hidden"),t.email.length==0)?(n("#txLoginEmail").addClass("ws-error-form").focus(),n("#txLoginEmail + p.ws-error").html(WsMulti.EnterEmailAddress),!1):SHRWindsurfer.Utils.IsValidEmail(t.email)?(n("body").css({cursor:"wait"}),n.ajax({type:"POST",url:"xml/GetPwdResetEmail.aspx",data:t,dataType:"json"}).done(function(t){n("body").css({cursor:"auto"});t.Msg.length>0&&(t.Status==="1"?n("#dvPwdSent").html(t.Msg).removeClass("ws-hidden").addClass("ws-visible"):(n("#txLoginEmail").addClass("ws-error-form").focus(),n("#txLoginEmail + p.ws-error").html(t.Msg)))}).fail(function(t){n("body").css({cursor:"auto"});n("#txLoginEmail").addClass("ws-error-form").focus();n("#txLoginEmail + p.ws-error").html("Error requesting password reset!");WSEvents&&WSEvents.do_action("RequestPwdResetEmailError",t)}),!1):(n("#txLoginEmail").addClass("ws-error-form").focus(),n("#txLoginEmail + p.ws-error").html(WsMsgFmEmail),!1)});n("#buCancel").click(function(){return n(".ws-reset-password").addClass("ws-hidden").removeClass("ws-visible"),n(".ws-returning-guest").addClass("ws-visible").removeClass("ws-hidden"),n("#lbSignInMsg").removeClass("ws-hidden"),n("#txPassword").removeClass("ws-hidden"),n("#buLogin").removeClass("ws-hidden"),n("#txLoginEmail,#txPassword").removeClass("ws-error-form"),n("#dvPwdSent").html(""),!1});n("#chkBillDiff").click(function(){n(this).prop("checked")==!0?(n("#ws-billing-address").addClass("ws-show-this"),n("#ws-billing-address input,#ws-billing-address select").prop("disabled",!1)):(n("#ws-billing-address").removeClass("ws-show-this"),n("#ws-billing-address input,#ws-billing-address select").prop("disabled",!0))});n("#txMobile").change(function(){n(this).val().length>0?n("#dvWsOptinMobile").slideDown():n("#dvWsOptinMobile").slideUp()});n("#txFirstName").change(function(){WSMAIN.CheckShowSignUp()&&WSMAIN.IsEmailFirstLastName()&&CheckForSignIn()});n("#txLastName").change(function(){WSMAIN.CheckShowSignUp()&&WSMAIN.IsEmailFirstLastName()&&CheckForSignIn()});n("#cbBirthYY").change(function(){WSMAIN.CheckShowSignUp()&&WSMAIN.IsEmailFirstLastName()&&CheckForSignIn()});n("#cbBirthMM").change(function(){WSMAIN.CheckShowSignUp()&&WSMAIN.IsEmailFirstLastName()&&CheckForSignIn()});n("#cbBirthDD").change(function(){WSMAIN.CheckShowSignUp()&&WSMAIN.IsEmailFirstLastName()&&CheckForSignIn()});n("#txEmail").change(function(){if(WsVars.MemberProgram!=="4"&&(SHRWindsurfer.Utils.IsValidEmail(n(this).val())?n("#dvWsOptinEmail").show():n("#dvWsOptinEmail").slideUp()),!SHRWindsurfer.Utils.IsValidEmail(n("#txEmail").val()))return n("#txEmail + p.ws-error").html(WsMsgFmEmail),n("#txEmail").addClass("ws-error-form").focus(),!1;WSMAIN.CheckShowSignUp()&&SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramID!=SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramEnum.StellerCRM&&SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramID>1&&WSMAIN.IsEmailFirstLastName()&&CheckForSignIn()});n("#txLoginEmail").change(function(){SHRWindsurfer.Utils.IsValidEmail(n(this).val())?n("#dvWsOptinLoginEmail").show():n("#dvWsOptinLoginEmail").slideUp()});n("#cbCountry").change(function(){n("#cbState").load("xml/getStates.aspx?country="+n(this).val()+"&lang="+WsVars.LangCode,function(){e.length>0&&n(this).val(e);n(this).change();n("#cbState option").length>1?(n("#dvState .customSelect, #dvState .ws-required").show(),n("#cbState").removeClass("ws-hide"),n("#txState").hide()):(n("#dvState .customSelect, #dvState .ws-required").hide(),n("#cbState").addClass("ws-hide"),n("#txState").show());WsVars.IsAdyenV2=="1"&&GetAdyenV2PaymentMethod(WSMAIN.Items);n("input:radio[name='rblPayFullPrePayment']").length>0&&n("input:radio[name='rblPayFullPrePayment']").change()});rqCountryDialCode&&(n("#txPhone").val().length>0||n("#txMobile").val().length>0)&&(document.getElementById("txPhone").defaultValue="",document.getElementById("txMobile").defaultValue="",WSMAIN.getCountryFlagOnChange(),n("#txPhone").val().trim().length>5&&n("#txPhone").focus(),n("#txMobile").val().trim().length>5&&n("#txMobile").focus());WsVars.EnableConciergeService=="1"&&n(this).val()!="US"&&n("#guestBlockG1").is(":visible")?n("#fdG1USAddressBlock").show():n("#fdG1USAddressBlock").hide()});n("#cbBillCountry").change(function(){n("#cbBillState").load("xml/getStates.aspx?country="+n(this).val()+"&lang="+WsVars.LangCode,function(){WsGstBillState.length>0&&n(this).val(WsGstBillState);n(this).change();n("#cbBillState option").length>1?(n("#dvBillState .customSelect, #dvBillState .ws-required").show(),n("#cbBillState").removeClass("ws-hide"),n("#txBillState").hide()):(n("#dvBillState .customSelect, #dvBillState .ws-required").hide(),n("#cbBillState").addClass("ws-hide"),n("#txBillState").show())})});n("#wsform").submit(function(){var e,f,o,s,h,l;if(submittingReservationForm=!0,n("#wsform input,#wsform select").removeClass("ws-error-form").attr("was-focused",""),n("#wsform input[type=text]").each(function(){n(this).val(Utils.TrimSpaces(n(this).val()))}),e="",e=WsVars.IBESkinVer=="3"?u(!1,!0):i(),e.length>0){t=!0;switch(e){case"txMyCheckProcessing":return!1;case"txMyCheckMissing":case"txMyCheckFailure":default:submittingReservationForm=!1;n("#"+e).addClass("ws-error-form").focus()}return!1}if(f=!1,n("#chkLoyaltyAgreeTerm").is(":visible")&&n("#chkLoyaltyAgreeTerm").is(":checked"))if(n("#hdSignUpAlready").val()=="0"){if(!SHR.Loyalty.DoSignup())return submittingReservationForm=!1,!1}else submittingReservationForm=!0;else if(n("#chkLoyaltyAgreeTerm").is(":visible")&&!n("#chkLoyaltyAgreeTerm").is(":checked")&&(f=WSMAIN.ShowAgreeTermsModal(),f==!0))return submittingReservationForm=!1,!1;if(n("#chkMaverickSignUp").is(":checked"))SHR.Loyalty.DoSignup()||(submittingReservationForm=!0);else if(SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramID==SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramEnum.FairCloud&&n("#hSignupStatus").val()!=undefined&&n("#hSignupStatus").val().length>0&&n("#chkLoyaltyAgreeTerm").length>0){if(o=!1,f=WSMAIN.ShowAgreeTermsModal(),n("#chkLoyaltyAgreeTerm").is(":visible")&&!n("#chkLoyaltyAgreeTerm").is(":checked")?f==!0&&(o=!0):n("#chkLoyaltyAgreeTerm").is(":visible")&&n("#chkLoyaltyAgreeTerm").is(":checked")&&n("#hSignupStatus").val()!="1"&&n("#hSignupStatus").val()!="-4"&&(o=WSMAIN.CheckforSignUpSignIN()),f==!0&&o||n("#hSignupStatus").val()=="-4")return submittingReservationForm=!1,!1}else if(!WSMAIN.IsLoggedIn()&&(s=WSMAIN.CheckforSignUpSignIN(),f=WSMAIN.ShowAgreeTermsModal(),f==!0&&s))return submittingReservationForm=!1,!1;if(SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramID>1&&WSMAIN.LoyaltySignupChecked()&&n("#buReserve").hasClass("ws-submitting")&&(n("#buReserve").removeClass("ws-submitting"),n(".ws-reserve-button").removeClass("ws-disabled")),WsVars.CleanseAddress==="1"&&r===!1&&(h={cleanseAddress:"1",firstname:n("#txFirstName").val(),lastname:n("#txLastName").val(),address:n("#txAddress1").val(),address2:n("#txAddress2").val(),city:n("#txCity").val(),stateCode:n("#cbState").val(),state:n("#txState").val(),country:n("#cbCountry").val(),zip:n("#txZip").val()},l=Utils.Format("checkout.aspx?hgID={0}&hotelID={1}&lang={2}&currID={3}",WsVars.HgID,WsVars.HotelID,WsVars.LangCode,WsVars.CurrencyId),n("body").css({cursor:"wait"}),n.ajax({type:"POST",url:l,data:h,dataType:"json",success:function(t){n("body").css({cursor:"auto"});c(t)},error:function(){n("body").css({cursor:"auto"})}}),!r))return submittingReservationForm=!1,!1;if(!WSMAIN.CheckShowSignUp()){if(n("#buReserve").hasClass("ws-submitting"))return submittingReservationForm=!1,!1;n("#buReserve").addClass("ws-submitting");n(".ws-reserve-button").addClass("ws-disabled")}SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramID==SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramEnum.StellerCRM?document.querySelector("#hdIsBraintreeClicked").value="1":n("#hdSignUpClicked").val()=="1"&&SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramID==SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramEnum.WindsurferGuest&&(document.querySelector("#hdFormSubmitClicked").value="1")});n('#wsform input[type="text"],#wsform input[type="number"],#wsform input[type="radio"],#wsform select,#chkBillDiff,#txNewPassword,#txPasswordVerify').not("#txPassword,#txLoginEmail").blur(function(t){WsVars.IBESkinVer==="3"&&n(this).attr("was-focused","");n(t.target).parents("form").trigger("wsValidate")});n("#wsform input[type=text], #wsform input[type=tel], #wsform input[type=number], #wsform input[type=email], #wsform input[type=date]").keypress(function(){n(this).removeClass("ws-error-form")});n(document).on("keyup","#wsform #dvActiveGuestPrograms input[type=text]",function(t){WsVars.IBESkinVer==="3"&&n(this).attr("was-focused","");n(t.target).parents("form").trigger("wsValidate")});n("form").on("wsValidate",function(){var r,e,s,o;if(t===!0){t=!1;return}if(n(".ws-reserve-button").addClass("ws-disabled"),n("#wsform input,#wsform select").removeClass("ws-error-form"),r="",WsVars.IBESkinVer==="3"){if(r=u(),r.length>0)return!1}else r=i();if(r.length>0)return e=Utils.ArrayFind(f,n(this).attr("name")),s=Utils.ArrayFind(f,r),e>=0&&s<=e&&n("#"+r).addClass("ws-error-form"),WsVars.IBESkinVer=="3"&&h(),!1;if((n("input:radio[name='rblPayFullPrePayment']:checked").length>0&&n("input:radio[name='rblPayFullPrePayment']:checked").val()=="PayMonthly"||n("input:radio[name='rblSHRPayFullPrePayment']:checked").length>0&&n("input:radio[name='rblSHRPayFullPrePayment']:checked").val()=="PayMonthly")&&(n("#lPayMonthly").length>0&&!n("#lPayMonthly").hasClass("FlexPayTokenAvailable")||n("#lPayMonthly1").length>0&&!n("#lPayMonthly1").hasClass("FlexPayTokenAvailable")))return n(".ws-reserve-button").addClass("ws-disabled"),!1;if(WsVars.EnableConciergeService=="1"&&n(".guest-block").is(":visible")&&(o=!0,n(".guest-block:visible").each(function(){var t=IsValidAdditionalGuest(n(this));t||(o=!1)}),!o))return!1;n(".ws-reserve-button").removeClass("ws-disabled")});n("#txCardNumber").change(function(){var i=n(this).val().replace(/[^\d]/g,""),r=Utils.GetCards(i),t;for(n(this).val(i),n("#dvCardType .cc-icon").removeClass("ccselected"),t=0;t<r.length;t++)n('#dvCardType .cc-icon[ref="'+r[t]+'"]').addClass("ccselected")});n("#txGiftCardNumber").change(function(){var t=n(this).val().replace(/[^\d]/g,"");n(this).val(t)});n("#buCallToContinue").click(function(){var t,i;n("#ws-save-later").removeClass("ws-show-this");WsVars.IBESkinVer=="3"&&n("#ws-save-later").addClass("ws-hide-action");n("#txCallContinue").html("");t={callcontinue:"1"};t.token=n("#inMyCheckToken").val();n("#txLoginEmail").length>0?t.email=n("#txLoginEmail").val():n("#txEmail").length>0&&(t.email=n("#txEmail").val());t.title=n("#cbSalutation").val();t.fname=n("#txFirstName").val();t.lname=n("#txLastName").val();t.mi=n("#txMiddleInit").val();t.addr1=n("#txAddress1").val();t.addr2=n("#txAddress2").val();t.city=n("#txCity").val();t.state=n("#txState").val();t.stcode=n("#cbState").val();t.country=n("#cbCountry").val();t.zip=n("#txZip").val();t.phone=n("#txPhone").val();t.mobile=n("#txMobile").val();t.company=n("#txCompany").val();t.gender=n("#cbGender").val();t.dobMM=n("#cbBirthMM").val();t.dobDD=n("#cbBirthDD").val();t.dobYY=n("#cbBirthYY").val();t.memberID=n("#txMemberID").val();t.emailalt=n("#txEmailAlt").val();t.booked=n("#txBooked").val();t.purpose=n("#cbTripPurpose").val();t.tvlProgram=n("#cbTravelProgram").val();t.tvlMember=n("#txTravelMember").val();t.arrFlight=n("#txArrFlight").val();t.arrTime=n("#txArrTime").val();t.arrTime===undefined&&(t.arrTime=n("#cbArrTime").val());t.comments=n("#txComments").val();t.saved=n("#inSaved").val();t.preferences=WSMAIN.GetPrefs();t.optin=WSMAIN.GetOptin();t.optinMobile=WSMAIN.GetOptinMobile();t.RmRtAddGuestsName=WSMAIN.GetRmRtAddGuestsName();t.HotelGuestMerbershipProgram=WSMAIN.GetHotelGuestMerbershipProgram();t.Iata=n("#txTAIataNumber").val();i=Utils.Format("checkout.aspx?hgID={0}&hotelID={1}&lang={2}&currID={3}",WsVars.HgID,WsVars.HotelID,WsVars.LangCode,WsVars.CurrencyId);n("body").css({cursor:"wait"});n.ajax({type:"POST",url:i,data:t,dataType:"json",success:function(t){n("body").css({cursor:"auto"});t.Code.length>0?(n("#txCallContinue").html(t.Code),n("#ws-call-continue").addClass("ws-show-this"),WsVars.IBESkinVer=="3"&&n("#ws-call-continue").removeClass("ws-hide-action")):t.Msg.length>0&&alert(t.Msg)},error:function(){n("body").css({cursor:"auto"})}})});n("#buSaveForLater").click(function(){n("#ws-call-continue").removeClass("ws-show-this");n("#ws-save-later").addClass("ws-show-this");WsVars.IBESkinVer=="3"&&(n("#ws-save-later").removeClass("ws-hide-action"),n("#ws-call-continue").addClass("ws-hide-action"));n("#dvMsgSaveForLater").html("");n("#savedemail").removeClass("ws-error-form")});n("#buCancelCallToContinue").click(function(){return n("#ws-call-continue").removeClass("ws-show-this"),WsVars.IBESkinVer=="3"&&n("#ws-call-continue").addClass("ws-hide-action"),!1});n("#buCancelSaveForLater").click(function(){return n("#ws-save-later").removeClass("ws-show-this"),WsVars.IBESkinVer=="3"&&n("#ws-save-later").addClass("ws-hide-action"),!1});n("#buSubmitSaveForLater").click(function(){var i=n("#savedemail").val(),t,r;return SHRWindsurfer.Utils.IsValidEmail(i)?(n("#dvMsgSaveForLater").html(""),n("#savedemail").removeClass("ws-error-form"),t={savedemail:i},r=Utils.Format("checkout.aspx?hgID={0}&hotelID={1}&lang={2}&currID={3}",WsVars.HgID,WsVars.HotelID,WsVars.LangCode,WsVars.CurrencyId),t.title=n("#cbSalutation").val(),t.fname=n("#txFirstName").val(),t.lname=n("#txLastName").val(),t.mi=n("#txMiddleInit").val(),t.addr1=n("#txAddress1").val(),t.city=n("#txCity").val(),t.state=n("#txState").val(),t.stcode=n("#cbState").val(),t.country=n("#cbCountry").val(),t.zip=n("#txZip").val(),t.phone=n("#txPhone").val(),t.mobile=n("#txMobile").val(),t.company=n("#txCompany").val(),t.RmRtAddGuestsName=WSMAIN.GetRmRtAddGuestsName(),t.HotelGuestMerbershipProgram=WSMAIN.GetHotelGuestMerbershipProgram(),t.Iata=n("#txTAIataNumber").val(),t.consentStatus=typeof WsVars.GuestLoyalty!="undefined"&&WsVars.GuestLoyalty!=null&&WsVars.GuestLoyalty!=""?"1":n("#cbAddConsentText").length>0&&n("#cbAddConsentText").prop("checked")?"1":"0",typeof WsVars.IsCRMSaveForLaterEnable!="undefined"&&WsVars.IsCRMSaveForLaterEnable!=null&&WsVars.IsCRMSaveForLaterEnable==!0&&SetAbandonCartConsent(i,"SaveforLater",t.consentStatus),n("body").css({cursor:"wait"}),n.ajax({type:"POST",url:r,data:t,dataType:"json",success:function(t){n("body").css({cursor:"auto"});t.Msg.length>0?(n("#dvMsgSaveForLater").html(t.Msg),n("#savedemail").addClass("ws-error-form")):(n(".ws-save-for-later").removeClass("ws-show-this"),n(".ws-save-for-later-confirm").addClass("ws-show-this"),WsVars.IBESkinVer=="3"&&(n(".ws-save-for-later").addClass("ws-hide-action"),n(".ws-save-for-later-confirm").removeClass("ws-hide-action")),n("#lbSaveForLaterConfirm1").html(WsMulti.SaveForLaterConfirm+Utils.Format(" <strong>{0}<\/strong>",i)))},error:function(){n("body").css({cursor:"auto"})}}),!1):(n("#dvMsgSaveForLater").html(WsMsgFmEmail),n("#savedemail").addClass("ws-error-form"),!1)});n("#buContinueSaveForLater").click(function(){return n("#ws-save-later").removeClass("ws-show-this"),n(".ws-save-for-later").addClass("ws-show-this"),n(".ws-save-for-later-confirm").removeClass("ws-show-this"),WsVars.IBESkinVer=="3"&&(n("#ws-save-later").addClass("ws-hide-action"),n(".ws-save-for-later").removeClass("ws-hide-action"),n(".ws-save-for-later-confirm").addClass("ws-hide-action")),!1});n("#fmSaved").submit(function(){return n("#buSubmitSaveForLater").click(),!1});n("#buWsLogout").click(function(){if(n("#buWsDelegAuthLogout").length>0)return $link=n("#buWsDelegAuthLogout:first"),$link[0].click(),!1;n("body").css({cursor:"wait"});var t=Utils.Format("xml/setloyalty.aspx?logout=1&hgID={0}&hotelID={1}&lang={2}&currID={3}",WsVars.HgID,WsVars.HotelID,WsVars.LangCode,WsVars.CurrencyId);return n.ajax({type:"GET",url:t,dataType:"json",cache:!1,success:function(){location.reload()},error:function(){n("body").css({cursor:"auto"})}}),!1});n("#buSSL").click(function(){var t=n(this).attr("href"),i=window.open(t,"ssl_window","location=yes,status=yes,resizable=yes,scrollbars=yes,width=560,height=500");return!1});n(".ws-open-modal").magnificPopup({type:"inline",midClick:!0});n("#buResortFee").magnificPopup({type:"inline",midClick:!0,closeMarkup:'<button type="button" title="%title%" class="ws-mfp-custom-close mfp-close" aria-label="close">&#215;<span class="ws-custom-close-icon" aria-hidden="true"><\/span><\/button>'});n("#buAddrYourInput").click(function(){return r=!0,n.magnificPopup.close(),n("#buReserve").click(),!1});n("#buAddrSuggestion").click(function(){var t,u,i;if(r=!0,n.magnificPopup.close(),t=s,n("#txAddress1").val(t.Addr),n("#txAddress2").val(t.Addr2),n("#txCity").val(t.City),n("#txZip").val(t.Zip),n("#cbCountry").val()===t.Country)return n("#cbState option").length>1?(n("#cbState").val(t.St).change(),n("#txState").val("")):n("#txState").val(t.St),n("#buReserve").click(),!1;if(n("#cbCountry").val(t.Country),n("#dvWsCountry .customSelectInner").html(n("#cbCountry option:selected").html()),t.States.length>0){for(u='<option value="">&nbsp;<\/option>',i=0;i<t.States.length;i++)u+=Utils.Format('<option value="{0}">{1}<\/option>',t.States[i].Name,t.States[i].Desc);n("#cbState").html(u)}return n("#cbState option").length>1?(n("#dvState .customSelect, #dvState .ws-required").show(),n("#cbState").removeClass("ws-hide"),n("#txState").hide().val(""),n("#cbState").val(t.St).change()):(n("#dvState .customSelect, #dvState .ws-required").hide(),n("#cbState").addClass("ws-hide"),n("#txState").show().val(t.St)),!1});n("#buPesapal").click(function(){var f="",e,o,r;if(f=WsVars.IBESkinVer=="3"?u():i(),f.length>0)return t=!0,n("#"+f).addClass("ws-error-form").focus(),!1;if(e=!1,n("#chkLoyaltyAgreeTerm").is(":checked")){if(n("#hdSignUpAlready").val()=="0"&&!SHR.Loyalty.DoSignup())return!1}else if(!WSMAIN.IsLoggedIn()&&(WSMAIN.CheckforSignUpSignIN(),e=WSMAIN.ShowAgreeTermsModal(),e==!0))return;return o=Utils.Format("checkout.aspx?hgID={0}&hotelID={1}&lang={2}&currID={3}",WsVars.HgID,WsVars.HotelID,WsVars.LangCode,WsVars.CurrencyId),r={gotopesapal:"1"},n("#txLoginEmail").length>0?r.email=n("#txLoginEmail").val():n("#txEmail").length>0&&(r.email=n("#txEmail").val()),r.title=n("#cbSalutation").val(),r.fname=n("#txFirstName").val(),r.lname=n("#txLastName").val(),r.mi=n("#txMiddleInit").val(),r.addr1=n("#txAddress1").val(),r.addr2=n("#txAddress2").val(),r.city=n("#txCity").val(),r.state=n("#txState").val(),r.stcode=n("#cbState").val(),r.country=n("#cbCountry").val(),r.zip=n("#txZip").val(),r.phone=n("#txPhone").val(),r.mobile=n("#txMobile").val(),r.company=n("#txCompany").val(),r.gender=n("#cbGender").val(),r.dobMM=n("#cbBirthMM").val(),r.dobDD=n("#cbBirthDD").val(),r.dobYY=n("#cbBirthYY").val(),r.memberID=n("#txMemberID").val(),r.emailalt=n("#txEmailAlt").val(),r.booked=n("#txBooked").val(),r.purpose=n("#cbTripPurpose").val(),r.tvlProgram=n("#cbTravelProgram").val(),r.tvlMember=n("#txTravelMember").val(),r.arrFlight=n("#txArrFlight").val(),r.arrTime=n("#txArrTime").val(),r.comments=n("#txComments").val(),r.saved=n("#inSaved").val(),r.preferences=WSMAIN.GetPrefs(),r.optin=WSMAIN.GetOptin(),r.optinMobile=WSMAIN.GetOptinMobile(),r.RmRtAddGuestsName=WSMAIN.GetRmRtAddGuestsName(),r.HotelGuestMerbershipProgram=WSMAIN.GetHotelGuestMerbershipProgram(),n("body").css({cursor:"wait"}),n.ajax({type:"POST",url:o,data:r,dataType:"json",success:function(n){n.Msg.length==0?location.href=n.Act:n.IsPayGateError!=undefined&&n.IsPayGateError!=null&&n.IsPayGateError!=""&&n.IsPayGateError.toLowerCase().indexOf("true")>=0?WSMAIN.Alert(n.Msg,1):WSMAIN.Alert(n.Msg)},error:function(){n("body").css({cursor:"auto"})}}),!1});n("#btnPaymentComplete").click(function(){CheckVerifyStatus()});n("#buReserve_Paygate,#buReserve2_Paygate").click(function(r){var h=i(),o,e,f,s,u;if(h.length>0)return t=!0,n("#"+h).addClass("ws-error-form").focus(),!1;if(WsVars.IsAdyenV2==1&&n("input:radio[name='WsPaymentMethod$rdPayMethodType']").length>0&&(n("input:radio[name='WsPaymentMethod$rdPayMethodType']:checked").val()=="klarna"||n("input:radio[name='WsPaymentMethod$rdPayMethodType']:checked").val()=="klarna_account"||n("input:radio[name='WsPaymentMethod$rdPayMethodType']:checked").val()=="klarna_paynow"||n("input:radio[name='WsPaymentMethod$rdPayMethodType']:checked").val()=="swish"||n("input:radio[name='WsPaymentMethod$rdPayMethodType']:checked").val()=="googlepay"||n("input:radio[name='WsPaymentMethod$rdPayMethodType']:checked").val()=="applepay"||n("input:radio[name='WsPaymentMethod$rdPayMethodType']:checked").val()=="alipay"||n("input:radio[name='WsPaymentMethod$rdPayMethodType']:checked").val()=="wechatpayweb"?(n("#txCardHolder,#txCardNumber,#txCardCvv").val(""),n("#txGiftCardNumber,#txGiftCardCvc").val("")):n("input:radio[name='WsPaymentMethod$rdPayMethodType']:checked").val()=="giftcard"&&n("#txCardHolder,#txCardNumber,#txCardCvv").val("")),o=!1,n("#chkLoyaltyAgreeTerm").is(":checked")){if(n("#hdSignUpAlready").val()=="0")if(SHR.Loyalty.DoSignup())n("#hdSignUpAlready").val("1");else return n("#hdSignUpAlready").val("0"),!1}else if(!WSMAIN.IsLoggedIn()&&(WSMAIN.CheckforSignUpSignIN(),o=WSMAIN.ShowAgreeTermsModal(),o==!0))return;n("#inFreedompayWithout3DS").val("");try{if(WsVars.IsFreedomPayProp==1&&window.wsFreedompay!=undefined&&window.wsFreedompay.Options!=undefined&&window.wsFreedompay.Enabled()&&window.wsFreedompay.Events!=undefined)return WSMAIN.ReqCc==!0||n("#txCardNumber").length>0&&n("#txCardNumber").val().length>0?window.wsFreedompay.Events.Auth3dsPerformLookup():(n("#inFreedompayWithout3DS").val("1"),n("#wsform").submit()),!1}catch(c){window.wsFreedompay.Events!=undefined&&window.wsFreedompay.Events.Error(c)}if(WsVars.EnableBNPLProviderID==1&&WsVars.FlexPayUpCode!=""&&(n("input:radio[name='rblPayFullPrePayment']:checked").length>0&&n("input:radio[name='rblPayFullPrePayment']:checked").val()=="PayMonthly"||n("input:radio[name='rblSHRPayFullPrePayment']:checked").length>0&&n("input:radio[name='rblSHRPayFullPrePayment']:checked").val()=="PayMonthly"))return WsFlexPay.SubmitReservation();if(n("#buReserve_Paygate,#buReserve2_Paygate").hasClass("ws-submitting"))return!1;for(n("#buReserve_Paygate,#buReserve2_Paygate").addClass("ws-submitting"),n(".ws-reserve-button").addClass("ws-disabled"),e=!1,f=0;f<WsVars.CartItems.length;f++)if(WsVars.CartItems[f].Guar==="GX"||WsVars.CartItems[f].Guar==="DX"||WsVars.CartItems[f].Guar==="PP"||WsVars.CartItems[f].Guar==="XX"&&n("#txCardNumber").val()!=null&&n("#txCardNumber").val().length>0){e=!0;break}e&&n("#txCardNumber").val()!=undefined&&n("#txCardNumber").val().length>0&&WsVars.IsAdyenV2==0&&WsVars.IsPlanetPayment==0&&WsVars.IsRedDotPay==0&&WsVars.IsNexiNetaxept==0&&WsVars.IsNexiPayEngine==0&&WsVars.IsPaymentGatewayV1==0&&WsVars.IsShift4Prop==0?(s="",WsVars.IsIPGProp==1&&WsVars.IPGEndpointURL!=""&&(s=WsVars.IPGEndpointURL+"/payments",u={merchantId:WsVars.IPGMerchantID},u.token=n("#inIPGToken").val(),u.customerid=n("#inCrsResvID").val(),u.resvid=n("#inIPGResvID").val(),u.nameOnCard=n("#txCardHolder").val(),u.number=n("#txCardNumber").val(),u.expiryMonth=n("#cbCardMM").val().length>1?n("#cbCardMM").val():0+n("#cbCardMM").val(),u.expiryYear=n("#cbCardYY").val(),n("#hResvId").val(u.resvid),n("body").css({cursor:"wait"}),n.ajax({type:"POST",url:s,data:u,dataType:"json",success:function(t){t.result=="success"||e==!1?(n("#hCardToken").val(t.cardToken),n("#hMerchantId").val(t.merchantId),n("#hCustomerId").val(t.customerId),ProcessGotoIPGateway()):t.result=="failure"&&n("#buReserve_Paygate,#buReserve2_Paygate").hasClass("ws-submitting")&&(n("#buReserve_Paygate,#buReserve2_Paygate").removeClass("ws-submitting"),n(".ws-reserve-button").removeClass("ws-disabled"))},error:function(){n("#buReserve_Paygate,#buReserve2_Paygate").hasClass("ws-submitting")&&(n("#buReserve_Paygate,#buReserve2_Paygate").removeClass("ws-submitting"),n(".ws-reserve-button").removeClass("ws-disabled"));n("body").css({cursor:"auto"})}}))):(WsVars.IsIPGProp==1&&WsVars.IsAdyenV2==0&&WsVars.IsPlanetPayment==0&&WsVars.IsRedDotPay==0&&WsVars.IsNexiNetaxept==0&&WsVars.IsNexiPayEngine==0&&WsVars.IsPaymentGatewayV1==0&&WsVars.IsShift4Prop==0&&n("#hCustomerId").val(n("#inCrsResvID").val()),WsVars.IsPaymentGatewayV1==1&&WsVars.IsEigenDropIn==1&&n("#divEigenIframe").length>0&&!n("#divEigenIframe").hasClass("hide")?ValidateCardDetails():n("input:radio[name='WsPaymentMethod$rdPayMethodType']:checked").val()=="googlepay"?(r.preventDefault(),WsWalletPay.OnGooglePayButtonClicked()):n("input:radio[name='WsPaymentMethod$rdPayMethodType']:checked").val()=="applepay"?(r.preventDefault(),WsWalletPay.OnApplePayButtonClicked()):ProcessGotoIPGateway())});n("#buPayment").click(function(){var f="",e,o,r;if(f=WsVars.IBESkinVer=="3"?u():i(),f.length>0)return t=!0,n("#"+f).addClass("ws-error-form").focus(),!1;if(e=!1,n("#chkLoyaltyAgreeTerm").is(":checked")){if(n("#hdSignUpAlready").val()=="0"&&!SHR.Loyalty.DoSignup())return!1}else if(!WSMAIN.IsLoggedIn()&&(WSMAIN.CheckforSignUpSignIN(),e=WSMAIN.ShowAgreeTermsModal(),e==!0))return;return o=Utils.Format("checkout.aspx?hgID={0}&hotelID={1}&lang={2}&currID={3}",WsVars.HgID,WsVars.HotelID,WsVars.LangCode,WsVars.CurrencyId),r={gotopayment:"1"},n("#txLoginEmail").length>0?r.email=n("#txLoginEmail").val():n("#txEmail").length>0&&(r.email=n("#txEmail").val()),r.method=n("#cbAdyenMethod").val(),r.title=n("#cbSalutation").val(),r.fname=n("#txFirstName").val(),r.lname=n("#txLastName").val(),r.mi=n("#txMiddleInit").val(),r.addr1=n("#txAddress1").val(),r.addr2=n("#txAddress2").val(),r.city=n("#txCity").val(),r.state=n("#txState").val(),r.stcode=n("#cbState").val(),r.country=n("#cbCountry").val(),r.zip=n("#txZip").val(),r.phone=n("#txPhone").val(),r.mobile=n("#txMobile").val(),r.company=n("#txCompany").val(),r.gender=n("#cbGender").val(),r.dobMM=n("#cbBirthMM").val(),r.dobDD=n("#cbBirthDD").val(),r.dobYY=n("#cbBirthYY").val(),r.memberID=n("#txMemberID").val(),r.emailalt=n("#txEmailAlt").val(),r.booked=n("#txBooked").val(),r.purpose=n("#cbTripPurpose").val(),r.tvlProgram=n("#cbTravelProgram").val(),r.tvlMember=n("#txTravelMember").val(),r.arrFlight=n("#txArrFlight").val(),r.arrTime=n("#txArrTime").val(),r.comments=n("#txComments").val(),r.saved=n("#inSaved").val(),r.preferences=WSMAIN.GetPrefs(),r.optin=WSMAIN.GetOptin(),r.optinMobile=WSMAIN.GetOptinMobile(),r.RmRtAddGuestsName=WSMAIN.GetRmRtAddGuestsName(),r.HotelGuestMerbershipProgram=WSMAIN.GetHotelGuestMerbershipProgram(),n("body").css({cursor:"wait"}),n.ajax({type:"POST",url:o,data:r,dataType:"json",success:function(t){t.Msg.length==0?(n("#allowedMethods").val(t.Allow),n("#currencyCode").val(t.Curr),n("#merchantAccount").val(t.Acct),n("#merchantReference").val(t.Ref),n("#paymentAmount").val(t.Amt),n("#sessionValidity").val(t.Time),n("#shipBeforeDate").val(t.Ship),n("#shopperLocale").val(t.Locale),n("#shopperEmail").val(t.Email),n("#skinCode").val(t.Skin),n("#merchantSig").val(t.Sign),n("#adyenForm").attr("action",t.Act).submit()):WSMAIN.Alert(t.Msg)},error:function(){n("body").css({cursor:"auto"})}}),!1});n("#buReserve_Braintree,#buReserve2_Braintree").click(function(){var r="",e,f;if(r=WsVars.IBESkinVer=="3"?u():i(),r.length>0)return t=!0,n("#"+r).addClass("ws-error-form").focus(),!1;if(n("#chkLoyaltyAgreeTerm").is(":checked")||(WSMAIN.CheckforSignUpSignIN(),needSignUp=WSMAIN.ShowAgreeTermsModal(),needSignUp!=!0))if(SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramID==SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramEnum.StellerCRM&&WSMAIN.LoyaltySignupChecked()){if(n("#buReserve").hasClass("ws-submitting"))return!1;n("#buReserve").addClass("ws-submitting");n(".ws-reserve-button").addClass("ws-disabled");e=!1;try{f=braintree.client.create;f({authorization:n("#hdToken").val()},function(t,i){if(t){n("#wsform").submit();return}var r=n("#cbCardMM").val()+"/"+n("#cbCardYY").val(),u={creditCard:{number:n("#txCardNumber").val(),cvv:n("#txCardCvv").val(),expirationDate:r,billingAddress:{postalCode:n("#txZip").val()},options:{validate:!1}}};i.request({endpoint:"payment_methods/credit_cards",method:"post",data:u},function(t,i){if(t){n("#wsform").submit();return}document.querySelector("#hdBrainTreenonce").value=i.creditCards[0].nonce;n("#wsform").submit()})})}catch(o){n("#wsform").submit()}}else n("#wsform").submit()});n("#buSCB").click(function(){var f="",e,o,r;if(f=WsVars.IBESkinVer=="3"?u():i(),f.length>0)return t=!0,n("#"+f).addClass("ws-error-form").focus(),!1;if(e=!1,n("#chkLoyaltyAgreeTerm").is(":checked")){if(n("#hdSignUpAlready").val()=="0"&&!SHR.Loyalty.DoSignup())return!1}else if(!WSMAIN.IsLoggedIn()&&(WSMAIN.CheckforSignUpSignIN(),e=WSMAIN.ShowAgreeTermsModal(),e==!0))return;return o=Utils.Format("checkout.aspx?hgID={0}&hotelID={1}&lang={2}&currID={3}",WsVars.HgID,WsVars.HotelID,WsVars.LangCode,WsVars.CurrencyId),r={gotoscb:"1"},n("#txLoginEmail").length>0?r.email=n("#txLoginEmail").val():n("#txEmail").length>0&&(r.email=n("#txEmail").val()),r.method=n("#cbScbMethod").val(),r.title=n("#cbSalutation").val(),r.fname=n("#txFirstName").val(),r.lname=n("#txLastName").val(),r.mi=n("#txMiddleInit").val(),r.addr1=n("#txAddress1").val(),r.addr2=n("#txAddress2").val(),r.city=n("#txCity").val(),r.state=n("#txState").val(),r.stcode=n("#cbState").val(),r.country=n("#cbCountry").val(),r.zip=n("#txZip").val(),r.phone=n("#txPhone").val(),r.mobile=n("#txMobile").val(),r.company=n("#txCompany").val(),r.gender=n("#cbGender").val(),r.dobMM=n("#cbBirthMM").val(),r.dobDD=n("#cbBirthDD").val(),r.dobYY=n("#cbBirthYY").val(),r.memberID=n("#txMemberID").val(),r.emailalt=n("#txEmailAlt").val(),r.booked=n("#txBooked").val(),r.purpose=n("#cbTripPurpose").val(),r.tvlProgram=n("#cbTravelProgram").val(),r.tvlMember=n("#txTravelMember").val(),r.arrFlight=n("#txArrFlight").val(),r.arrTime=n("#txArrTime").val(),r.comments=n("#txComments").val(),r.saved=n("#inSaved").val(),r.preferences=WSMAIN.GetPrefs(),r.optin=WSMAIN.GetOptin(),r.optinMobile=WSMAIN.GetOptinMobile(),r.RmRtAddGuestsName=WSMAIN.GetRmRtAddGuestsName(),r.HotelGuestMerbershipProgram=WSMAIN.GetHotelGuestMerbershipProgram(),n("body").css({cursor:"wait"}),n.ajax({type:"POST",url:o,data:r,dataType:"json",success:function(t){t.Msg.length==0?(n("#mid").val(t.mid),n("#terminal").val(t.terminal),n("#command").val(t.command),n("#ref_no").val(t.ref_no),n("#ref_date").val(t.ref_date),n("#service_id").val(t.service_id),n("#cur_abbr").val(t.cur_abbr),n("#amount").val(t.amount),n("#backURL").val(t.backURL),n("#scbForm").attr("action",t.Act).submit()):t.IsPayGateError!=undefined&&t.IsPayGateError!=null&&t.IsPayGateError!=""&&t.IsPayGateError.toLowerCase().indexOf("true")>=0?WSMAIN.Alert(t.Msg,1):WSMAIN.Alert(t.Msg)},error:function(){n("body").css({cursor:"auto"})}}),!1});n("#buAuth3DS").click(function(){var f,o,s,r,h,e;if(n("#wsform input,#wsform select").removeClass("ws-error-form"),n("#dvMessage").removeClass("ws-show-this"),n("#dvBillingMessage").removeClass("ws-show-this"),n("#wsform input[type=text]").each(function(){n(this).val(Utils.TrimSpaces(n(this).val()))}),f="",f=WsVars.IBESkinVer=="3"?u():i(),f.length>0)return t=!0,n("#"+f).addClass("ws-error-form").focus(),!1;if(o=!1,n("#chkLoyaltyAgreeTerm").is(":checked")){if(n("#hdSignUpAlready").val()=="0"&&!SHR.Loyalty.DoSignup())return!1}else if(!WSMAIN.IsLoggedIn()&&(WSMAIN.CheckforSignUpSignIN(),o=WSMAIN.ShowAgreeTermsModal(),o==!0))return;if(n(document).trigger("wsShowProcessingModal"),n(".ws-reserve-button").addClass("ws-disabled"),n("#inMyCheckMethod").val()!=="1"&&n("#isMyCheckEnabled").val()!=="True"||WSMAIN.ReqCc!=!0||wsMyCheck.TokenLoaded(function(){n("#buAuth3DS").click()}))return(n("#inMyCheckMethod").val()=="1"||n("#isMyCheckEnabled").val()=="True")&&(WSMAIN.ReqCc==!1||n("#inMyCheckToken").val()!="")?(n("#dvMessage").removeClass("ws-show-this"),n("#dvBillingMessage").removeClass("ws-show-this"),s=Utils.Format("checkout.aspx?hgID={0}&hotelID={1}&lang={2}&currID={3}",WsVars.HgID,WsVars.HotelID,WsVars.LangCode,WsVars.CurrencyId),r={gotoAuth3DSPayment:"1"},r.token=n("#inMyCheckToken").val(),r.auth3dsPayload=n("#inMyCheck3dsPayload").val(),r.myCheck3dsExternalToken=n("#inMyCheck3dsExternalToken").val(),n("#txLoginEmail").length>0?r.email=n("#txLoginEmail").val():n("#txEmail").length>0&&(r.email=n("#txEmail").val()),r.title=n("#cbSalutation").val(),r.fname=n("#txFirstName").val(),r.lname=n("#txLastName").val(),r.mi=n("#txMiddleInit").val(),r.addr1=n("#txAddress1").val(),r.addr2=n("#txAddress2").val(),r.city=n("#txCity").val(),r.state=n("#txState").val(),r.stcode=n("#cbState").val(),r.country=n("#cbCountry").val(),r.zip=n("#txZip").val(),r.phone=n("#txPhone").val(),r.mobile=n("#txMobile").val(),r.company=n("#txCompany").val(),r.gender=n("#cbGender").val(),r.dobMM=n("#cbBirthMM").val(),r.dobDD=n("#cbBirthDD").val(),r.dobYY=n("#cbBirthYY").val(),r.memberID=n("#txMemberID").val(),r.emailalt=n("#txEmailAlt").val(),r.booked=n("#txBooked").val(),r.purpose=n("#cbTripPurpose").val(),r.tvlProgram=n("#cbTravelProgram").val(),r.tvlMember=n("#txTravelMember").val(),r.arrFlight=n("#txArrFlight").val(),r.arrTime=n("#txArrTime").val(),r.comments=n("#txComments").val(),r.saved=n("#inSaved").val(),r.preferences=WSMAIN.GetPrefs(),r.optin=WSMAIN.GetOptin(),r.optinMobile=WSMAIN.GetOptinMobile(),r.RmRtAddGuestsName=WSMAIN.GetRmRtAddGuestsName(),r.HotelGuestMerbershipProgram=WSMAIN.GetHotelGuestMerbershipProgram(),n("body").css({cursor:"auto"}),h=new MutationObserver(function(n){n[0].removedNodes.length}),e=document.getElementsByClassName("ReactModalPortal")[0],e!=undefined&&e!=null&&h.observe(e,{childList:!0}),n.ajax({type:"POST",url:s,data:r,dataType:"json",success:function(t){t.Msg==="Error"?(n(document).trigger("wsHideProcessingModal"),n("#dvMessage").addClass("ws-show-this").html(t.MsgText)):t.Msg==="SUCCESS"&&t.Url!==""?location.href=t.Url:t.method==="AA"&&t.transaction_id!==null?ProcessChargeWithReservation(t):t.transaction_id!==null&&t.await_Confirm==="0"?ProcessChargeWithReservation(t):n(document).trigger("wsHideProcessingModal")},error:function(){n(document).trigger("wsHideProcessingModal")}}),!1):void 0});var s=null,c=function(t){var u,i,f,e,o,h;if(s=t,t.Addr.length===0&&t.Zip.length===0)r=!0,n("#buReserve").click();else if(t.Code==="0"){if(n("#txAddress1").val(t.Addr),n("#txAddress2").val(t.Addr2),n("#txCity").val(t.City),n("#txZip").val(t.Zip),n("#cbCountry").val()===t.Country)n("#cbState option").length>1?(n("#cbState").val(t.St).change(),n("#txState").val("")):n("#txState").val(t.St);else{if(n("#cbCountry").val(t.Country),n("#dvWsCountry .customSelectInner").html(n("#cbCountry option:selected").html()),t.States.length>0){for(u='<option value="">&nbsp;<\/option>',i=0;i<t.States.length;i++)u+=Utils.Format('<option value="{0}">{1}<\/option>',t.States[i].Name,t.States[i].Desc);n("#cbState").html(u)}n("#cbState option").length>1?(n("#dvState .customSelect, #dvState .ws-required").show(),n("#cbState").removeClass("ws-hide"),n("#txState").hide().val(""),n("#cbState").val(t.St).change()):(n("#dvState .customSelect, #dvState .ws-required").hide(),n("#cbState").addClass("ws-hide"),n("#txState").show().val(t.St))}r=!0;n("#buReserve").click()}else f="",e="",t.Addr2.length>0&&(f=Utils.Format('<p class="ws-address-line">{0}<\/p>',t.Addr2)),n("#txAddress2").val().length>0&&(e=Utils.Format('<p class="ws-address-line">{0}<\/p>',n("#txAddress2").val())),o=Utils.Format('<h4>{0}<\/h4><p class="ws-address-line">{1}<\/p>{2}<p class="ws-address-line">{3}, {4} {5}<\/p>',WsMulti.SuggestedInput,t.Addr,f,t.City,t.St,t.Zip),h=Utils.Format('<h4>{0}<\/h4><p class="ws-address-line">{1}<\/p>{2}<p class="ws-address-line">{3}, {4} {5}<\/p>',WsMulti.YourInput,n("#txAddress1").val(),e,n("#txCity").val(),n("#cbState").val(),n("#txZip").val()),n("#inAddrSuggestion").html(o),n("#inAddrYourInput").html(h),n.magnificPopup.open({items:{src:n("#ws-address-cleansing")},type:"inline"})},i=function(t){var f,c=document.querySelector("#error-msg"),l=document.querySelector("#error-msg1"),w,r,u,e,b,a,v,y,s,i,h,p;if(n("#cbCountry").val()==="US"?(f=n("#txZip").val().replace(/\D/g,"").substr(0,5),n("#txZip").val(f),n("#txZip").attr("maxlength","5")):n("#txZip").attr("maxlength","10"),n("#cbBillCountry").val()==="US"?(f=n("#txBillZip").val().replace(/\D/g,"").substr(0,5),n("#txBillZip").val(f),n("#txBillZip").attr("maxlength","5")):n("#txBillZip").attr("maxlength","10"),t===!0)return"";if(WsHasProgram){if(rqWsEmail&&!SHRWindsurfer.Utils.IsValidEmail(n("#txEmail").val()))return n("#txEmail + p.ws-error").html(WsMsgFmEmail),"txEmail";if(SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramID>1){if(rqWsPassword&&n("#dvWsNewPassword").hasClass("ws-form-item")&&n("#dvWsNewPassword").is(":visible")){if(n("#txNewPassword").val().length===0)return n("#txNewPassword + p.ws-error").html(WsMulti.EnterPassword),"txNewPassword";if(n("#txNewPassword").val().length>0&&n("#txNewPassword").val().length<8)return n("#txNewPassword + p.ws-error").html(WsMulti.LoyaltySignupError101),"txNewPassword"}if((rqWsRetypePassword||SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramID==21)&&n("#dvWsPasswordVerify").hasClass("ws-form-item")&&n("#dvWsPasswordVerify").is(":visible")&&(n("#txPasswordVerify").val().length===0||n("#txPasswordVerify").val()!=n("#txNewPassword").val()))return n("#txPasswordVerify + p.ws-error").html(WsMulti.EnterRetypePassword),"txPasswordVerify"}if(SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramID>1){if((rqWsPassword||SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramID==21)&&n("#dvWsNewPassword").hasClass("ws-form-item")&&n("#dvWsNewPassword").is(":visible")&&n("#txNewPassword").val().length!=0&&n("#txNewPassword").val().length>8&&CheckPassword(n("#txNewPassword").val(),SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramID))return n("#txNewPassword + p.ws-error").html(WsMulti.PasswordStrength),"txNewPassword";if((rqWsRetypePassword||SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramID==21)&&n("#dvWsPasswordVerify").hasClass("ws-form-item")&&n("#dvWsPasswordVerify").is(":visible")&&(n("#txPasswordVerify").val().length!=0||n("#txPasswordVerify").val()==n("#txNewPassword").val())&&CheckPassword(n("#txNewPassword").val(),SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramID))return n("#txPasswordVerify + p.ws-error").html(WsMulti.PasswordStrength),"txPasswordVerify";if((n("#chkLoyaltyAgreeTerm").is(":checked")||SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramID==21)&&n("#cbBirthDD").val().length>0&&n("#cbBirthMM").val().length>0&&n("#cbBirthYY").val().length>0&&(w=CheckAge(n("#cbBirthDD").val()+"-"+n("#cbBirthMM").val()+"-"+n("#cbBirthYY").val()),w<21))return n("#dvWsDob p.ws-error").html(WsMulti.CheckAge),"cbBirthYY"}}else{if(rqWsEmail&&!SHRWindsurfer.Utils.IsValidEmail(n("#txEmail").val()))return n("#txEmail + p.ws-error").html(WsMsgFmEmail),"txEmail";if(n("#dvWsEmail").is(":visible")&&n("#dvWsRetypeEmail").is(":visible")&&n("#txEmail").val()!==n("#txRetypeEmail").val())return n("#txRetypeEmail + p.ws-error").html(WsMsgFmRetypeEmail),"txRetypeEmail"}if(rqWsSalutation&&n("#cbSalutation").val().length===0)return n("#dvWsSalutation p.ws-error").html(WsMsgFmSalute),"cbSalutation";if(rqWsFirstName&&n("#txFirstName").val().length===0)return n("#txFirstName + p.ws-error").html(WsMsgFmFirst),"txFirstName";if(rqWsFirstName&&!Utils.IsInput(n("#txFirstName").val()))return n("#txFirstName + p.ws-error").html(WsMsgFmLatinChars),"txFirstName";if(rqWsMiddleInit&&n("#txMiddleInit").val().length===0)return n("#txMiddleInit + p.ws-error").html(WsMsgFmMiddle),"txMiddleInit";if(rqWsMiddleInit&&!Utils.IsInput(n("#txMiddleInit").val()))return n("#txMiddleInit + p.ws-error").html(WsMsgFmLatinChars),"txMiddleInit";if(rqWsLastName&&n("#txLastName").val().length===0)return n("#txLastName + p.ws-error").html(WsMsgFmLast),"txLastName";if(rqWsLastName&&!Utils.IsInput(n("#txLastName").val()))return n("#txLastName + p.ws-error").html(WsMsgFmLatinChars),"txLastName";if(rqWsAddress1&&n("#txAddress1").val().length===0)return n("#txAddress1 + p.ws-error").html(WsMsgFmAddress),"txAddress1";if(rqWsAddress1&&!Utils.IsInput(n("#txAddress1").val()))return n("#txAddress1 + p.ws-error").html(WsMsgFmAdressLatinChars),"txAddress1";if(rqWsCity&&n("#txCity").val().length===0)return n("#txCity + p.ws-error").html(WsMsgFmCity),"txCity";if(rqWsCity&&!Utils.IsInput(n("#txCity").val()))return n("#txCity + p.ws-error").html(WsMsgFmCityLatinChars),"txCity";if(rqWsZip&&n("#txZip").val().length===0)return n("#txZip + p.ws-error").html(WsMsgFmZip),"txZip";if(rqWsZip&&!Utils.IsInput(n("#txZip").val()))return n("#txZip + p.ws-error").html(WsMsgFmLatinChars),"txZip";if(rqWsState&&n("#cbState option").length>1&&n("#cbState").val().length===0)return n("#dvState p.ws-error").html(WsMsgFmState),"cbState";if(rqWsCompany&&n("#txCompany").val().length===0)return n("#txCompany + p.ws-error").html(WsMsgFmCompany),"txCompany";if(rqWsCompany&&!Utils.IsInput(n("#txCompany").val()))return n("#txCompany + p.ws-error").html(WsMsgFmLatinChars),"txCompany";if(rqWsGender&&n("#cbGender").val().length===0)return n("#dvWsGender p.ws-error").html(WsMsgFmGender),"cbGender";if(rqWsDob&&n("#cbBirthMM").val().length===0)return n("#dvWsDob p.ws-error").html(WsMsgFmDob),"cbBirthMM";if(rqWsDob&&n("#cbBirthDD").val().length===0)return n("#dvWsDob p.ws-error").html(WsMsgFmDob),"cbBirthDD";if(rqWsDob&&n("#cbBirthYY").val().length===0||n("#cbBirthYY").val().length>0&&Number(n("#cbBirthYY").val())>=(new Date).getFullYear())return n("#dvWsDob p.ws-error").html(WsMsgFmDob),"cbBirthYY";if(rqWsMemberID&&n("#txMemberID").val().length===0&&!n("#txMemberID").is("[readonly]"))return n("#txMemberID + p.ws-error").html(WsMsgFmLoyalty),"txMemberID";if(rqWsMemberID&&!Utils.IsInput(n("#txMemberID").val()))return n("#txMemberID + p.ws-error").html(WsMsgFmLatinChars),"txMemberID";if(n("#txMemberID").val().length>0&&!n("#txMemberID").val().match(o)&&!n("#txMemberID").is("[readonly]"))return n("#txMemberID + p.ws-error").html(WsMsgFmLoyalty),"txMemberID";if(rqWsPhone&&n("#txPhone").val().length===0)return n("#txPhone + p.ws-error").html(WsMsgFmPhone),"txPhone";if(rqWsPhone&&!Utils.IsValidPhone(n("#txPhone").val()))return n("#txPhone + p.ws-error").html(WsMsgFmInvalidPhone),"txPhone";if(rqWsMobile&&n("#txMobile").val().length===0)return n("#txMobile + p.ws-error").html(WsMsgFmMobile),"txMobile";if(rqWsMobile&&!Utils.IsValidPhone(n("#txMobile").val()))return n("#txMobile + p.ws-error").html(WsMsgFmInvalidMobile),"txMobile";if(rqCountryDialCode&&typeof c!="undefined"&&c.innerHTML!="undefined"&&c.innerHTML!="")return n("#txPhone + p.ws-error").html(WsMsgFmInvalidMobile),"txPhone";if(rqCountryDialCode&&typeof l!="undefined"&&l.innerHTML!="undefined"&&l.innerHTML!="")return n("#txMobile + p.ws-error").html(WsMsgFmInvalidMobile),"txMobile";if(rqWsEmailAlt&&!SHRWindsurfer.Utils.IsValidEmail(n("#txEmailAlt").val()))return n("#txEmailAlt + p.ws-error").html(WsMsgFmEmailAlt),"txEmailAlt";if(rqWsBookedBy&&n("#txBooked").val().length===0)return n("#txBooked + p.ws-error").html(WsMsgFmBookedBy),"txBooked";if(rqWsBookedBy&&!Utils.IsInput(n("#txBooked").val()))return n("#txBooked + p.ws-error").html(WsMsgFmLatinChars),"txBooked";if(rqWsTripPurpose&&n("#cbTripPurpose").val().length===0)return n("#dvWsTripPurpose p.ws-error").html(WsMsgFmTripPurpose),"cbTripPurpose";if(rqWsTravelProgram&&n("#cbTravelProgram option").length>0&&n("#cbTravelProgram").val().length===0)return n("#dvWsTravelProgram p.ws-error").html(WsMsgFmTravelProgram),"cbTravelProgram";if(rqWsTravelMember&&n("#txTravelMember").val().length===0)return n("#txTravelMember + p.ws-error").html(WsMsgFmTravelMember),"txTravelMember";if(rqWsTravelMember&&!Utils.IsInput(n("#txTravelMember").val()))return n("#txTravelMember + p.ws-error").html(WsMsgFmLatinChars),"txTravelMember";if(rqWsArrFlight&&n("#txArrFlight").val().length===0)return n("#txArrFlight + p.ws-error").html(WsMsgFmArrFlight),"txArrFlight";if(rqWsArrFlight&&!Utils.IsInput(n("#txArrFlight").val()))return n("#txArrFlight + p.ws-error").html(WsMsgFmLatinChars),"txArrFlight";if(rqWsArrTime&&n("#txArrTime").length>0&&n("#txArrTime").val().length===0)return n("#txArrTime + p.ws-error").html(WsMsgFmArrTime),"txArrTime";if(rqWsArrTime&&n("#txArrTime").length>0&&!Utils.IsInput(n("#txArrTime").val()))return n("#txArrTime + p.ws-error").html(WsMsgFmLatinChars),"txArrTime";if(rqWsArrTime&&n("#cbArrTime").length>0&&n("#cbArrTime").val().length===0)return n("#cbArrTime + p.ws-error").html(WsMsgFmArrTime),"cbArrTime";if(rqWsGuestPref&&n("#txComments").val().length===0)return n("#txComments + p.ws-error").html(WsMsgFmComment),"txComments";if(rqWsGuestPref&&!Utils.IsInput(n("#txComments").val()))return n("#txComments + p.ws-error").html(WsMsgFmLatinChars),"txComments";if(rqWsTAIataNumber&&n("#dvWsTAIataNumber").is(":visible")&&n("#txTAIataNumber").val().length===0)return n("#txTAIataNumber + p.ws-error").html(WsMsgFmIataNumber),"txTAIataNumber";if(r=!0,WsVars.IsAdyenV2==1&&n("input:radio[name='WsPaymentMethod$rdPayMethodType']").length>0)if(n("input:radio[name='WsPaymentMethod$rdPayMethodType']:checked").val()=="klarna"||n("input:radio[name='WsPaymentMethod$rdPayMethodType']:checked").val()=="klarna_account"||n("input:radio[name='WsPaymentMethod$rdPayMethodType']:checked").val()=="klarna_paynow"||n("input:radio[name='WsPaymentMethod$rdPayMethodType']:checked").val()=="swish"||n("input:radio[name='WsPaymentMethod$rdPayMethodType']:checked").val()=="googlepay"||n("input:radio[name='WsPaymentMethod$rdPayMethodType']:checked").val()=="applepay"||n("input:radio[name='WsPaymentMethod$rdPayMethodType']:checked").val()=="alipay"||n("input:radio[name='WsPaymentMethod$rdPayMethodType']:checked").val()=="wechatpayweb")r=!1;else if(n("input:radio[name='WsPaymentMethod$rdPayMethodType']:checked").val()=="giftcard"&&(r=!1,n("#txGiftCardNumber").length>0&&n("#txGiftCardNumber").val().length===0))return n("#txGiftCardNumber + p.ws-error").html(WsMsgFmGiftCardNumber),"txGiftCardNumber";if(WsVars.EnableBNPLProviderID==1&&WsVars.FlexPayUpCode!=""&&(n("input:radio[name='rblPayFullPrePayment']:checked").length>0&&n("input:radio[name='rblPayFullPrePayment']:checked").val()=="PayMonthly"||n("input:radio[name='rblSHRPayFullPrePayment']:checked").length>0&&n("input:radio[name='rblSHRPayFullPrePayment']:checked").val()=="PayMonthly")&&(r=!1),SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramID==SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramEnum.FairCloud&&n("#chkLoyaltyAgreeTerm").length>0&&n("#chkLoyaltyAgreeTerm").is(":checked")&&(WSMAIN.ReqCc=!0),n('#dvActiveGuestPrograms, input[type="text"].ws-form-item').length>0&&(u=n('div#dvActiveGuestPrograms input[type="text"]'),u!=null&&u.length>0))for(e="",i=0;i<u.length;i++)if(WsVars&&typeof WsVars.ActiveMembershipAndRegEx!=undefined&&WsVars.ActiveMembershipAndRegEx!=null&&(b=u[i].attributes.ref.value,e=WSMAIN.GetRegexFromProgramCode(b),e.length>0))return e;if(r){if(WsVars.IsPaymentGatewayV1==1&&WsVars.IsEigenDropIn==1&&n("#divEigenIframe").length>0&&!n("#divEigenIframe").hasClass("hide"))return n("#txtEigenCardHolder").val().length===0?(n("#txtEigenCardHolder + p.ws-error").html(WsMsgFmCardHolder),"txtEigenCardHolder"):Utils.IsInput(n("#txtEigenCardHolder").val())?"":(n("#txtEigenCardHolder + p.ws-error").html(WsMsgFmLatinChars),"txtEigenCardHolder");if(WSMAIN.ReqCc&&n("#txCardNumber").length>0||n("#txCardNumber").length>0&&n("#txCardNumber").val().length>0||SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramID==SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramEnum.StellerCRM&&WSMAIN.LoyaltySignupChecked()){if(a=!1,v=Utils.GetCards(n("#txCardNumber").val()),v.length>0&&n("#dvCardType .cc-icon").each(function(){var t=Number(n(this).attr("ref"));if(Utils.ArrayFind(v,t)>=0)return a=!0,!1}),y=n("#txCardHolder").val().replace(/\s+/g,""),y.length===0||/^\d{12,16}$/.test(y))return n("#txCardHolder + p.ws-error").html(WsMsgFmCardHolder),"txCardHolder";if(Utils.IsInput(n("#txCardHolder").val())){if(a===!1)return n("#txCardNumber + p.ws-error").html(WsMsgFmCardNumber),"txCardNumber";if(n("#txCardCvv").length>0&&n("#txCardCvv").val().length===0)return n("#txCardCvv + p.ws-error").html(WsMsgFmCardCvv),"txCardCvv";if(n("#txCardCvv").length>0&&!Utils.IsInput(n("#txCardCvv").val())&&!((WsVars.IsElavonFuseboxProp=="1"||WsVars.IsFreedomPayProp=="1"||WsVars.IsShift4Prop=="1")&&WsVars.TokenizeChargeRefund=="0"))return n("#txCardCvv + p.ws-error").html(WsMsgFmLatinChars),"txCardCvv"}else return n("#txCardHolder + p.ws-error").html(WsMsgFmLatinChars),"txCardHolder";if(n("#field-billing").is(":visible"))for(s=new Date(parseInt(n("#cbCardYY").val()),parseInt(n("#cbCardMM").val()),1),s.setDate(s.getDate()+-1),i=0;i<WSMAIN.Items.length;i++)if(h=new Date(2e3,0,1),h.setDate(h.getDate()+WSMAIN.Items[i].Dt1),s<h)return n("#dvWsCardExpiry p.ws-error").html(WsMsgFmCardExpiry),"cbCardMM"}else if(WSMAIN.ReqCc&&n("#inMyCheckToken").length>0){if(!wsMyCheck)return"txMyCheckMissing";if(!wsMyCheck.Valid())return"txMyCheckFailure"}}if(n("#chkBillDiff").length>0&&n("#chkBillDiff").prop("checked")==!0){if(n("#dvWsBillAddress1").is(":visible")&&n("#txBillAddress1").val().length===0)return n("#txBillAddress1 + p.ws-error").html(WsMsgFmAddress),"txBillAddress1";if(n("#dvWsBillAddress1").is(":visible")&&!Utils.IsInput(n("#txBillAddress1").val()))return n("#txBillAddress1 + p.ws-error").html(WsMsgFmLatinChars),"txBillAddress1";if(n("#txBillCity").val().length===0)return n("#txBillCity + p.ws-error").html(WsMsgFmCity),"txBillCity";if(Utils.IsInput(n("#txBillCity").val())){if(n("#txBillZip").val().length===0)return n("#txBillZip + p.ws-error").html(WsMsgFmZip),"txBillZip";if(Utils.IsInput(n("#txBillZip").val())){if(n("#cbBillState option").length>1&&n("#cbBillState").val().length===0)return n("#dvBillState p.ws-error").html(WsMsgFmState),"cbBillState"}else return n("#txBillZip + p.ws-error").html(WsMsgFmZipCodeLatinChars),"txBillZip"}else return n("#txBillCity + p.ws-error").html(WsMsgFmCityLatinChars),"txBillCity"}return WsVars.EnableConciergeService=="1"&&n(".guest-block").is(":visible")&&(p=!0,storeConciergeGuestAdditionalData(),n(".guest-block:visible").each(function(){var t=IsValidAdditionalGuest(n(this));t||(p=!1)}),!p)?"invalid":""},u=function(t,i){var r="",s,v=document.querySelector("#error-msg"),y=document.querySelector("#error-msg1"),d,f,c,g,e,p,w,b,l,u,a,k;if(n("#cbCountry").val()==="US"?(s=n("#txZip").val().replace(/\D/g,"").substr(0,5),n("#txZip").val(s),n("#txZip").attr("maxlength","5")):n("#txZip").attr("maxlength","10"),n("#cbBillCountry").val()==="US"?(s=n("#txBillZip").val().replace(/\D/g,"").substr(0,5),n("#txBillZip").val(s),n("#txBillZip").attr("maxlength","5")):n("#txBillZip").attr("maxlength","10"),t===!0)return"";if(WsHasProgram){if(rqWsEmail&&!SHRWindsurfer.Utils.IsValidEmail(n("#txEmail").val())&&(jQuery("#txEmail").get(0).hasAttribute("was-focused")&&(n("#txEmail + p.ws-error").html(WsMsgFmEmail),n("#txEmail").addClass("ws-error-form")),r.length==0&&(r="txEmail")),SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramID>1&&(rqWsPassword&&n("#dvWsNewPassword").hasClass("ws-form-item")&&n("#dvWsNewPassword").is(":visible")&&(n("#txNewPassword").val().length===0?(jQuery("#txNewPassword").get(0).hasAttribute("was-focused")&&(n("#txNewPassword + p.ws-error").html(WsMulti.EnterPassword),n("#txNewPassword").addClass("ws-error-form")),r.length==0&&(r="txNewPassword")):n("#txNewPassword").val().length>0&&n("#txNewPassword").val().length<8&&(jQuery("#txNewPassword").get(0).hasAttribute("was-focused")&&(n("#txNewPassword + p.ws-error").html(WsMulti.LoyaltySignupError101),n("#txNewPassword").addClass("ws-error-form")),r.length==0&&(r="txNewPassword"))),(rqWsRetypePassword||SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramID==21)&&n("#dvWsPasswordVerify").hasClass("ws-form-item")&&n("#dvWsPasswordVerify").is(":visible")&&(n("#txPasswordVerify").val().length===0||n("#txPasswordVerify").val()!=n("#txNewPassword").val())&&(jQuery("#txPasswordVerify").get(0).hasAttribute("was-focused")&&(n("#txPasswordVerify + p.ws-error").html(WsMulti.EnterRetypePassword),n("#txPasswordVerify").addClass("ws-error-form")),r.length==0&&(r="txPasswordVerify"))),SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramID>1&&((rqWsPassword||SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramID==21)&&n("#dvWsNewPassword").hasClass("ws-form-item")&&n("#dvWsNewPassword").is(":visible")&&n("#txNewPassword").val().length!=0&&n("#txNewPassword").val().length>8&&CheckPassword(n("#txNewPassword").val(),SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramID)&&n("#txNewPassword + p.ws-error").html(WsMulti.PasswordStrength),(rqWsRetypePassword||SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramID==21)&&n("#dvWsPasswordVerify").hasClass("ws-form-item")&&n("#dvWsPasswordVerify").is(":visible")&&(n("#txPasswordVerify").val().length!=0||n("#txPasswordVerify").val()==n("#txNewPassword").val())&&CheckPassword(n("#txNewPassword").val(),SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramID)&&n("#txPasswordVerify + p.ws-error").html(WsMulti.PasswordStrength),(n("#chkLoyaltyAgreeTerm").is(":checked")||SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramID==21)&&n("#cbBirthDD").val().length>0&&n("#cbBirthMM").val().length>0&&n("#cbBirthYY").val().length>0&&(d=CheckAge(n("#cbBirthDD").val()+"-"+n("#cbBirthMM").val()+"-"+n("#cbBirthYY").val()),d<21)))return n("#dvWsDob p.ws-error").html(WsMulti.CheckAge),"cbBirthYY"}else rqWsEmail&&!SHRWindsurfer.Utils.IsValidEmail(n("#txEmail").val())&&(jQuery("#txEmail").get(0).hasAttribute("was-focused")&&(n("#txEmail + p.ws-error").html(WsMsgFmEmail),n("#txEmail").addClass("ws-error-form")),r.length==0&&(r="txEmail")),n("#dvWsEmail").is(":visible")&&n("#dvWsRetypeEmail").is(":visible")&&n("#txEmail").val()!==n("#txRetypeEmail").val()&&(jQuery("#txRetypeEmail").get(0).hasAttribute("was-focused")&&(n("#txRetypeEmail + p.ws-error").html(WsMsgFmRetypeEmail),n("#txRetypeEmail").addClass("ws-error-form")),r.length==0&&(r="txRetypeEmail"));if(rqWsSalutation&&n("#cbSalutation").val().length===0&&(jQuery("#cbSalutation").get(0).hasAttribute("was-focused")&&(n("#dvWsSalutation p.ws-error").html(WsMsgFmSalute),n("#cbSalutation").addClass("ws-error-form")),r.length==0&&(r="cbSalutation")),rqWsFirstName&&n("#txFirstName").val().length===0&&(jQuery("#txFirstName").get(0).hasAttribute("was-focused")&&(n("#txFirstName + p.ws-error").html(WsMsgFmFirst),n("#txFirstName").addClass("ws-error-form")),r.length==0&&(r="txFirstName")),rqWsFirstName&&!Utils.IsInput(n("#txFirstName").val())&&(jQuery("#txFirstName").get(0).hasAttribute("was-focused")&&(n("#txFirstName + p.ws-error").html(WsMsgFmLatinChars),n("#txFirstName").addClass("ws-error-form")),r.length==0&&(r="txFirstName")),rqWsMiddleInit&&n("#txMiddleInit").val().length===0?(jQuery("#txMiddleInit").get(0).hasAttribute("was-focused")&&(n("#txMiddleInit + p.ws-error").html(WsMsgFmMiddle),n("#txMiddleInit").addClass("ws-error-form")),r.length==0&&(r="txMiddleInit")):rqWsMiddleInit&&!Utils.IsInput(n("#txMiddleInit").val())&&(jQuery("#txMiddleInit").get(0).hasAttribute("was-focused")&&(n("#txMiddleInit + p.ws-error").html(WsMsgFmLatinChars),n("#txMiddleInit").addClass("ws-error-form")),r.length==0&&(r="txMiddleInit")),rqWsLastName&&n("#txLastName").val().length===0?(jQuery("#txLastName").get(0).hasAttribute("was-focused")&&(n("#txLastName + p.ws-error").html(WsMsgFmLast),n("#txLastName").addClass("ws-error-form")),r.length==0&&(r="txLastName")):rqWsLastName&&!Utils.IsInput(n("#txLastName").val())&&(jQuery("#txLastName").get(0).hasAttribute("was-focused")&&(n("#txLastName + p.ws-error").html(WsMsgFmLatinChars),n("#txLastName").addClass("ws-error-form")),r.length==0&&(r="txLastName")),rqWsAddress1&&n("#txAddress1").val().length===0?(jQuery("#txAddress1").get(0).hasAttribute("was-focused")&&(n("#txAddress1 + p.ws-error").html(WsMsgFmAddress),n("#txAddress1").addClass("ws-error-form")),r.length==0&&(r="txAddress1")):rqWsAddress1&&!Utils.IsInput(n("#txAddress1").val())&&(jQuery("#txAddress1").get(0).hasAttribute("was-focused")&&(n("#txAddress1 + p.ws-error").html(WsMsgFmAdressLatinChars),n("#txAddress1").addClass("ws-error-form")),r.length==0&&(r="txAddress1")),rqWsCity&&n("#txCity").val().length===0?(jQuery("#txCity").get(0).hasAttribute("was-focused")&&(n("#txCity + p.ws-error").html(WsMsgFmCity),n("#txCity").addClass("ws-error-form")),r.length==0&&(r="txCity")):rqWsCity&&!Utils.IsInput(n("#txCity").val())&&(jQuery("#txCity").get(0).hasAttribute("was-focused")&&(n("#txCity + p.ws-error").html(WsMsgFmCityLatinChars),n("#txCity").addClass("ws-error-form")),r.length==0&&(r="txCity")),rqWsZip&&n("#txZip").val().length===0?(jQuery("#txZip").get(0).hasAttribute("was-focused")&&(n("#txZip + p.ws-error").html(WsMsgFmZip),n("#txZip").addClass("ws-error-form")),r.length==0&&(r="txZip")):rqWsZip&&!Utils.IsInput(n("#txZip").val())&&(jQuery("#txZip").get(0).hasAttribute("was-focused")&&(n("#txZip + p.ws-error").html(WsMsgFmLatinChars),n("#txZip").addClass("ws-error-form")),r.length==0&&(r="txZip")),rqWsState&&n("#cbState option").length>1&&n("#cbState").val().length===0&&(jQuery("#cbState").get(0).hasAttribute("was-focused")&&(n("#dvState p.ws-error").html(WsMsgFmState),n("#cbState").addClass("ws-error-form")),r.length==0&&(r="cbState")),rqWsCompany&&n("#txCompany").val().length===0?(jQuery("#txCompany").get(0).hasAttribute("was-focused")&&(n("#txCompany + p.ws-error").html(WsMsgFmCompany),n("#txCompany").addClass("ws-error-form")),r.length==0&&(r="txCompany")):rqWsCompany&&!Utils.IsInput(n("#txCompany").val())&&(jQuery("#txCompany").get(0).hasAttribute("was-focused")&&(n("#txCompany + p.ws-error").html(WsMsgFmLatinChars),n("#txCompany").addClass("ws-error-form")),r.length==0&&(r="txCompany")),rqWsGender&&n("#cbGender").val().length===0&&(jQuery("#cbGender").get(0).hasAttribute("was-focused")&&(n("#dvWsGender p.ws-error").html(WsMsgFmGender),n("#cbGender").addClass("ws-error-form")),r.length==0&&(r="cbGender")),rqWsDob&&n("#cbBirthMM").val().length===0&&(jQuery("#cbBirthMM").get(0).hasAttribute("was-focused")&&(n("#dvWsDob p.ws-error").html(WsMsgFmDob),n("#cbBirthMM").addClass("ws-error-form")),r.length==0&&(r="cbBirthMM")),rqWsDob&&n("#cbBirthDD").val().length===0&&(jQuery("#cbBirthDD").get(0).hasAttribute("was-focused")&&(n("#dvWsDob p.ws-error").html(WsMsgFmDob),n("#cbBirthDD").addClass("ws-error-form")),r.length==0&&(r="cbBirthDD")),(rqWsDob&&n("#cbBirthYY").val().length===0||n("#cbBirthYY").val().length>0&&Number(n("#cbBirthYY").val())>=(new Date).getFullYear())&&(jQuery("#cbBirthYY").get(0).hasAttribute("was-focused")&&(n("#dvWsDob p.ws-error").html(WsMsgFmDob),n("#cbBirthYY").addClass("ws-error-form")),r.length==0&&(r="cbBirthYY")),rqWsMemberID&&n("#txMemberID").val().length===0&&!n("#txMemberID").is("[readonly]")?(jQuery("#txMemberID").get(0).hasAttribute("was-focused")&&(n("#txMemberID + p.ws-error").html(WsMsgFmLoyalty),n("#txMemberID").addClass("ws-error-form")),r.length==0&&(r="txMemberID")):rqWsMemberID&&!Utils.IsInput(n("#txMemberID").val())?(jQuery("#txMemberID").get(0).hasAttribute("was-focused")&&(n("#txMemberID + p.ws-error").html(WsMsgFmLatinChars),n("#txMemberID").addClass("ws-error-form")),r.length==0&&(r="txMemberID")):n("#txMemberID").val().length>0&&!n("#txMemberID").val().match(o)&&!n("#txMemberID").is("[readonly]")&&(jQuery("#txMemberID").get(0).hasAttribute("was-focused")&&(n("#txMemberID + p.ws-error").html(WsMsgFmLoyalty),n("#txMemberID").addClass("ws-error-form")),r.length==0&&(r="txMemberID")),rqWsPhone&&n("#txPhone").val().length===0?(jQuery("#txPhone").get(0).hasAttribute("was-focused")&&(n("#txPhone + p.ws-error").html(WsMsgFmPhone),n("#txPhone").addClass("ws-error-form")),r.length==0&&(r="txPhone")):rqWsPhone&&!Utils.IsValidPhone(n("#txPhone").val())&&(jQuery("#txPhone").get(0).hasAttribute("was-focused")&&(n("#txPhone + p.ws-error").html(WsMsgFmInvalidPhone),n("#txPhone").addClass("ws-error-form")),r.length==0&&(r="txPhone")),rqWsMobile&&n("#txMobile").val().length===0?(jQuery("#txMobile").get(0).hasAttribute("was-focused")&&(n("#txMobile + p.ws-error").html(WsMsgFmMobile),n("#txMobile").addClass("ws-error-form")),r.length==0&&(r="txMobile")):rqWsMobile&&!Utils.IsValidPhone(n("#txMobile").val())&&(jQuery("#txMobile").get(0).hasAttribute("was-focused")&&(n("#txMobile + p.ws-error").html(WsMsgFmInvalidMobile),n("#txMobile").addClass("ws-error-form")),r.length==0&&(r="txMobile")),rqCountryDialCode&&typeof v!="undefined"&&v.innerHTML!="undefined"&&v.innerHTML!=""&&(n("#txPhone + p.ws-error").html(WsMsgFmInvalidMobile),n("#txPhone").addClass("ws-error-form"),r.length==0&&(r="txPhone")),rqCountryDialCode&&typeof y!="undefined"&&y.innerHTML!="undefined"&&y.innerHTML!=""&&(n("#txMobile + p.ws-error").html(WsMsgFmInvalidMobile),n("#txMobile").addClass("ws-error-form"),r.length==0&&(r="txMobile")),rqWsEmailAlt&&!SHRWindsurfer.Utils.IsValidEmail(n("#txEmailAlt").val())&&(jQuery("#txEmailAlt").get(0).hasAttribute("was-focused")&&(n("#txEmailAlt + p.ws-error").html(WsMsgFmEmailAlt),n("#txEmailAlt").addClass("ws-error-form")),r.length==0&&(r="txEmailAlt")),rqWsBookedBy&&n("#txBooked").val().length===0?(jQuery("#txBooked").get(0).hasAttribute("was-focused")&&(n("#txBooked + p.ws-error").html(WsMsgFmBookedBy),n("#txBooked").addClass("ws-error-form")),r.length==0&&(r="txBooked")):rqWsBookedBy&&!Utils.IsInput(n("#txBooked").val())&&(jQuery("#txBooked").get(0).hasAttribute("was-focused")&&(n("#txBooked + p.ws-error").html(WsMsgFmLatinChars),n("#txBooked").addClass("ws-error-form")),r.length==0&&(r="txBooked")),rqWsTripPurpose&&n("#cbTripPurpose").val().length===0&&(jQuery("#cbTripPurpose").get(0).hasAttribute("was-focused")&&(n("#dvWsTripPurpose p.ws-error").html(WsMsgFmTripPurpose),n("#cbTripPurpose").addClass("ws-error-form")),r.length==0&&(r="cbTripPurpose")),rqWsTravelProgram&&n("#cbTravelProgram option").length>0&&n("#cbTravelProgram").val().length===0&&(jQuery("#cbTravelProgram").get(0).hasAttribute("was-focused")&&(n("#dvWsTravelProgram p.ws-error").html(WsMsgFmTravelProgram),n("#cbTravelProgram").addClass("ws-error-form")),r.length==0&&(r="cbTravelProgram")),rqWsTravelMember&&n("#txTravelMember").val().length===0?(jQuery("#txTravelMember").get(0).hasAttribute("was-focused")&&(n("#txTravelMember + p.ws-error").html(WsMsgFmTravelMember),n("#txTravelMember").addClass("ws-error-form")),r.length==0&&(r="txTravelMember")):rqWsTravelMember&&!Utils.IsInput(n("#txTravelMember").val())&&(jQuery("#txTravelMember").get(0).hasAttribute("was-focused")&&(n("#txTravelMember + p.ws-error").html(WsMsgFmLatinChars),n("#txTravelMember").addClass("ws-error-form")),r.length==0&&(r="txTravelMember")),rqWsArrFlight&&n("#txArrFlight").val().length===0?(jQuery("#txArrFlight").get(0).hasAttribute("was-focused")&&(n("#txArrFlight + p.ws-error").html(WsMsgFmArrFlight),n("#txArrFlight").addClass("ws-error-form")),r.length==0&&(r="txArrFlight")):rqWsArrFlight&&!Utils.IsInput(n("#txArrFlight").val())&&(jQuery("#txArrFlight").get(0).hasAttribute("was-focused")&&(n("#txArrFlight + p.ws-error").html(WsMsgFmLatinChars),n("#txArrFlight").addClass("ws-error-form")),r.length==0&&(r="txArrFlight")),rqWsArrTime&&n("#txArrTime").length>0&&n("#txArrTime").val().length===0?(jQuery("#txArrTime").get(0).hasAttribute("was-focused")&&(n("#txArrTime + p.ws-error").html(WsMsgFmArrTime),n("#txArrTime").addClass("ws-error-form")),r.length==0&&(r="txArrTime")):rqWsArrTime&&n("#txArrTime").length>0&&!Utils.IsInput(n("#txArrTime").val())?(jQuery("#txArrTime").get(0).hasAttribute("was-focused")&&(n("#txArrTime + p.ws-error").html(WsMsgFmLatinChars),n("#txArrTime").addClass("ws-error-form")),r.length==0&&(r="txArrTime")):rqWsArrTime&&n("#cbArrTime").length>0&&n("#cbArrTime").val().length===0&&(jQuery("#cbArrTime").get(0).hasAttribute("was-focused")&&(n("#cbArrTime + p.ws-error").html(WsMsgFmArrTime),n("#cbArrTime").addClass("ws-error-form")),r.length==0&&(r="cbArrTime")),rqWsGuestPref&&n("#txComments").val().length===0?(jQuery("#txComments").get(0).hasAttribute("was-focused")&&(n("#txComments + p.ws-error").html(WsMsgFmComment),n("#txComments").addClass("ws-error-form")),r.length==0&&(r="txComments")):rqWsGuestPref&&!Utils.IsInput(n("#txComments").val())&&(jQuery("#txComments").get(0).hasAttribute("was-focused")&&(n("#txComments + p.ws-error").html(WsMsgFmLatinChars),n("#txComments").addClass("ws-error-form")),r.length==0&&(r="txComments")),rqWsTAIataNumber&&n("#dvWsTAIataNumber").is(":visible")&&n("#txTAIataNumber").val().length===0&&(n("#txTAIataNumber").get(0).hasAttribute("was-focused")&&(n("#txTAIataNumber + p.ws-error").html(WsMsgFmIataNumber),n("#txTAIataNumber").addClass("ws-error-form")),r.length==0&&(r="txTAIataNumber")),n('#dvActiveGuestPrograms, input[type="text"].ws-form-item').length>0&&(f=n('div#dvActiveGuestPrograms input[type="text"]'),f!=null&&f.length>0))for(c="",u=0;u<f.length;u++)if(WsVars&&typeof WsVars.ActiveMembershipAndRegEx!=undefined&&WsVars.ActiveMembershipAndRegEx!=null&&(g=f[u].attributes.ref.value,c=WSMAIN.GetRegexFromProgramCode(g),c.length>0)){r=c;break}if(e=!0,WsVars.IsAdyenV2==1&&n("input:radio[name='WsPaymentMethod$rdPayMethodType']").length>0)if(n("input:radio[name='WsPaymentMethod$rdPayMethodType']:checked").val()=="klarna"||n("input:radio[name='WsPaymentMethod$rdPayMethodType']:checked").val()=="klarna_account"||n("input:radio[name='WsPaymentMethod$rdPayMethodType']:checked").val()=="klarna_paynow"||n("input:radio[name='WsPaymentMethod$rdPayMethodType']:checked").val()=="swish"||n("input:radio[name='WsPaymentMethod$rdPayMethodType']:checked").val()=="googlepay"||n("input:radio[name='WsPaymentMethod$rdPayMethodType']:checked").val()=="applepay"||n("input:radio[name='WsPaymentMethod$rdPayMethodType']:checked").val()=="alipay"||n("input:radio[name='WsPaymentMethod$rdPayMethodType']:checked").val()=="wechatpayweb")e=!1;else if(n("input:radio[name='WsPaymentMethod$rdPayMethodType']:checked").val()=="giftcard"&&(e=!1,n("#txGiftCardNumber").length>0&&n("#txGiftCardNumber").val().length===0))return n("#txGiftCardNumber + p.ws-error").html(WsMsgFmCardNumber),"txGiftCardNumber";if(WsVars.EnableBNPLProviderID==1&&WsVars.FlexPayUpCode!=""&&(n("input:radio[name='rblPayFullPrePayment']:checked").length>0&&n("input:radio[name='rblPayFullPrePayment']:checked").val()=="PayMonthly"||n("input:radio[name='rblSHRPayFullPrePayment']:checked").length>0&&n("input:radio[name='rblSHRPayFullPrePayment']:checked").val()=="PayMonthly")&&(e=!1),SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramID==SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramEnum.FairCloud&&n("#chkLoyaltyAgreeTerm").length>0&&n("#chkLoyaltyAgreeTerm").is(":checked")&&(WSMAIN.ReqCc=!0),e){if(WsVars.IsPaymentGatewayV1==1&&WsVars.IsEigenDropIn==1&&n("#divEigenIframe").length>0&&!n("#divEigenIframe").hasClass("hide"))return n("#txtEigenCardHolder").val().length===0?(n("#txtEigenCardHolder + p.ws-error").html(WsMsgFmCardHolder),"txtEigenCardHolder"):Utils.IsInput(n("#txtEigenCardHolder").val())?"":(n("#txtEigenCardHolder + p.ws-error").html(WsMsgFmLatinChars),"txtEigenCardHolder");if(WSMAIN.ReqCc&&n("#txCardNumber").length>0||n("#txCardNumber").length>0&&n("#txCardNumber").val().length>0||SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramID==SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramEnum.StellerCRM&&WSMAIN.LoyaltySignupChecked()){if(p=!1,w=Utils.GetCards(n("#txCardNumber").val()),w.length>0&&n("#dvCardType .cc-icon").each(function(){var t=Number(n(this).attr("ref"));if(Utils.ArrayFind(w,t)>=0)return p=!0,!1}),b=n("#txCardHolder").val().replace(/\s+/g,""),b.length===0||/^\d{12,16}$/.test(b)?(jQuery("#txCardHolder").get(0).hasAttribute("was-focused")&&(n("#txCardHolder + p.ws-error").html(WsMsgFmCardHolder),n("#txCardHolder").addClass("ws-error-form")),r.length==0&&(r="txCardHolder")):Utils.IsInput(n("#txCardHolder").val())||(jQuery("#txCardHolder").get(0).hasAttribute("was-focused")&&(n("#txCardHolder + p.ws-error").html(WsMsgFmLatinChars),n("#txCardHolder").addClass("ws-error-form")),r.length==0&&(r="txCardHolder")),p===!1&&(jQuery("#txCardNumber").get(0).hasAttribute("was-focused")&&(n("#txCardNumber + p.ws-error").html(WsMsgFmCardNumber),n("#txCardNumber").addClass("ws-error-form")),r.length==0&&(r="txCardNumber")),n("#txCardCvv").length>0&&n("#txCardCvv").val().length===0?(jQuery("#txCardCvv").get(0).hasAttribute("was-focused")&&(n("#txCardCvv + p.ws-error").html(WsMsgFmCardCvv),n("#txCardCvv").addClass("ws-error-form")),r.length==0&&(r="txCardCvv")):n("#txCardCvv").length>0&&!Utils.IsInput(n("#txCardCvv").val())&&(jQuery("#txCardCvv").get(0).hasAttribute("was-focused")&&(n("#txCardCvv + p.ws-error").html(WsMsgFmLatinChars),n("#txCardCvv").addClass("ws-error-form")),r.length==0&&(r="txCardCvv")),n("#field-billing").is(":visible"))for(l=new Date(parseInt(n("#cbCardYY").val()),parseInt(n("#cbCardMM").val()),1),l.setDate(l.getDate()+-1),u=0;u<WSMAIN.Items.length;u++)a=new Date(2e3,0,1),a.setDate(a.getDate()+WSMAIN.Items[u].Dt1),l<a&&(jQuery("#cbCardYY").get(0).hasAttribute("was-focused")&&(n("#dvWsCardExpiry p.ws-error").html(WsMsgFmCardExpiry),n("#cbCardYY").addClass("ws-error-form")),r.length==0&&(r="cbCardYY"))}else WSMAIN.ReqCc&&n("#inMyCheckToken").length>0&&(wsMyCheck||r.length==0&&(r="txMyCheckMissing"),wsMyCheck.Valid()||r.length==0&&(r="txMyCheckFailure"))}return(n("#chkBillDiff").length>0&&n("#chkBillDiff").prop("checked")==!0&&(n("#dvWsBillAddress1").is(":visible")&&n("#txBillAddress1").val().length===0?(jQuery("#txBillAddress1").get(0).hasAttribute("was-focused")&&(n("#txBillAddress1 + p.ws-error").html(WsMsgFmAddress),n("#txBillAddress1").addClass("ws-error-form")),r.length==0&&(r="txBillAddress1")):n("#dvWsBillAddress1").is(":visible")&&!Utils.IsInput(n("#txBillAddress1").val())&&(jQuery("#txBillAddress1").get(0).hasAttribute("was-focused")&&(n("#txBillAddress1 + p.ws-error").html(WsMsgFmLatinChars),n("#txBillAddress1").addClass("ws-error-form")),r.length==0&&(r="txBillAddress1")),n("#txBillCity").val().length===0?(jQuery("#txBillCity").get(0).hasAttribute("was-focused")&&(n("#txBillCity + p.ws-error").html(WsMsgFmCity),n("#txBillCity").addClass("ws-error-form")),r.length==0&&(r="txBillCity")):Utils.IsInput(n("#txBillCity").val())||(jQuery("#txBillCity").get(0).hasAttribute("was-focused")&&(n("#txBillCity + p.ws-error").html(WsMsgFmCityLatinChars),n("#txBillCity").addClass("ws-error-form")),r.length==0&&(r="txBillCity")),n("#txBillZip").val().length===0?(jQuery("#txBillZip").get(0).hasAttribute("was-focused")&&(n("#txBillZip + p.ws-error").html(WsMsgFmZip),n("#txBillZip").addClass("ws-error-form")),r.length==0&&(r="txBillZip")):Utils.IsInput(n("#txBillZip").val())||(jQuery("#txBillZip").get(0).hasAttribute("was-focused")&&(n("#txBillZip + p.ws-error").html(WsMsgFmZipCodeLatinChars),n("#txBillZip").addClass("ws-error-form")),r.length==0&&(r="txBillZip")),n("#cbBillState option").length>1&&n("#cbBillState").val().length===0&&(jQuery("#cbBillState").get(0).hasAttribute("was-focused")&&(n("#dvBillState p.ws-error").html(WsMsgFmState),n("#cbBillState").addClass("ws-error-form")),r.length==0&&(r="cbBillState"))),i===!0&&WsVars.EnableConciergeService=="1"&&n(".guest-block").is(":visible")&&(k=!0,storeConciergeGuestAdditionalData(),n(".guest-block:visible").each(function(){var t=IsValidAdditionalGuest(n(this));t||(k=!1)}),!k))?"invalid":(h(),r)},h=function(){n('.ws-transaction input[type="text"],.ws-transaction input[type="password"],.ws-transaction input select').attr("aria-describedby","");n('input[type="text"].ws-error-form,input[type="password"].ws-error-form').each(function(){n("#"+this.id+" + p.ws-error").attr("id","err"+this.id);n(this).attr("aria-describedby","err"+this.id)});n("select.ws-error-form").each(function(){n("#"+n(this).parent("div").attr("id")+" p.ws-error").attr("id","err"+n(this).parent("div").attr("id"));n(this).attr("aria-describedby","err"+n(this).parent("div").attr("id"))})};if(n(".wsCartLoyaltyItemBuDelete").click(function(){n("#hdSignInClicked").val("0");n("#hdSignUpClicked").val("1");n.magnificPopup.close();var t=!1;if(t=WSMAIN.CheckNeedSignUp(),t==!1?n("#chkLoyaltyAgreeTerm").prop("checked",!1):n("#chkLoyaltyAgreeTerm").prop("checked",!0),SHRWindsurfer.WsLoyaltyHandler.hasActiveLoyaltyProgram()&&SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramID!=SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramEnum.StellerCRM)if(SHR.Loyalty.DoSignup())n("#hdSignUpAlready").val("1");else return n("#hdSignUpAlready").val("0"),!1;n("#emReserveText").removeClass("ws-visible").addClass("ws-hidden");n("#buAuth3DS").is(":visible")?n("#buAuth3DS").click():n("#buReserve_Braintree").is(":visible")?n("#buReserve_Braintree").click():n("#buPayment").is(":visible")?n("#buPayment").click():n("#buPesapal").is(":visible")?n("#buPesapal").click():n("#buSCB").is(":visible")?n("#buSCB").click():n("#buReserve").is(":visible")&&n("#wsform").submit();return}),n("#buWsProgramLogin").length>0)n("#buWsLogin").on("click",function(){return $link=n("#buWsProgramLogin:first"),$link[0].click(),!1});else if(n("#buWsDelegAuthLogin").length>0)n("#buWsLogin").on("click",function(){return $link=n("#buWsDelegAuthLogin:first"),$link[0].click(),!1});else n("#buWsLogin").magnificPopup({type:"inline",midClick:!0});n("#MyHeading_buAgreeCancel").click(function(){n.magnificPopup.close();location.href=Utils.Format("cart.aspx?hotelID={0}&lang={1}&hgID={2}&currID={3}",WsVars.HotelID,WsVars.LangCode,WsVars.HgID,WsVars.CurrencyId)});n("#MyHeading_buAgreeLogin").click(function(){return n("#hdSignInClicked").val("1"),n.magnificPopup.close(),SHR.Loyalty.DoSignup()?void 0:!1});n("#chkLoyaltyAgreeTerm").on("change",function(){n("#chkLoyaltyAgreeTerm").prop("checked")==!0?(n("#emReserveText").removeClass("ws-hidden").addClass("ws-visible"),(Number(SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramConfig2)&SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramConfig2Enum.SupportPasswordForSignup)>0&&(n("#dvWsNewPassword").removeClass("ws-hide-action").addClass("ws-form-item"),n("#dvWsPasswordVerify").removeClass("ws-hide-action").addClass("ws-form-item")),SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramID==SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramEnum.FairCloud&&(this.ReqCc=!0)):(n("#emReserveText").removeClass("ws-visible").addClass("ws-hidden"),n("#dvWsNewPassword").addClass("ws-hide-action").removeClass("ws-form-item"),n("#dvWsPasswordVerify").addClass("ws-hide-action").removeClass("ws-form-item"),SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramID==SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramEnum.FairCloud&&(this.ReqCc=!1));SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramID!=SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramEnum.FairCloud||SHRWindsurfer.Utils.CartContainsLoyalty()||WSMAIN.SetCCRequired()});WsVars.IBESkinVer=="3"&&(n("#lbCardExpire").removeAttr("for"),n('<span class="sr-only" for="cbCardMM">month<\/span>').insertBefore("#cbCardMM"),n('<span class="sr-only" for="cbCardYY">year<\/span>').insertBefore("#cbCardYY"),n('<span class="sr-only" for="cbBirthMM">month<\/span>').insertBefore("#cbBirthMM"),n('<span class="sr-only" for="cbBirthDD">day<\/span>').insertBefore("#cbBirthDD"),n('<span class="sr-only" for="cbBirthYY">year<\/span>').insertBefore("#cbBirthYY"),n("#txAddress2").attr("aria-label","Address Line"),n("#txBillAddress2").attr("aria-label","Billing Address Line"),BypassAddressBarFocus());SetInputFieldRequired();WSMAIN.IsLoggedIn()&&(Number(SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramConfig2)&SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramConfig2Enum.SuppLoyaltyPoints)>0&&n("#divslidecontainer").is(":visible")&&WsVars.EnablePayByPoints=="1"&&GetLoyaltyPoints(!1,0,-1);n(".ws-slider-loyalty .ws-range-points .txtRangePoints").on("change",function(){var i=n(this).attr("ix"),t=n(this).val();WSMAIN.IsEmpty(t)&&(t=0);n('.ws-slider-loyalty .LoyaltyPointsRange[ix="'+i+'"]').val(t);WsVars.EnableFractionalCredits=="1"?GetLoyaltyPoints(!0,t,i):n('.ws-slider-loyalty .LoyaltyPointsRange[ix="'+i+'"]').change()});n(".ws-slider-loyalty .LoyaltyPointsRange").on("change",function(){var i=n(this).attr("ix"),t=n(this).val();WsVars.EnableFractionalCredits=="1"&&(t=t/100);n(this).find("#txtRangePoints").val(t);WSMAIN.IsEmpty(t)&&(t=0);GetLoyaltyPoints(!0,t,i)});WsVars.EnableAddressAutoComplete=="1"&&initAddressAutocomplete()});SHR=SHR||{};SHR.Loyalty=SHR.Loyalty||{};SHR.Loyalty.DoSignup=function(){var r,i,n,t;return WsHasProgram?(r=SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramID==SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramEnum.WindsurferGuest,WSMAIN.IsLoggedIn())?!0:WSMAIN.CheckNeedSignUp()&&!WSMAIN.LoyaltySignupChecked()?(WSMAIN.Alert(WsMulti.MsgLoginForPromo),!1):WSMAIN.LoyaltySignupChecked()&&((WSEvents&&WSEvents.do_action("SignupValidateBegin",{}),i="xml/setloyalty.aspx",n={hotelID:WsVars.HotelID,langID:WsVars.LangID,hgID:WsVars.HgID,fname:$("#txFirstName").val(),lname:$("#txLastName").val(),eml:$("#txEmail").val(),nonce:$("#hdBrainTreenonce").val(),source:"Checkout",simple:"1"},$("#cbSalutation").length>0&&(n.salute=$("#cbSalutation").val()),$("#cbBirthYY").length>0&&(n.dobY=$("#cbBirthYY").val()),$("#cbBirthMM").length>0&&(n.dobM=$("#cbBirthMM").val()),$("#cbBirthDD").length>0&&(n.dobD=$("#cbBirthDD").val()),$("#txPassword").length>0&&(n.password=$("#txPassword").val()),$("#txNewPassword").is(":visible")&&$("#txNewPassword").length>0&&(n.password=$("#txNewPassword").val()),$("#txVerifyNumber").length>0&&(n.captchaID=$("#txVerifyNumber").get(0).Captcha.Id,n.instanceID=$("#txVerifyNumber").get(0).Captcha.InstanceId,n.verifyNumber=$("#txVerifyNumber").val(),n.signmeup="1",WsSelectedItem!=null?(n.wsitem=JSON.stringify(WsSelectedItem),n.rooms=WSMAIN.Rooms):WsLoggedInRate.length>0&&(n.wsrate=WsLoggedInRate),i="index.aspx"),$("#txPhone").length>0&&(n.phone=$("#txPhone").val()),$("#txAddress1").length>0&&(n.Address1=$("#txAddress1").val()),$("#txAddress2").length>0&&(n.Address2=$("#txAddress2").val()),$("#txCity").length>0&&(n.City=$("#txCity").val()),$("#txZip").length>0&&(n.Zip=$("#txZip").val()),$("#cbCountry").length>0&&(n.Country=$("#cbCountry").val()),$("#cbState").length>0&&$("#cbState").val()!=""?n.State=$("#cbState").val():$("#txState").length>0&&(n.State=$("#txState").val()),n.OptIn=WSMAIN.GetOptin(),SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramID==SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramEnum.FairCloud&&(n.billingZipCode=$("#txBillZip").val(),n.nameOnCard=$("#txCardHolder").val(),n.cardNumber=$("#txCardNumber").val(),n.expiryMonth=$("#cbCardMM").val().length>1?$("#cbCardMM").val():0+$("#cbCardMM").val(),n.expiryYear=$("#cbCardYY").val()),$("body").css({cursor:"wait"}),$("#buReserve").hasClass("ws-submitting"))||($("#buReserve").addClass("ws-submitting"),$(".ws-reserve-button").addClass("ws-disabled"),WSEvents&&WSEvents.do_action("SignupProcessBegin",{url:i,data:n}),t=!1,$.ajaxSetup({"async":!1}),$.ajax({type:"POST",url:i,data:n,dataType:"json",success:function(n){var i,u;if(WSEvents&&WSEvents.do_action("SignupProcessOK",n),$("body").css({cursor:"auto"}),n.Msg.length>0&&($("#msgSignUp").length>0?$("#msgSignUp").html(n.Msg):$("#dvMessage").length>0&&($("#dvMessage").html(n.Msg),$("#dvMessage").addClass("ws-messages ws-collapsible ws-show-this"))),n.Status=="1")t=!0,SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramID==SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramEnum.MavrickCRM&&($("#chkMaverickSignUp").is(":checked")||$("#chkLoyaltyAgreeTerm").is(":checked"))&&(t=!0,document.querySelector("#hLoyaltySignUpResponse").value=n.Status),SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramID==SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramEnum.ResortWorld&&$("#chkLoyaltyAgreeTerm").is(":checked")&&(document.querySelector("#hLoyaltySignUpResponse").value=n.Status);else{if(t=!1,n.Status=="-4"){if($("#MyHeading_sbLoyalSignIn").html(WsMulti.lbSignInMsgUniv),SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramID==SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramEnum.FairCloud&&n.Msg.length>0&&n.Msg=="Token expired"?$("#MyHeading_paraLoyalSignInHeaderFull").html(WsMulti.lbLoginExpiredMsg):$("#MyHeading_paraLoyalSignInHeaderFull").html(WsMulti.lbSignInMsgUniv),SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramID==SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramEnum.FBLV&&$("#buWsDelegAuthLogin").length>0){$("#fmUnivSignIn .ws-single-action").children().addClass("ws-hidden");$("#buUnivSignIn").length==0&&$("#fmUnivSignIn .ws-single-action").append('<div class="ws-buttons ws-returning-guest"><a id="buUnivSignIn" href="#" class="ws-button ws-primary"> Sign In <\/a><\/div>');$("#fmUnivSignIn .ws-single-action #buUnivSignIn").parent("div").removeClass("ws-hidden");$("#buUnivSignIn").on("click",function(){return $link=$("#buWsDelegAuthLogin:first"),$link[0].click(),!1})}else $("#txUnivLoginUsn").val($("#txEmail").val()),$("#MyHeading_txLoginUsnHeaderFull").val($("#txEmail").val()),$("#txUnivLoginUsn,#txUnivLoginPwd").removeClass("ws-error-form"),$("#msgUnivLogin").html(""),$("#txUnivLoginPwd").val("");SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramID>1&&$("#MyHeading_sbLoyalSignIn").html(WsMulti.lbSignInMsgRL);i="#ws-modal-login";r&&(i="#ws-modal-loyalty-header-full");u=$("#buWsDelegAuthLogin").length>0?$("#buWsDelegAuthLogin").attr("data-auth"):"";u!=undefined&&u!=null&&u!=""&&$(".ws-delegauth-signin").length>0&&(i="",$("#MyHeading_paraLoyalSignInHeaderFull").html(""),$(".ws-delegauth-signin").trigger("click"));i!=""&&$.magnificPopup.open({items:{src:i,type:"inline"},callbacks:{close:function(){return SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramID==SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramEnum.FairCloud&&n.Msg.length>0&&n.Msg=="Token expired"?($("#MyHeading_paraLoyalSignInHeaderFull").html(WsMulti.lbLoginExpiredMsg),$("#MyHeading_sbLoyalSignIn").html(WsMulti.lbLoginExpiredMsg)):($("#MyHeading_paraLoyalSignInHeaderFull").html(WsMulti.lbSignInMsgUniv),$("#MyHeading_sbLoyalSignIn").html(WsMulti.lbSignInMsgUniv)),$.magnificPopup.proto.close.call(this),!1}}});SHRWindsurfer.Utils.CartContainsLoyalty()?WSMAIN.Alert(WsMulti.MsgLoginForPromo):WSMAIN.Alert(WsMulti.MsgLoginForNonPromo)}else SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramID==SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramEnum.StellerCRM?(t=!0,document.querySelector("#hdLoyaltySignUpPayment").value=n.Status):SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramID==SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramEnum.MavrickCRM&&$("#chkMaverickSignUp").is(":checked")&&(t=!0,document.querySelector("#hLoyaltySignUpResponse").value=n.Status);t||$("#buReserve").hasClass("ws-submitting")&&($("#buReserve").removeClass("ws-submitting"),$(".ws-reserve-button").removeClass("ws-disabled"))}SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramID==SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramEnum.FairCloud&&(t=!0,document.querySelector("#hSignupStatus").value=n.Status)},error:function(n){if($("body").css({cursor:"auto"}),WSEvents&&WSEvents.do_action("SignupProcessError",n),SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramID==SHRWindsurfer.WsLoyaltyHandler.LoyaltyProgramEnum.StellerCRM)t=!0;else return!1}}),!t))?!1:!0:!0};
//# sourceMappingURL=wscheckout.min.js.map